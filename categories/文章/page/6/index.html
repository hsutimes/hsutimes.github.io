<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 3.9.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>分类: 文章 - Time</title>


    <meta name="description" content="blog">
<meta name="keywords" content="hsutimes">
<meta property="og:type" content="website">
<meta property="og:title" content="Time">
<meta property="og:url" content="https://blog.hsutimes.com/categories/文章/page/6/index.html">
<meta property="og:site_name" content="Time">
<meta property="og:description" content="blog">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://blog.hsutimes.com/images/og_image.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Time">
<meta name="twitter:description" content="blog">
<meta name="twitter:image" content="https://blog.hsutimes.com/images/og_image.png">
<meta name="twitter:site" content="https://twitter.com/times26740863">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134224598-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134224598-1');
</script>

    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="Time" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/hsutimes/hsutimes.github.io">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    <div class="card-content">
        <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/categories">分类</a></li>
            
            <li class="is-active"><a href="#" aria-current="page">文章</a></li>
        </ul>
        </nav>
    </div>
</div>

    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-12T13:15:04.000Z">2019-09-12</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 分钟 读完 (大约 652 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/12/nohup-在linux后台运行程序/">nohup:在linux后台运行程序</a>
            
        </h1>
        <div class="content">
            <p><img src="/images/2019/09/12/0188c220-d55f-11e9-b847-b9c45ddd4bb9.png" alt="image.png"></p>
<h1 id="nohup-在linux后台运行程序"><a href="#nohup-在linux后台运行程序" class="headerlink" title="nohup:在linux后台运行程序"></a>nohup:在linux后台运行程序</h1><p>今天在工作中，lz要在Linux系统上运行一个java程序，这个程序要在系统中持续运行。随后lz无意将ssh窗口关掉了，发现java程序停止了。原来，当使用ssh连接到系统运行程序的时候，该程序已经和你的ssh连接绑定了。如果你关闭连接，该程序就会停止。还有一个情景：如果要在后台运行多个java程序的时候，就需要启动多个ssh窗口，这样很麻烦。有没有方法来解决这个问题呢？答案是肯定的。</p>
<p>1.使用nohup来执行命令，它会把命令自动调到linux后台运行，不锁定当前ssh窗口，也不会被ctrl + c，alt + F4之类打断程序的动行。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar test.jar &amp;</span><br></pre></td></tr></table></figure>

<p>执行完该命令后，终端会显示如下信息：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[1] 27945</span><br><span class="line">nohup: 忽略输入并把输出追加到&quot;nohup.out&quot;</span><br></pre></td></tr></table></figure>

<p>[1]：该后台任务的jobid<br>27945：是该进程的pid<br>nohup.out：是该任务的输出位置</p>
<p>2.要指定重定向的文件，如下：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar test.jar &gt; test.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>

<p>3.如果一个任务已经在前台执行，那就使用以下方法来将任务调整到后台：</p>
<p>（1）首先，在正在执行任务的终端使用ctrl+z</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1]+  已停止               java -jar test.jar</span><br></pre></td></tr></table></figure>

<p>（2）使用bg命令将该任务调整至后台（fg与之相反，将后台任务调整至前台）</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bg %1(1是jobid)</span><br></pre></td></tr></table></figure>

<p>如果不知道jobid，也可以使用jobs命令来查询。</p>
<p>但是任务的输出还是会打印到终端上的（具体怎么将输出重定向到别的地方，lz也不造）。而且，这时该任务还是与当前终端相关联的，关闭终端还是会断掉该任务的。使用下面命令来解决：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disown -h %1</span><br></pre></td></tr></table></figure>

<p>这样再也不用担心关掉终端会停止掉任务喽！！！</p>
<p>PS：再来说说nohup吧。nohup的意思是no hang up，就是说关掉终端是不会挂掉程序的。如果开始执行命令时只使用&amp;：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar test.jar &amp;</span><br></pre></td></tr></table></figure>

<p>那么该任务也会在后台执行，但是一旦关掉终端该任务还是会挂掉，所以这就是nohup的用处了。</p>
<p><a href="http://ee-dreamer.com/?p=327" target="_blank" rel="noopener">原文链接</a></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-10T13:45:18.000Z">2019-09-10</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 分钟 读完 (大约 968 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/10/Git-Rebase-黄金法则问题/">Git Rebase 黄金法则问题</a>
            
        </h1>
        <div class="content">
            <h1 id="Git-Rebase-黄金法则问题"><a href="#Git-Rebase-黄金法则问题" class="headerlink" title="Git Rebase 黄金法则问题"></a>Git Rebase 黄金法则问题</h1><p>git 整合来自不同分支的修改主要有两种方法：merge 操作和rebase操作，<br>merge初学者可能很熟悉。我们今天来主要说一下 rebase 操作，文章结尾会简单说一下 merge 操作的 –no-ff 参数问题。</p>
<p>rebase的简单定义：你可以把某一分支的所有修改都移至另外一个分支就像重新播放一样。<br>有点儿像金庸武侠小说里面的乾坤大挪移。<br>举个🌰<br>假设我们本地库的代码，如下所示</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">      A---B---C  remotes/origin/master</span><br><span class="line">     /</span><br><span class="line">D---E---F---G  master</span><br></pre></td></tr></table></figure>

<p>如果此时我们执行 git pull 操作，就会变成下面的样子，因为 pull 默认执行的是 merge 操作，多出来H这次没必要的提交。如下所示</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">     A---B---C  remotes/origin/master</span><br><span class="line">     /         \</span><br><span class="line">D---E---F---G---H master</span><br></pre></td></tr></table></figure>

<p>如果我们执行 git pull –rebase 操作，将会变成下面的样子，这里我们用rebase代替了默认的merge操作</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">            remotes/origin</span><br><span class="line">                |</span><br><span class="line">D---E---A---B---C---F---G</span><br><span class="line">                        |</span><br><span class="line">                        master</span><br></pre></td></tr></table></figure>

<p>rebase 作用就是变成线性了，这在多人协作的情况变得非常关键。因为多人合作是不允许随意制造分叉的。大家可以参考我这篇文章。</p>
<p>这就引出了这篇博文要主要阐述的问题，rebase golden rule 问题。</p>
<blockquote>
<p>Rebase golden rule<br>“No one shall rebase a shared branch” — Everyone about rebase</p>
</blockquote>
<p>简单来说就是不要在你的公共分支上做任何rebase操作。<br>再举一个🌰。</p>
<p>图一是我们做rebase操作前的样子</p>
<p><img src="/images/2019/09/10/75e5c990-d3d1-11e9-903f-858fa70b7712.png" alt="image.png"></p>
<p>图二是我们正确rebase的结果，即在feature分支执行rebase develop命令</p>
<p><img src="/images/2019/09/10/7a0f9d20-d3d1-11e9-903f-858fa70b7712.png" alt="image.png"></p>
<p>图三是我们错误rebase的结果，即违反黄金法则的结果，我们在develop分支上执行了rebase feature操作</p>
<p><img src="/images/2019/09/10/7ce48f10-d3d1-11e9-903f-858fa70b7712.png" alt="image.png"></p>
<p>当我们在图三这种情况下对develop分支进行提交的话，会发现和远程分支冲突，然后我们手动或自动解决冲突，继续提交上去之后发现，我们修改的功能代码已经提交上去了，但是当我们看我们提交历史的记录的时候会发现有一部分重复的提交log。<br>这就是问题所在，你的项目组长是绝对不允许在他的项目里出现这种情况，因为会影响后续的代码追查，code review等问题。<br>说完了这个问题，这篇博文的主要任务基本完成了，最后在简单说一下 merge 的 –no-ff 参数，这也是我们在分支合并的时候经常遇到的问题。<br>–no-ff 的意思就是关闭 merge 的 fast-forwarded，merge 操作默认执行的是 fast-forwarded。<br>fast-forwarded 的意思就是在合并分支的时候，如果不涉及三方合并，git 只会简单的移动指针。<br>再再举一个🌰</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">        dev</span><br><span class="line">        |</span><br><span class="line">A---B---C</span><br><span class="line">         \</span><br><span class="line">          D---E</span><br><span class="line">              |</span><br><span class="line">              feature</span><br></pre></td></tr></table></figure>

<p>此时我们执行 merge –no-ff 操作，将会得到如下图</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">                dev</span><br><span class="line">                |</span><br><span class="line">A---B---C--------F</span><br><span class="line">         \      /</span><br><span class="line">          D---E</span><br></pre></td></tr></table></figure>

<p>执行 merge 之后得到的结果如下</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">               dev</span><br><span class="line">                |</span><br><span class="line">A---B---C---D---E</span><br></pre></td></tr></table></figure>

<p>如上git 将指针从C移到了E。</p>
<p>简单来说就是 –no-ff 的作用就是保持分支的非线性。方便我们看到分支的变化。</p>
<blockquote>
<p>本文作者： Frank<br>本文链接： <a href="http://hellofrank.github.io/2018/04/27/Git-Rebase-黄金法则问题/" target="_blank" rel="noopener">http://hellofrank.github.io/2018/04/27/Git-Rebase-黄金法则问题/</a><br>版权声明： 本博客所有文章除特别声明外，均采用 CC BY-NC-SA 4.0 许可协议。转载请注明出处！</p>
</blockquote>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-09T00:39:17.000Z">2019-09-09</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    28 分钟 读完 (大约 4164 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/09/Flutter-Http请求开源库-dio/">Flutter Http请求开源库-dio</a>
            
        </h1>
        <div class="content">
            <p>文档语言: <a href="README.md">English</a> | <a href="README-ZH.md">中文简体</a></p>
<h1 id="dio"><a href="#dio" class="headerlink" title="dio"></a>dio</h1><p><img src="/images/2019/09/09/3ed7aff0-d29a-11e9-a25e-85ff34c3f186.png" alt="image.png"></p>
<p>dio是一个强大的Dart Http请求库，支持Restful API、FormData、拦截器、请求取消、Cookie管理、文件上传/下载、超时等…</p>
<h3 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h3><figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">dependencies:</span></span><br><span class="line"><span class="hljs-attr">  dio:</span> <span class="hljs-string">^x.x.x</span>  <span class="hljs-string">//</span> <span class="hljs-string">请使用pub上的最新版本</span></span><br></pre></td></tr></table></figure>

<h2 id="一个极简的示例"><a href="#一个极简的示例" class="headerlink" title="一个极简的示例"></a>一个极简的示例</h2><figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:dio/dio.dart'</span>;</span><br><span class="line"><span class="hljs-keyword">void</span> getHttp() <span class="hljs-keyword">async</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">    Response response;</span><br><span class="line">    response = <span class="hljs-keyword">await</span> Dio().<span class="hljs-keyword">get</span>(<span class="hljs-string">"http://www.baidu.com"</span>);</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-built_in">print</span>(response);</span><br><span class="line">  &#125; <span class="hljs-keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-built_in">print</span>(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="内容列表"><a href="#内容列表" class="headerlink" title="内容列表"></a>内容列表</h2><ul>
<li><a href="#示例">示例</a></li>
<li><a href="#dio-apis">Dio APIs</a></li>
<li><a href="#请求配置">请求配置</a></li>
<li><a href="#响应数据">响应数据</a></li>
<li><a href="#拦截器">拦截器</a></li>
<li><a href="#错误处理">错误处理</a></li>
<li><a href="#使用applicationx-www-form-urlencoded编码">使用application/x-www-form-urlencoded编码</a></li>
<li><a href="#formdata">FormData</a></li>
<li><a href="#转换器">转换器</a></li>
<li><a href="#设置Http代理">设置Http代理</a></li>
<li><a href="#Https证书校验">Https证书校验</a></li>
<li><a href="#请求取消">请求取消</a></li>
<li><a href="#cookie管理">Cookie管理</a></li>
<li><a href="#features-and-bugs">Features and bugs</a></li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>发起一个 <code>GET</code> 请求 :</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  Response response;</span><br><span class="line">  Dio dio = <span class="hljs-keyword">new</span> Dio();</span><br><span class="line">  response = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/test?id=12&amp;name=wendu"</span>)</span><br><span class="line">  <span class="hljs-built_in">print</span>(response.data.toString());</span><br><span class="line"><span class="hljs-comment">// 请求参数也可以通过对象传递，上面的代码等同于：</span></span><br><span class="line">  response = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/test"</span>, data: &#123;<span class="hljs-string">"id"</span>: <span class="hljs-number">12</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"wendu"</span>&#125;);</span><br><span class="line">  <span class="hljs-built_in">print</span>(response.data.toString());</span><br></pre></td></tr></table></figure>

<p>发起一个 <code>POST</code> 请求:</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response = <span class="hljs-keyword">await</span> dio.post(<span class="hljs-string">"/test"</span>, data: &#123;<span class="hljs-string">"id"</span>: <span class="hljs-number">12</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"wendu"</span>&#125;);</span><br></pre></td></tr></table></figure>

<p>发起多个并发请求:</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response = <span class="hljs-keyword">await</span> Future.wait([dio.post(<span class="hljs-string">"/info"</span>), dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/token"</span>)]);</span><br></pre></td></tr></table></figure>

<p>下载文件:</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response = <span class="hljs-keyword">await</span> dio.download(<span class="hljs-string">"https://www.google.com/"</span>, <span class="hljs-string">"./xx.html"</span>);</span><br></pre></td></tr></table></figure>

<p>发送 FormData:</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FormData formData = <span class="hljs-keyword">new</span> FormData.from(&#123;</span><br><span class="line">    <span class="hljs-string">"name"</span>: <span class="hljs-string">"wendux"</span>,</span><br><span class="line">    <span class="hljs-string">"age"</span>: <span class="hljs-number">25</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  response = <span class="hljs-keyword">await</span> dio.post(<span class="hljs-string">"/info"</span>, data: formData);</span><br></pre></td></tr></table></figure>

<p>通过FormData上传多个文件:</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">FormData formData = <span class="hljs-keyword">new</span> FormData.from(&#123;</span><br><span class="line">  <span class="hljs-string">"name"</span>: <span class="hljs-string">"wendux"</span>,</span><br><span class="line">  <span class="hljs-string">"age"</span>: <span class="hljs-number">25</span>,</span><br><span class="line">  <span class="hljs-string">"file1"</span>: <span class="hljs-keyword">new</span> UploadFileInfo(<span class="hljs-keyword">new</span> File(<span class="hljs-string">"./upload.txt"</span>), <span class="hljs-string">"upload1.txt"</span>),</span><br><span class="line">  <span class="hljs-comment">//支持直接上传字节数组 (List&lt;int&gt;) ，方便直接上传内存中的内容</span></span><br><span class="line">  <span class="hljs-string">"file2"</span>: <span class="hljs-keyword">new</span> UploadFileInfo.fromBytes(</span><br><span class="line">      utf8.encode(<span class="hljs-string">"hello world"</span>), <span class="hljs-string">"word.txt"</span>),</span><br><span class="line">  <span class="hljs-comment">// 支持文件数组上传</span></span><br><span class="line">  <span class="hljs-string">"files"</span>: [</span><br><span class="line">    <span class="hljs-keyword">new</span> UploadFileInfo(<span class="hljs-keyword">new</span> File(<span class="hljs-string">"./example/upload.txt"</span>), <span class="hljs-string">"upload.txt"</span>),</span><br><span class="line">    <span class="hljs-keyword">new</span> UploadFileInfo(<span class="hljs-keyword">new</span> File(<span class="hljs-string">"./example/upload.txt"</span>), <span class="hljs-string">"upload.txt"</span>)</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line">response = <span class="hljs-keyword">await</span> dio.post(<span class="hljs-string">"/info"</span>, data: formData);</span><br></pre></td></tr></table></figure>

<p>监听发送(上传)数据进度:</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">response = <span class="hljs-keyword">await</span> dio.post(</span><br><span class="line">  <span class="hljs-string">"http://www.dtworkroom.com/doris/1/2.0.0/test"</span>,</span><br><span class="line">  data: &#123;<span class="hljs-string">"aa"</span>: <span class="hljs-string">"bb"</span> * <span class="hljs-number">22</span>&#125;,</span><br><span class="line">  onUploadProgress: (<span class="hljs-built_in">int</span> sent, <span class="hljs-built_in">int</span> total) &#123;</span><br><span class="line">    <span class="hljs-built_in">print</span>(<span class="hljs-string">"<span class="hljs-subst">$sent</span> <span class="hljs-subst">$total</span>"</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>…你可以在这里获取所有<a href="https://github.com/flutterchina/dio/tree/flutter/example" target="_blank" rel="noopener">示例代码</a>.</p>
<h2 id="Dio-APIs"><a href="#Dio-APIs" class="headerlink" title="Dio APIs"></a>Dio APIs</h2><h3 id="创建一个Dio实例，并配置它"><a href="#创建一个Dio实例，并配置它" class="headerlink" title="创建一个Dio实例，并配置它"></a>创建一个Dio实例，并配置它</h3><p>你可以使用默认配置或传递一个可选 <code>Options</code>参数来创建一个Dio实例 :</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Dio dio = <span class="hljs-keyword">new</span> Dio; <span class="hljs-comment">// 使用默认配置</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 配置dio实例</span></span><br><span class="line">  dio.options.baseUrl = <span class="hljs-string">"https://www.xx.com/api"</span>;</span><br><span class="line">  dio.options.connectTimeout = <span class="hljs-number">5000</span>; <span class="hljs-comment">//5s</span></span><br><span class="line">  dio.options.receiveTimeout = <span class="hljs-number">3000</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 或者通过传递一个 `options`来创建dio实例</span></span><br><span class="line">  Options options = <span class="hljs-keyword">new</span> Options(</span><br><span class="line">      baseUrl: <span class="hljs-string">"https://www.xx.com/api"</span>,</span><br><span class="line">      connectTimeout: <span class="hljs-number">5000</span>,</span><br><span class="line">      receiveTimeout: <span class="hljs-number">3000</span>);</span><br><span class="line">  Dio dio = <span class="hljs-keyword">new</span> Dio(options);</span><br></pre></td></tr></table></figure>

<p>Dio实例的核心API是 :</p>
<p><strong>Future<response> request(String path, {data, Options options,CancelToken cancelToken})</response></strong></p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">response = <span class="hljs-keyword">await</span> request(</span><br><span class="line">    <span class="hljs-string">"/test"</span>, data: &#123;<span class="hljs-string">"id"</span>: <span class="hljs-number">12</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"xx"</span>&#125;, <span class="hljs-keyword">new</span> Options(method: <span class="hljs-string">"GET"</span>));</span><br></pre></td></tr></table></figure>

<h3 id="请求方法别名"><a href="#请求方法别名" class="headerlink" title="请求方法别名"></a>请求方法别名</h3><p>为了方便使用，Dio提供了一些其它的Restful API, 这些API都是<code>request</code>的别名。</p>
<p><strong>Future<response> get(path, {data, Options options,CancelToken cancelToken})</response></strong></p>
<p><strong>Future<response> post(path, {data, Options options,CancelToken cancelToken})</response></strong></p>
<p><strong>Future<response> put(path, {data, Options options,CancelToken cancelToken})</response></strong></p>
<p><strong>Future<response> delete(path, {data, Options options,CancelToken cancelToken})</response></strong></p>
<p><strong>Future<response> head(path, {data, Options options,CancelToken cancelToken})</response></strong></p>
<p><strong>Future<response> put(path, {data, Options options,CancelToken cancelToken})</response></strong></p>
<p><strong>Future<response> path(path, {data, Options options,CancelToken cancelToken})</response></strong></p>
<p><strong>Future<response> download(String urlPath, savePath,</response></strong><br>​    <strong>{OnDownloadProgress onProgress, data, bool flush: false, Options options,CancelToken cancelToken})</strong></p>
<h2 id="请求配置"><a href="#请求配置" class="headerlink" title="请求配置"></a>请求配置</h2><p>下面是所有的请求配置选项。 如果请求<code>method</code>没有指定，则默认为<code>GET</code> :</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="hljs-comment">/// Http method.</span></span><br><span class="line">  <span class="hljs-built_in">String</span> method;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// 请求基地址,可以包含子路径，如: "https://www.google.com/api/".</span></span><br><span class="line">  <span class="hljs-built_in">String</span> baseUrl;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// Http请求头.</span></span><br><span class="line">  <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-keyword">dynamic</span>&gt; headers;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// 连接服务器超时时间，单位是毫秒.</span></span><br><span class="line">  <span class="hljs-built_in">int</span> connectTimeout;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">///  响应流上前后两次接受到数据的间隔，单位为毫秒。如果两次间隔超过[receiveTimeout]，</span></span><br><span class="line">  <span class="hljs-comment">///  [Dio] 将会抛出一个[DioErrorType.RECEIVE_TIMEOUT]的异常.</span></span><br><span class="line">  <span class="hljs-comment">///  注意: 这并不是接收数据的总时限.</span></span><br><span class="line">  <span class="hljs-built_in">int</span> receiveTimeout;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// 请求数据,可以是任意类型.</span></span><br><span class="line">  <span class="hljs-keyword">var</span> data;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// 请求路径，如果 `path` 以 "http(s)"开始, 则 `baseURL` 会被忽略； 否则,</span></span><br><span class="line">  <span class="hljs-comment">/// 将会和baseUrl拼接出完整的的url.</span></span><br><span class="line">  <span class="hljs-built_in">String</span> path = <span class="hljs-string">""</span>;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// 请求的Content-Type，默认值是[ContentType.JSON].</span></span><br><span class="line">  <span class="hljs-comment">/// 如果您想以"application/x-www-form-urlencoded"格式编码请求数据,</span></span><br><span class="line">  <span class="hljs-comment">/// 可以设置此选项为 `ContentType.parse("application/x-www-form-urlencoded")`,  这样[Dio]</span></span><br><span class="line">  <span class="hljs-comment">/// 就会自动编码请求体.</span></span><br><span class="line">  ContentType contentType;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// [responseType] 表示期望以那种格式(方式)接受响应数据。</span></span><br><span class="line">  <span class="hljs-comment">/// 目前 [ResponseType] 接受三种类型 `JSON`, `STREAM`, `PLAIN`.</span></span><br><span class="line">  <span class="hljs-comment">///</span></span><br><span class="line">  <span class="hljs-comment">/// 默认值是 `JSON`, 当响应头中content-type为"application/json"时，dio 会自动将响应内容转化为json对象。</span></span><br><span class="line">  <span class="hljs-comment">/// 如果想以二进制方式接受响应数据，如下载一个二进制文件，那么可以使用 `STREAM`.</span></span><br><span class="line">  <span class="hljs-comment">///</span></span><br><span class="line">  <span class="hljs-comment">/// 如果想以文本(字符串)格式接收响应数据，请使用 `PLAIN`.</span></span><br><span class="line">  ResponseType responseType;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// `validateStatus` 决定http响应状态码是否被dio视为请求成功， 返回`validateStatus`</span></span><br><span class="line">  <span class="hljs-comment">///  返回`true` , 请求结果就会按成功处理，否则会按失败处理.</span></span><br><span class="line">  ValidateStatus validateStatus;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// 用户自定义字段，可以在 [Interceptor]、[Transformer] 和 [Response] 中取到.</span></span><br><span class="line">  <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-keyword">dynamic</span>&gt; extra;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里有一个完成的<a href="https://github.com/flutterchina/dio/blob/flutter/example/options.dart" target="_blank" rel="noopener">示例</a>.</p>
<h2 id="响应数据"><a href="#响应数据" class="headerlink" title="响应数据"></a>响应数据</h2><p>当请求成功时会返回一个Response对象，它包含如下字段：</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="hljs-comment">/// 响应数据，可能已经被转换了类型, 详情请参考Options中的[ResponseType].</span></span><br><span class="line">  <span class="hljs-keyword">var</span> data;</span><br><span class="line">  <span class="hljs-comment">/// 响应头</span></span><br><span class="line">  HttpHeaders headers;</span><br><span class="line">  <span class="hljs-comment">/// 本次请求信息</span></span><br><span class="line">  Options request;</span><br><span class="line">  <span class="hljs-comment">/// Http status code.</span></span><br><span class="line">  <span class="hljs-built_in">int</span> statusCode;</span><br><span class="line">  <span class="hljs-comment">/// 响应对象的自定义字段（可以在拦截器中设置它），调用方可以在`then`中获取.</span></span><br><span class="line">  <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-keyword">dynamic</span>&gt; extra;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>示例如下:</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Response response = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">"https://www.google.com"</span>);</span><br><span class="line"><span class="hljs-built_in">print</span>(response.data);</span><br><span class="line"><span class="hljs-built_in">print</span>(response.headers);</span><br><span class="line"><span class="hljs-built_in">print</span>(response.request);</span><br><span class="line"><span class="hljs-built_in">print</span>(response.statusCode);</span><br></pre></td></tr></table></figure>

<h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><p>每一个 Dio 实例都有一个请求拦截器  <code>RequestInterceptor</code> 和一个响应拦截器 <code>ResponseInterceptor</code>, 通过拦截器你可以在请求之前或响应之后(但还没有被 <code>then</code> 或 <code>catchError</code>处理)做一些统一的预处理操作。</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">dio.interceptor.request.onSend = (Options options)&#123;</span><br><span class="line">    <span class="hljs-comment">// 在请求被发送之前做一些事情</span></span><br><span class="line">    <span class="hljs-keyword">return</span> options; <span class="hljs-comment">//continue</span></span><br><span class="line">    <span class="hljs-comment">// 如果你想完成请求并返回一些自定义数据，可以返回一个`Response`对象或返回`dio.resolve(data)`。</span></span><br><span class="line">    <span class="hljs-comment">// 这样请求将会被终止，上层then会被调用，then中返回的数据将是你的自定义数据data.</span></span><br><span class="line">    <span class="hljs-comment">//</span></span><br><span class="line">    <span class="hljs-comment">// 如果你想终止请求并触发一个错误,你可以返回一个`DioError`对象，或返回`dio.reject(errMsg)`，</span></span><br><span class="line">    <span class="hljs-comment">// 这样请求将被中止并触发异常，上层catchError会被调用。</span></span><br><span class="line">&#125;</span><br><span class="line">dio.interceptor.response.onSuccess = (Response response) &#123;</span><br><span class="line">    <span class="hljs-comment">// 在返回响应数据之前做一些预处理</span></span><br><span class="line">    <span class="hljs-keyword">return</span> response; <span class="hljs-comment">// continue</span></span><br><span class="line">&#125;;</span><br><span class="line">dio.interceptor.response.onError = (DioError e)&#123;</span><br><span class="line">    <span class="hljs-comment">// 当请求失败时做一些预处理</span></span><br><span class="line">    <span class="hljs-keyword">return</span> e;<span class="hljs-comment">//continue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果你想移除拦截器，你可以将它们置为null:</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dio.interceptor.request.onSend = <span class="hljs-keyword">null</span>;</span><br><span class="line">dio.interceptor.response.onSuccess = <span class="hljs-keyword">null</span>;</span><br><span class="line">dio.interceptor.response.onError = <span class="hljs-keyword">null</span>;</span><br></pre></td></tr></table></figure>

<h3 id="完成和终止请求-响应"><a href="#完成和终止请求-响应" class="headerlink" title="完成和终止请求/响应"></a>完成和终止请求/响应</h3><p>在所有拦截器中，你都可以改变请求执行流， 如果你想完成请求/响应并返回自定义数据，你可以返回一个 <code>Response</code> 对象或返回 <code>dio.resolve(data)</code>的结果。 如果你想终止(触发一个错误，上层<code>catchError</code>会被调用)一个请求/响应，那么可以返回一个<code>DioError</code> 对象或返回 <code>dio.reject(errMsg)</code> 的结果.</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dio.interceptor.request.onSend = (Options options) &#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> dio.resolve(<span class="hljs-string">"fake data"</span>)</span><br><span class="line">&#125;</span><br><span class="line">Response response = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/test"</span>);</span><br><span class="line"><span class="hljs-built_in">print</span>(response.data); <span class="hljs-comment">//"fake data"</span></span><br></pre></td></tr></table></figure>

<h3 id="拦截器中支持异步任务"><a href="#拦截器中支持异步任务" class="headerlink" title="拦截器中支持异步任务"></a>拦截器中支持异步任务</h3><p>拦截器中不仅支持同步任务，而且也支持异步任务, 下面是在请求拦截器中发起异步任务的一个实例:</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> dio.interceptor.request.onSend = (Options options) <span class="hljs-keyword">async</span> &#123;</span><br><span class="line">    <span class="hljs-comment">//...If no token, request token firstly.</span></span><br><span class="line">    Response response = <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/token"</span>);</span><br><span class="line">    <span class="hljs-comment">//Set the token to headers</span></span><br><span class="line">    options.headers[<span class="hljs-string">"token"</span>] = response.data[<span class="hljs-string">"data"</span>][<span class="hljs-string">"token"</span>];</span><br><span class="line">    <span class="hljs-keyword">return</span> options; <span class="hljs-comment">//continue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Lock-unlock-拦截器"><a href="#Lock-unlock-拦截器" class="headerlink" title="Lock/unlock 拦截器"></a>Lock/unlock 拦截器</h3><p>你可以通过调用拦截器的 <code>lock()</code>/<code>unlock</code> 方法来锁定/解锁拦截器。一旦请求/响应拦截器被锁定，接下来的请求/响应将会在进入请求/响应拦截器之前排队等待，直到解锁后，这些入队的请求才会继续执行(进入拦截器)。这在一些需要串行化请求/响应的场景中非常实用，后面我们将给出一个示例。</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">tokenDio = <span class="hljs-keyword">new</span> Dio(); <span class="hljs-comment">//Create a new instance to request the token.</span></span><br><span class="line">tokenDio.options = dio;</span><br><span class="line">dio.interceptor.request.onSend = (Options options) <span class="hljs-keyword">async</span> &#123;</span><br><span class="line">  <span class="hljs-comment">// If no token, request token firstly and lock this interceptor</span></span><br><span class="line">  <span class="hljs-comment">// to prevent other request enter this interceptor.</span></span><br><span class="line">  dio.interceptor.request.lock();</span><br><span class="line">  <span class="hljs-comment">// We use a new Dio(to avoid dead lock) instance to request token.</span></span><br><span class="line">  Response response = <span class="hljs-keyword">await</span> tokenDio.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/token"</span>);</span><br><span class="line">  <span class="hljs-comment">//Set the token to headers</span></span><br><span class="line">  options.headers[<span class="hljs-string">"token"</span>] = response.data[<span class="hljs-string">"data"</span>][<span class="hljs-string">"token"</span>];</span><br><span class="line">  dio.interceptor.request.unlock();</span><br><span class="line">  <span class="hljs-keyword">return</span> options; <span class="hljs-comment">//continue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Clear()</strong></p>
<p>你也可以调用拦截器的<code>clear()</code>方法来清空等待队列。</p>
<h3 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h3><p>当<strong>请求</strong>拦截器被锁定时，接下来的请求将会暂停，这等价于锁住了dio实例，因此，Dio示例上提供了<strong>请求</strong>拦截器<code>lock/unlock</code>的别名方法：</p>
<p><strong>dio.lock() ==  dio.interceptor.request.lock()</strong></p>
<p><strong>dio.unlock() ==  dio.interceptor.request.unlock()</strong></p>
<p><strong>dio.clear() ==  dio.interceptor.request.clear()</strong></p>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><p>假设这么一个场景：出于安全原因，我们需要给所有的请求头中添加一个csrfToken，如果csrfToken不存在，我们先去请求csrfToken，获取到csrfToken后，再发起后续请求。 由于请求csrfToken的过程是异步的，我们需要在请求过程中锁定后续请求（因为它们需要csrfToken), 直到csrfToken请求成功后，再解锁，代码如下：</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">dio.interceptor.request.onSend = (Options options) &#123;</span><br><span class="line">    <span class="hljs-built_in">print</span>(<span class="hljs-string">'send request：path:<span class="hljs-subst">$&#123;options.path&#125;</span>，baseURL:<span class="hljs-subst">$&#123;options.baseUrl&#125;</span>'</span>);</span><br><span class="line">    <span class="hljs-keyword">if</span> (csrfToken == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">      <span class="hljs-built_in">print</span>(<span class="hljs-string">"no token，request token firstly..."</span>);</span><br><span class="line">      <span class="hljs-comment">//lock the dio.</span></span><br><span class="line">      dio.lock();</span><br><span class="line">      <span class="hljs-keyword">return</span> tokenDio.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/token"</span>).then((d) &#123;</span><br><span class="line">        options.headers[<span class="hljs-string">"csrfToken"</span>] = csrfToken = d.data[<span class="hljs-string">'data'</span>][<span class="hljs-string">'token'</span>];</span><br><span class="line">        <span class="hljs-built_in">print</span>(<span class="hljs-string">"request token succeed, value: "</span> + d.data[<span class="hljs-string">'data'</span>][<span class="hljs-string">'token'</span>]);</span><br><span class="line">        <span class="hljs-built_in">print</span>(<span class="hljs-string">'continue to perform request：path:<span class="hljs-subst">$&#123;options.path&#125;</span>，baseURL:<span class="hljs-subst">$&#123;options.path&#125;</span>'</span>);</span><br><span class="line">        <span class="hljs-keyword">return</span> options;</span><br><span class="line">      &#125;).whenComplete(() =&gt; dio.unlock()); <span class="hljs-comment">// unlock the dio</span></span><br><span class="line">    &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">      options.headers[<span class="hljs-string">"csrfToken"</span>] = csrfToken;</span><br><span class="line">      <span class="hljs-keyword">return</span> options;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<p>完整的示例代码请点击 <a href="https://github.com/flutterchina/dio/blob/flutter/example/interceptorLock.dart" target="_blank" rel="noopener">这里</a>.</p>
<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><p>当请求过程中发生错误时, Dio 会包装 <code>Error/Exception</code> 为一个 <code>DioError</code>:</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">try</span> &#123;</span><br><span class="line">  <span class="hljs-comment">//404</span></span><br><span class="line">  <span class="hljs-keyword">await</span> dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">"https://wendux.github.io/xsddddd"</span>);</span><br><span class="line">&#125; on DioError <span class="hljs-keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="hljs-comment">// The request was made and the server responded with a status code</span></span><br><span class="line">  <span class="hljs-comment">// that falls out of the range of 2xx and is also not 304.</span></span><br><span class="line">  <span class="hljs-keyword">if</span> (e.response) &#123;</span><br><span class="line">    <span class="hljs-built_in">print</span>(e.response.data);</span><br><span class="line">    <span class="hljs-built_in">print</span>(e.response.headers);</span><br><span class="line">    <span class="hljs-built_in">print</span>(e.response.request);</span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">    <span class="hljs-comment">// Something happened in setting up or sending the request that triggered an Error</span></span><br><span class="line">    <span class="hljs-built_in">print</span>(e.request);</span><br><span class="line">    <span class="hljs-built_in">print</span>(e.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="DioError-字段"><a href="#DioError-字段" class="headerlink" title="DioError 字段"></a>DioError 字段</h3><figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">  <span class="hljs-comment">/// 响应信息, 如果错误发生在在服务器返回数据之前，它为 `null`</span></span><br><span class="line">  Response response;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// 错误描述.</span></span><br><span class="line">  <span class="hljs-built_in">String</span> message;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// 错误类型，见下文</span></span><br><span class="line">  DioErrorType type;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// 错误栈信息，可能为null</span></span><br><span class="line">  StackTrace stackTrace;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="DioErrorType"><a href="#DioErrorType" class="headerlink" title="DioErrorType"></a>DioErrorType</h3><figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">enum</span> DioErrorType &#123;</span><br><span class="line">  <span class="hljs-comment">/// Default error type, usually occurs before connecting the server.</span></span><br><span class="line">  DEFAULT,</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// When opening  url timeout, it occurs.</span></span><br><span class="line">  CONNECT_TIMEOUT,</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">///  Whenever more than [receiveTimeout] (in milliseconds) passes between two events from response stream,</span></span><br><span class="line">  <span class="hljs-comment">///  [Dio] will throw the [DioError] with [DioErrorType.RECEIVE_TIMEOUT].</span></span><br><span class="line">  <span class="hljs-comment">///</span></span><br><span class="line">  <span class="hljs-comment">///  Note: This is not the receiving time limitation.</span></span><br><span class="line">  RECEIVE_TIMEOUT,</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// When the server response, but with a incorrect status, such as 404, 503...</span></span><br><span class="line">  RESPONSE,</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">/// When the request is cancelled, dio will throw a error with this type.</span></span><br><span class="line">  CANCEL</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="使用application-x-www-form-urlencoded编码"><a href="#使用application-x-www-form-urlencoded编码" class="headerlink" title="使用application/x-www-form-urlencoded编码"></a>使用application/x-www-form-urlencoded编码</h2><p>默认情况下, Dio 会将请求数据(除过String类型)序列化为 <code>JSON</code>. 如果想要以 <code>application/x-www-form-urlencoded</code>格式编码, 你可以显式设置<code>contentType</code> :</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">//Instance level</span></span><br><span class="line">dio.options.contentType=ContentType.parse(<span class="hljs-string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line"><span class="hljs-comment">//or works once</span></span><br><span class="line">dio.post(<span class="hljs-string">"/info"</span>,data:&#123;<span class="hljs-string">"id"</span>:<span class="hljs-number">5</span>&#125;, options: <span class="hljs-keyword">new</span> Options(contentType:ContentType.parse(<span class="hljs-string">"application/x-www-form-urlencoded"</span>)));</span><br></pre></td></tr></table></figure>

<p>这里有一个<a href="https://github.com/flutterchina/dio/blob/flutter/example/options.dart" target="_blank" rel="noopener">示例</a>.</p>
<h2 id="FormData"><a href="#FormData" class="headerlink" title="FormData"></a>FormData</h2><p>Dio支持发送 FormData, 请求数据将会以 <code>multipart/form-data</code>方式编码, FormData中可以一个或多个包含文件 .</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FormData formData = <span class="hljs-keyword">new</span> FormData.from(&#123;</span><br><span class="line">    <span class="hljs-string">"name"</span>: <span class="hljs-string">"wendux"</span>,</span><br><span class="line">    <span class="hljs-string">"age"</span>: <span class="hljs-number">25</span>,</span><br><span class="line">    <span class="hljs-string">"file"</span>: <span class="hljs-keyword">new</span> UploadFileInfo(<span class="hljs-keyword">new</span> File(<span class="hljs-string">"./example/upload.txt"</span>), <span class="hljs-string">"upload.txt"</span>)</span><br><span class="line">&#125;);</span><br><span class="line">response = <span class="hljs-keyword">await</span> dio.post(<span class="hljs-string">"/info"</span>, data: formData);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意: 只有 post 方法支持发送 FormData.</p>
</blockquote>
<p>这里有一个完整的<a href="https://github.com/flutterchina/dio/blob/flutter/example/formdata.dart" target="_blank" rel="noopener">示例</a>.</p>
<h2 id="转换器"><a href="#转换器" class="headerlink" title="转换器"></a>转换器</h2><p>转换器<code>Transformer</code> 用于对请求数据和响应数据进行编解码处理。Dio实现了一个默认转换器<code>DefaultTransformer</code>作为默认的 <code>Transformer</code>. 如果你想对请求/响应数据进行自定义编解码处理，可以提供自定义转换器，通过 <code>dio.transformer</code>设置。</p>
<blockquote>
<p>请求转换器  <code>Transformer.transformRequest(...)</code>   只会被用于 ‘PUT’、 ‘POST’、 ‘PATCH’方法，因为只有这些方法才可以携带请求体(request body)。但是响应转换器 <code>Transformer.transformResponse()</code> 会被用于所有请求方法的返回数据。</p>
</blockquote>
<h3 id="执行流"><a href="#执行流" class="headerlink" title="执行流"></a>执行流</h3><p>虽然在拦截器中也可以对数据进行预处理，但是转换器主要职责是对请求/响应数据进行编解码，之所以将转化器单独分离，一是为了和拦截器解耦，二是为了不修改原始请求数据(如果你在拦截器中修改请求数据(options.data)，会覆盖原始请求数据，而在某些时候您可能需要原始请求数据). Dio的请求流是：</p>
<p><em>请求拦截器</em> &gt;&gt; <em>请求转换器</em> &gt;&gt; <em>发起请求</em>  &gt;&gt; <em>响应转换器</em>  &gt;&gt; <em>响应拦截器</em>  &gt;&gt; <em>最终结果</em>。</p>
<p>这是一个自定义转换器的<a href="https://github.com/wendux/dio/blob/flutter/example/Transformer.dart" target="_blank" rel="noopener">示例</a>.</p>
<h2 id="设置Http代理"><a href="#设置Http代理" class="headerlink" title="设置Http代理"></a>设置Http代理</h2><p>Dio 是使用 HttpClient发起的http请求，所以你可以通过配置 <code>httpClient</code>来支持代理，示例如下：</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dio.onHttpClientCreate = (HttpClient client) &#123;</span><br><span class="line">  client.findProxy = (uri) &#123;</span><br><span class="line">    <span class="hljs-comment">//proxy all request to localhost:8888</span></span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">"PROXY localhost:8888"</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="hljs-comment">// 你也可以自己创建一个新的HttpClient实例返回。</span></span><br><span class="line">  <span class="hljs-comment">// return new HttpClient(SecurityContext);</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>完整的示例请查看<a href="https://github.com/wendux/dio/tree/flutter/example/proxy.dart" target="_blank" rel="noopener">这里</a>.</p>
<h2 id="Https证书校验"><a href="#Https证书校验" class="headerlink" title="Https证书校验"></a>Https证书校验</h2><p>有两种方法可以校验https证书，假设我们的后台服务使用的是自签名证书，证书格式是PEM格式，我们将证书的内容保存在本地字符串中，那么我们的校验逻辑如下：</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-built_in">String</span> PEM=<span class="hljs-string">"XXXXX"</span>; <span class="hljs-comment">//证书内容</span></span><br><span class="line">dio.onHttpClientCreate = (HttpClient client) &#123;</span><br><span class="line">  client.badCertificateCallback=(X509Certificate cert, <span class="hljs-built_in">String</span> host, <span class="hljs-built_in">int</span> port)&#123;</span><br><span class="line">    <span class="hljs-keyword">if</span>(cert.pem==PEM)&#123; <span class="hljs-comment">// 证书一致，则放行</span></span><br><span class="line">      <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>X509Certificate</code>是证书的标准格式，包含了证书除私钥外所有信息，读者可以自行查阅文档。另外，上面的示例没有校验host，是因为只要服务器返回的证书内容和本地的保存一致就已经能证明是我们的服务器了（而不是中间人），host验证通常是为了防止证书和域名不匹配。</p>
<p>对于自签名的证书，我们也可以将其添加到本地证书信任链中，这样证书验证时就会自动通过，而不会再走到<code>badCertificateCallback</code>回调中：</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dio.onHttpClientCreate = (HttpClient client) &#123;</span><br><span class="line">  SecurityContext sc = <span class="hljs-keyword">new</span> SecurityContext();</span><br><span class="line">  <span class="hljs-comment">//file为证书路径</span></span><br><span class="line">  sc.setTrustedCertificates(file);</span><br><span class="line">  HttpClient httpClient = <span class="hljs-keyword">new</span> HttpClient(context: sc);</span><br><span class="line">  <span class="hljs-keyword">return</span> httpClient;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>注意，通过<code>setTrustedCertificates()</code>设置的证书格式必须为PEM或PKCS12，如果证书格式为PKCS12，则需将证书密码传入，这样则会在代码中暴露证书密码，所以客户端证书校验不建议使用PKCS12格式的证书。</p>
<h2 id="请求取消"><a href="#请求取消" class="headerlink" title="请求取消"></a>请求取消</h2><p>你可以通过 <em>cancel token</em> 来取消发起的请求：</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CancelToken token = <span class="hljs-keyword">new</span> CancelToken();</span><br><span class="line">dio.<span class="hljs-keyword">get</span>(url, cancelToken: token)</span><br><span class="line">    .catchError((DioError err)&#123;</span><br><span class="line">        <span class="hljs-keyword">if</span> (CancelToken.isCancel(err)) &#123;</span><br><span class="line">            <span class="hljs-built_in">print</span>(<span class="hljs-string">'Request canceled! '</span>+ err.message)</span><br><span class="line">        &#125;<span class="hljs-keyword">else</span>&#123;</span><br><span class="line">            <span class="hljs-comment">// handle error.</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="hljs-comment">// cancel the requests with "cancelled" message.</span></span><br><span class="line">token.cancel(<span class="hljs-string">"cancelled"</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意: 同一个cancel token 可以用于多个请求，当一个cancel token取消时，所有使用该cancel token的请求都会被取消。</p>
</blockquote>
<p>完整的示例请参考<a href="https://github.com/flutterchina/dio/blob/flutter/example/cancelRequest.dart" target="_blank" rel="noopener">取消示例</a>.</p>
<h2 id="Cookie管理"><a href="#Cookie管理" class="headerlink" title="Cookie管理"></a>Cookie管理</h2><p>你可以通过 <code>cookieJar</code> 来自动管理请求/响应cookie.</p>
<blockquote>
<p> dio cookie 管理 API 是基于开源库 <a href="https://github.com/flutterchina/cookie_jar" target="_blank" rel="noopener">cookie_jar</a>.</p>
</blockquote>
<p>你可以创建一个<code>CookieJar</code> 或 <code>PersistCookieJar</code> 来帮您自动管理cookie,  dio 默认使用  <code>CookieJar</code> , 它会将cookie保存在内存中。 如果您想对cookie进行持久化,  请使用 <code>PersistCookieJar</code> ,  示例代码如下:</p>
<figure class="highlight dart hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> dio = <span class="hljs-keyword">new</span> Dio();</span><br><span class="line">dio.cookieJar = <span class="hljs-keyword">new</span> PersistCookieJar(<span class="hljs-string">"./cookies"</span>);</span><br></pre></td></tr></table></figure>

<p><code>PersistCookieJar</code> 实现了RFC中标准的cookie策略.  <code>PersistCookieJar</code> 会将cookie保存在文件中，所以 cookies 会一直存在除非显式调用 <code>delete</code> 删除.</p>
<p>更多关于 <a href="https://github.com/flutterchina/" target="_blank" rel="noopener">cookie_jar</a>  请参考 : <a href="https://github.com/flutterchina/cookie_jar" target="_blank" rel="noopener">https://github.com/flutterchina/cookie_jar</a> .</p>
<h2 id="Copyright-amp-License"><a href="#Copyright-amp-License" class="headerlink" title="Copyright &amp; License"></a>Copyright &amp; License</h2><p>此开源项目为Flutter中文网(<a href="https://flutterchina.club" target="_blank" rel="noopener">https://flutterchina.club</a>) 授权 ，license 是 MIT.   如果您喜欢，欢迎star.</p>
<p><strong>Flutter中文网开源项目计划</strong></p>
<p>开发一系列Flutter SDK之外常用(实用)的Package、插件，丰富Flutter第三方库，为Flutter生态贡献来自中国开发者的力量。所有项目将发布在 <a href="https://github.com/flutterchina/" target="_blank" rel="noopener">Github Flutter中文网 Organization</a> ，所有源码贡献者将加入到我们的Organization，成为成员. 目前社区已有几个开源项目开始公测，欢迎您加入开发或测试，详情请查看: <a href="https://flutterchina.club/opensource.html" target="_blank" rel="noopener">Flutter中文网开源项目</a>。 如果您想加入到“开源项目计划”， 请发邮件到<a href="mailto:824783146@qq.com" target="_blank" rel="noopener">824783146@qq.com</a>， 并附上自我介绍(个人基本信息+擅长/关注技术)。</p>
<h2 id="Features-and-bugs"><a href="#Features-and-bugs" class="headerlink" title="Features and bugs"></a>Features and bugs</h2><p>Please file feature requests and bugs at the <a href="https://github.com/flutterchina/dio" target="_blank" rel="noopener">issue tracker</a>.</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-08T23:56:41.000Z">2019-09-09</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 分钟 读完 (大约 845 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/09/Github的webhooks网站自动化部署/">Github的webhooks网站自动化部署</a>
            
        </h1>
        <div class="content">
            <h1 id="Github的webhooks进行网站自动化部署"><a href="#Github的webhooks进行网站自动化部署" class="headerlink" title="Github的webhooks进行网站自动化部署"></a>Github的webhooks进行网站自动化部署</h1><p><img src="/images/2019/09/09/bb535690-d292-11e9-9a4a-2f1c09bb03b0.png" alt="image.png"></p>
<p>相信很多码农都玩过了Git，如果对Git只是一知半解，可以移步LV写的 GIT常用操作总结，下面介绍到的一些关于 Git 的概念就不再赘述。</p>
<p>为啥想写这篇文章？主要是因为部门服务器因为安全性原因不允许SCP上传文件进行应用部署，然后有一些应用是放在Github上的，然后部署应用的步骤就变成：</p>
<p>1.git clone github项目 本地目录<br>2.配置一下应用的pm2.json并reload<br>3.Nginx配置一下反向代理并restart</p>
<p>当然如果只是一次性部署上去就不再修改的话并没啥问题，但是要是项目持续性修改迭代的话，就比较麻烦了，我们就在不断的重复着上面的步骤。作为一个码农，怎么允许不断的重复同样的工作，于是Github webhooks闪亮登场。</p>
<h1 id="关于Github-webhooks"><a href="#关于Github-webhooks" class="headerlink" title="关于Github webhooks"></a>关于Github webhooks</h1><ul>
<li>必须是Github上面的项目</li>
<li>订阅了确定的事件（包括push/pull等命令）</li>
<li>自动触发</li>
</ul>
<p>刚好符合了这几个条件，那接下来就看看如何进行网站自动化部署，主要会从下面几点来讲解：</p>
<ol>
<li>自动化shell脚本</li>
<li>服务端实现</li>
<li>配置github webhooks</li>
</ol>
<h1 id="自动化脚本"><a href="#自动化脚本" class="headerlink" title="自动化脚本"></a>自动化脚本</h1><p><code>auto_build.sh</code></p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#</span>! /bin/bash</span><br><span class="line">SITE_PATH='/root/nginx/www'</span><br><span class="line">cd $SITE_PATH</span><br><span class="line">git reset --hard origin/master</span><br><span class="line">git clean -f</span><br><span class="line">git pull</span><br><span class="line">git checkout master</span><br></pre></td></tr></table></figure>

<p>Note: 在执行上面shell脚本之前我们必须第一次手动git clone项目进去</p>
<h1 id="服务端实现"><a href="#服务端实现" class="headerlink" title="服务端实现"></a>服务端实现</h1><p>Github webhooks需要跟我们的服务器进行通信，确保是可以推送到我们的服务器，所以会发送一个带有X-Hub-Signature的POST请求，为了方便我们直接用第三方的库github-webhook-handler来接收参数并且做监听事件的处理等工作。</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i github-webhook-handler -S</span><br></pre></td></tr></table></figure>

<p><code>index.js</code></p>
<figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);</span><br><span class="line"><span class="hljs-keyword">var</span> spawn = <span class="hljs-built_in">require</span>(<span class="hljs-string">'child_process'</span>).spawn;</span><br><span class="line"><span class="hljs-keyword">var</span> createHandler = <span class="hljs-built_in">require</span>(<span class="hljs-string">'github-webhook-handler'</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 下面填写的myscrect跟github webhooks配置一样，下一步会说；path是我们访问的路径</span></span><br><span class="line"><span class="hljs-keyword">var</span> handler = createHandler(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">'/auto_build'</span>, <span class="hljs-attr">secret</span>: <span class="hljs-string">''</span> &#125;);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>&#123;</span><br><span class="line">  handler(req, res, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;</span><br><span class="line">    res.statusCode = <span class="hljs-number">404</span>;</span><br><span class="line">    res.end(<span class="hljs-string">'no such location'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;).listen(<span class="hljs-number">6666</span>);</span><br><span class="line"></span><br><span class="line">handler.on(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'Error:'</span>, err.message)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 监听到push事件的时候执行我们的自动化脚本</span></span><br><span class="line">handler.on(<span class="hljs-string">'push'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Received a push event for %s to %s'</span>,</span><br><span class="line">    event.payload.repository.name,</span><br><span class="line">    event.payload.ref);</span><br><span class="line"></span><br><span class="line">  runCommand(<span class="hljs-string">'sh'</span>, [<span class="hljs-string">'auto_build.sh'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> txt </span>)</span>&#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(txt);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">runCommand</span>(<span class="hljs-params"> cmd, args, callback </span>)</span>&#123;</span><br><span class="line">    <span class="hljs-keyword">var</span> child = spawn( cmd, args );</span><br><span class="line">    <span class="hljs-keyword">var</span> response = <span class="hljs-string">''</span>;</span><br><span class="line">    child.stdout.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> buffer </span>)</span>&#123; resp += buffer.toString(); &#125;);</span><br><span class="line">    child.stdout.on(<span class="hljs-string">'end'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123; callback( resp ) &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 由于我们不需要监听issues，所以下面代码注释掉</span></span><br><span class="line"><span class="hljs-comment">//  handler.on('issues', function (event) &#123;</span></span><br><span class="line"><span class="hljs-comment">//    console.log('Received an issue event for %s action=%s: #%d %s',</span></span><br><span class="line"><span class="hljs-comment">//      event.payload.repository.name,</span></span><br><span class="line"><span class="hljs-comment">//      event.payload.action,</span></span><br><span class="line"><span class="hljs-comment">//      event.payload.issue.number,</span></span><br><span class="line"><span class="hljs-comment">//      event.payload.issue.title)</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="配置github-webhooks"><a href="#配置github-webhooks" class="headerlink" title="配置github webhooks"></a>配置github webhooks</h1><p><img src="/images/2019/09/09/3f507120-d294-11e9-9a4a-2f1c09bb03b0.png" alt="image.png"></p>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>上面就是利用Github webhooks进行网站自动化部署的全部内容了，不难发现其实这项技术还是有局限性的，那就是依赖于github，一般我们选择的都是免费github账号，所有项目都对外，一些敏感项目是不适合放置上去的。</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-08T23:20:36.000Z">2019-09-09</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 分钟 读完 (大约 379 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/09/灭霸脚本/">灭霸脚本</a>
            
        </h1>
        <div class="content">
            <h1 id="Thanos-sh"><a href="#Thanos-sh" class="headerlink" title="Thanos.sh"></a>Thanos.sh</h1><p>This command could <del>delete</del> list half your files randomly.</p>
<p>don’t use it at home and other places. this is a real gun, use it wisely… </p>
<p>feel free to post your story on <figure class="highlight plain hljs"><figcaption><span>waiting.</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 灭霸脚本</span><br><span class="line">这个命令会随机“删掉”您一半的文件。。</span><br><span class="line"></span><br><span class="line">请不要在家里或其他地方使用。这是真家伙，要小心…</span><br><span class="line"></span><br><span class="line">你可以在```Story.md```文件里发布你的故事，期待中…</span><br><span class="line"> </span><br><span class="line"> ## 特别说明</span><br><span class="line"> &gt; 1. 支持mac系统，但是需要使用到```gshuf```命令，需要通过```brew```安装,安装命令如下：</span><br><span class="line">```shell</span><br><span class="line">    #安装brew</span><br><span class="line">    /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</span><br><span class="line">    #安装gshuf</span><br><span class="line">    brew install coreutils</span><br><span class="line">`</span><br></pre></td></tr></table></figure></p>
<blockquote>
<ol start="2">
<li>此脚本只会列出当前目录一半的文件。并且。。。总之小心点。。。  </li>
</ol>
</blockquote>
<h2 id="Invoke-Thanos-ps1"><a href="#Invoke-Thanos-ps1" class="headerlink" title="Invoke-Thanos.ps1"></a>Invoke-Thanos.ps1</h2><p>Invokes Thanos to remove each object with probability 1/2. It works with files, registry, environment variables, functions, variables, aliases and certificates.</p>
<p>For help, use <code>Get-Help .\Invoke-Thanos.ps1</code>. Be sure to not actually invoke it!</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash">!/bin/sh</span></span><br><span class="line">let "i=`find . -type f | wc -l`/2";</span><br><span class="line">if [[ uname=="Darwin" ]]; then</span><br><span class="line">    find . -not -name "Thanos.sh" -type f -print0 | gshuf -z -n $i | xargs -0  -- cat;</span><br><span class="line">else</span><br><span class="line">    find . -not -name "Thanos.sh" -type f -print0 | shuf -z -n $i | xargs -0  -- cat;</span><br><span class="line">fi</span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> Explaination</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># Step 1: Get the count of files in current path divided by two.</span></span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># Step 2: Get all the files in current path and print in one line.</span></span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># Step 3: Turn half of the second step output into standard input randomly.</span></span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># Step 4: Show half of the files in terminal.</span></span></span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> Key Point</span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"><span class="hljs-comment"># If you want to make delete, what you need to do is turn 'cat' into 'rm'.</span></span></span><br></pre></td></tr></table></figure>

<p>本人在线上服务器上运行了一次，…</p>
<p><img src="/images/2019/09/09/e0b9df90-d282-11e9-8020-8926e04ad9bb.png" alt="image.png"></p>
<p><img src="/images/2019/09/09/5aa65630-d283-11e9-937d-fb9e8ca7078f.png" alt="image.png"></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-08T13:35:18.000Z">2019-09-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    15 分钟 读完 (大约 2279 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/08/数据库备份恢复容器化项目实践经验总结/">数据库备份恢复容器化项目实践经验总结</a>
            
        </h1>
        <div class="content">
            <h1 id="数据库备份恢复容器化项目实践经验总结"><a href="#数据库备份恢复容器化项目实践经验总结" class="headerlink" title="数据库备份恢复容器化项目实践经验总结"></a>数据库备份恢复容器化项目实践经验总结</h1><blockquote>
<p>本文分享了唯品会数据库Docker的异地容灾项目实践经验，项目中针对用户数据库的异地恢复场景的需求进行开发和测试，整合了网络，存储、调度、监控，镜像等多个模块。在实施完成后，从技术上总结关于选型、开发、踩坑、测试等方面的经验。</p>
</blockquote>
<h1 id="项目背景"><a href="#项目背景" class="headerlink" title="项目背景"></a>项目背景</h1><p>数据库Docker的异地备份恢复容灾项目，针对用户数据库的异地备份恢复场景的需求进行开发和测试，整合了容器网络、存储、调度、监控、镜像等多个模块。同时针对数据库的日常运维工作开发了监控、资源调度、日志、Puppet自动推送等工具。</p>
<p>通过Docker天生隔离性和快速部署等特点，实现在单台物理机上运行多个数据库备份/恢复实例，大大提高服务器使用率，节省大量成本。通过对Docker本身和相关组件的研究和改造，从普通开源产品落地到公司内部生产环境，积累宝贵的开发经验。通过对Docker已经在其上层运行的数据库日常运维和监控，也积累宝贵的Docker运维经验，为更大规模推广容器提供基础。</p>
<p><img src="/images/2019/09/08/9adb4490-d23d-11e9-ad11-3306f19b341f.png" alt="image.png"></p>
<h1 id="关于容器技术"><a href="#关于容器技术" class="headerlink" title="关于容器技术"></a>关于容器技术</h1><p>通过实践，证明容器技术在易用性，可管理性，快速部署具备天然的优势。在资源利用率方面，容器部署在上百个物理节点上，提供约500多个数据库灾备实例，提升了硬件资源的利用率，节约了约400台物理机的采购成本。这些是容器技术带来的实实在在收益。在资源分配与隔离方面，又不输于虚拟机。CPU、内存、磁盘IO、网络IO限流等技术的应用，保证了资源的合理使用，从机制上阻止了单一实例的资源过分消耗的问题。</p>
<p>稳定性是使用容器技术非常关注的一个点，也是基石。MySQL备份/恢复属于CPU密集 + 磁盘IO密集 + 网络IO密集型业务，对于Docker daemon是个较大的考验。就目前来看，限制每台宿主机的容器数量（5个左右）的情况下，集群跑了三个多月没有出现因为容器负载过大导致的crash现象，还是值得信赖的。遇到的唯一相关问题是Docker daemon挂死，具体现象是docker info、docker ps没有响应，docker volume、docker images 正常，下面的容器运行正常。这是偶发事件，无法重现，以后需要继续观察。</p>
<p>由于容器以进程方式存在，体现出几乎与物理机上相当的性能，Overheads极低（低于10%）。从数据抽取任务的结果来看，与物理机相比，使用容器对成功率没有影响，效率也差不多。这也很符合最初预想，不管跑容器还是外部服务从物理机角度来说它们之间是没有什么区别的，都是一个进程，唯一不同是父进程不一样而已。</p>
<p>以上是容器“RUN”带来的好处，通过统一开发流程，应用微服务化，CI/CD等方面的改进，能够进一步利用容器“BUILD”、“SHIP” 优势，容器技术还来的潜力是巨大的。要说容器技术的缺点，还真的不明显。硬要提的话一个是需要一定的学习成本，改变开发流程与方式，一个是开发人员对容器技术的接受程度。这个项目仅用了不到二百人/天，对于一个采用新技术的项目来说，真的是很低的了。一开始我们也担心因为采用新技术导致开发推广有困难，后来实际能通过技术上解决问题，打消了大部分用户对使用Docker的疑虑，反而有助于该技术的普遍应用。</p>
<p>关于Docker daemon版本的选择，我们之前是有过一些讨论的。现在Docker社区非常活跃，当时我们用1.10.3， 到现在已经出了两个新版本了。在功能满足的前提下，稳定性是第一考量。Docker自1.9.0引入CNM网络模型，1.10算是比较成熟。CNM是我们希望在这个项目尝试的一部分。网络与Volume插件功能与稳定性的提升，开始支持磁盘IO读写限速，Device Mapper的支持，等等，都是选择了这个版本的原因。另外，Docker插件的引入，很好地解耦了Docker与底层模块的关系，使我们可以专注于底层（网络、存储）实现而不需要修改Docker daemon本身，同时避免产生升级依赖。</p>
<h1 id="关于容器存储"><a href="#关于容器存储" class="headerlink" title="关于容器存储"></a>关于容器存储</h1><p>容器外部卷使用Convoy，以插件的形式支持容器持久化数据。容器本身与外部卷均使用Device Mapper作为底层。没有选择分布式存储原因，主要是为了简化实现，更稳定。通过限制每个容器的BlkioDeviceReadBps、BlkioDeviceWriteBps、BlkioDeviceReadIOps、BlkioDeviceWriteIOps，使磁盘IO稳定地达到相当于95%物理机性能。</p>
<p><img src="/images/2019/09/08/b8684530-d23d-11e9-ad11-3306f19b341f.png" alt="image.png"></p>
<p>对于Device Mapper，因为是红帽推荐的，而OS又是用的CentOS7.2, 所以就用了它。测试过程中发现Device Mapper健壮性不是很好，仅仅在低并发下，也会出现容器删除失败的情况，容器并发启停偶尔出现找不到设备的情况。这种使用映射关系的设备，功能是丰富，实现上过于复杂，每次对设备的修改都需要额外去更新Metadata，并发场景出错的机会就大了。让我再选的话我会考虑Overlay这种更简单的driver。</p>
<p>对于Convoy，是来自Rancher的产品，Go语言，仍然处于未成熟阶段，版本号0.5, 并没有完全实现Volume Plugin接口。相比其它模块它的问题也是最多的，例如Volume创建失败，无法删除，UNIX Socket泄漏，重名冲突，异常自动退出等。属于能用，但未完善的状态，你自己得有一定开发调试能力去解决发现的问题。其它几个存储插件情况也差不多，Flocker、Blockbridge、Horcrux等等，有的连第一个正式发布版都还没有，Convoy反而相对好点，有点烂柿子堆里挑的感觉。</p>
<h1 id="关于容器监控"><a href="#关于容器监控" class="headerlink" title="关于容器监控"></a>关于容器监控</h1><p>容器监控在这个项目里还可以有很大的空间可以改进。项目里用的是cAdvisor，容器内top、free、iostat命令劫持，基于已有的Zabbix体系作数据收集与展示。结论是Zabbix完全不合适做容器监控，数据收集密度，展示质量，灵活度都没能满足需求。</p>
<p>后来在测试中尝试使用Telegraf + InfluxDB + Grafana。 只需要Grafana简单的配置，能够帮忙我们清晰地展示容器及服务进程CPU、内存、网络、磁盘等情况。Grafana上SQL查询语句的调试与开发，确实需要不少的时间，但这个工作量是一次性的。因为是Go写的，Telegraf CPU占用属于比较低的水平（0.4 – 5%）。功能上比较丰富，同时支持外部进程与容器的数据收集，多达55种数据源插件，有它就不需要布cAdvisor了，个人比较推荐。需要告警的同学，可以考虑把influxDB改成Prometheus。它包含Alertmanager实现Email、PagerDuty等消息通知。数据Backend可以选择自带的DB，也可以外接influxDB、Graphite、OpenTSDB等流行方案。</p>
<p><img src="/images/2019/09/08/cd4a2fe0-d23d-11e9-ad11-3306f19b341f.png" alt="image.png"></p>
<p>监控领域业界已经有很多开源方案可以参考，以下是要衡量的标准：易扩展、开销低、入侵小、大集中、易部署、实时性、展现清晰灵活。这方面希望与各位有更多的交流。</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-08T03:09:19.000Z">2019-09-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 分钟 读完 (大约 753 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/08/Electron-vue/">Electron-vue</a>
            
        </h1>
        <div class="content">
            <p><img src="/images/2019/09/08/2c017600-d1e5-11e9-98b8-15e58d7acd49.png" alt="image.png"></p>
<h1 id="Electron-vue"><a href="#Electron-vue" class="headerlink" title="Electron-vue"></a>Electron-vue</h1><blockquote>
<p>基于 vue (基本上是它听起来的样子) 来构造 electron 应用程序的样板代码。</p>
</blockquote>
<p>什么是electron?</p>
<p><img src="/images/2019/09/08/87493a70-d1e5-11e9-98b8-15e58d7acd49.png" alt="image.png"></p>
<p>electron由Node.js+Chromium+Native APIs构成。你可以理解成，它是一个得到了Node.js和基于不同平台的Native APIs加强的Chromium浏览器，可以用来开发跨平台的桌面级应用。</p>
<p>它的开发主要涉及到两个进程的协作——Main（主）进程和Renderer（渲染）进程。简单的理解两个进程的作用：</p>
<ol>
<li>Main进程主要通过Node.js、Chromium和Native APIs来实现一些系统以及底层的操作，比如创建系统级别的菜单，操作剪贴板，创建APP的窗口等。</li>
<li>Renderer进程主要通过Chromium来实现APP的图形界面——就是平时我们熟悉的前端开发的部分，不过得到了electron给予的加强，一些Node的模块（比如fs）和一些在3. Main进程里能用的东西（比如Clipboard）也能在Render进程里使用。<br>Main进程和Renderer进程通过<code>ipcMain</code>和<code>ipcRenderer</code>来进行通信。通过事件监听和事件派发来实现两个进程通信，从而实现Main或者Renderer进程里不能实现的某些功能。</li>
</ol>
<h1 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h1><p>该样板代码被构建为 vue-cli 的一个模板，并且包含多个选项，可以自定义你最终的脚手架程序。本项目需要使用 node@^7 或更高版本。electron-vue 官方推荐 yarn 作为软件包管理器，因为它可以更好地处理依赖关系，并可以使用 yarn clean 帮助减少最后构建文件的大小。</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#</span> 安装 vue-cli 和 脚手架样板代码</span><br><span class="line">npm install -g vue-cli</span><br><span class="line">vue init simulatedgreg/electron-vue my-project</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">#</span> 安装依赖并运行你的程序</span><br><span class="line">cd my-project</span><br><span class="line">yarn # 或者 npm install</span><br><span class="line">yarn run dev # 或者 npm run dev</span><br></pre></td></tr></table></figure>

<h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">my-project</span><br><span class="line">├─ .electron-vue</span><br><span class="line">│  └─ &lt;build/development&gt;.js files</span><br><span class="line">├─ build</span><br><span class="line">│  └─ icons/</span><br><span class="line">├─ dist</span><br><span class="line">│  ├─ electron/</span><br><span class="line">│  └─ web/</span><br><span class="line">├─ node_modules/</span><br><span class="line">├─ src</span><br><span class="line">│  ├─ main</span><br><span class="line">│  │  ├─ index.dev.js</span><br><span class="line">│  │  └─ index.js</span><br><span class="line">│  ├─ renderer</span><br><span class="line">│  │  ├─ components/</span><br><span class="line">│  │  ├─ router/</span><br><span class="line">│  │  ├─ store/</span><br><span class="line">│  │  ├─ App.vue</span><br><span class="line">│  │  └─ main.js</span><br><span class="line">│  └─ index.ejs</span><br><span class="line">├─ static/</span><br><span class="line">├─ test</span><br><span class="line">│  ├─ e2e</span><br><span class="line">│  │  ├─ specs/</span><br><span class="line">│  │  ├─ index.js</span><br><span class="line">│  │  └─ utils.js</span><br><span class="line">│  ├─ unit</span><br><span class="line">│  │  ├─ specs/</span><br><span class="line">│  │  ├─ index.js</span><br><span class="line">│  │  └─ karma.config.js</span><br><span class="line">│  └─ .eslintrc</span><br><span class="line">├─ .babelrc</span><br><span class="line">├─ .eslintignore</span><br><span class="line">├─ .eslintrc.js</span><br><span class="line">├─ .gitignore</span><br><span class="line">├─ package.json</span><br><span class="line">└─ README.md</span><br></pre></td></tr></table></figure>

<h1 id="产品构建"><a href="#产品构建" class="headerlink" title="产品构建"></a>产品构建</h1><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.asar</span><br><span class="line">├─ dist</span><br><span class="line">│  └─ electron</span><br><span class="line">│     ├─ static/</span><br><span class="line">│     ├─ index.html</span><br><span class="line">│     ├─ main.js</span><br><span class="line">│     └─ renderer.js</span><br><span class="line">├─ node_modules/</span><br><span class="line">└─ package.json</span><br></pre></td></tr></table></figure>

<h1 id="运行效果"><a href="#运行效果" class="headerlink" title="运行效果"></a>运行效果</h1><p><img src="/images/2019/09/08/092650a0-d1e6-11e9-98b8-15e58d7acd49.png" alt="image.png"></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-08T02:51:27.000Z">2019-09-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 小时 读完 (大约 14878 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/08/Airbnb-JavaScript-代码规范/">Airbnb JavaScript 代码规范() {</a>
            
        </h1>
        <div class="content">
            <h1 id="Airbnb-JavaScript-代码规范"><a href="#Airbnb-JavaScript-代码规范" class="headerlink" title="Airbnb JavaScript 代码规范() {"></a>Airbnb JavaScript 代码规范() {</h1><p><em>一种写JavaScript更合理的代码风格。</em></p>
<blockquote>
<p><strong>Note</strong>: 本指南假设你使用了 <a href="https://babeljs.io" target="_blank" rel="noopener">Babel</a>, 并且要求你使用 <a href="https://npmjs.com/babel-preset-airbnb" target="_blank" rel="noopener">babel-preset-airbnb</a> 或者其他同等资源。 并且假设你在你的应用中安装了 shims/polyfills ，使用<a href="https://npmjs.com/airbnb-browser-shims" target="_blank" rel="noopener">airbnb-browser-shims</a> 或者相同功能。</p>
</blockquote>
<p><a href="https://www.npmjs.com/package/eslint-config-airbnb" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/dm/eslint-config-airbnb.svg" alt="Downloads"></a><br><a href="https://www.npmjs.com/package/eslint-config-airbnb-base" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/dm/eslint-config-airbnb-base.svg" alt="Downloads"></a><br><a href="https://gitter.im/airbnb/javascript?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge" target="_blank" rel="noopener"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Gitter"></a></p>
<!-- 本指南也提供了其他语言的版本。 查看 [翻译](#translation) -->

<p>其他代码风格指南</p>
<ul>
<li><a href="https://github.com/airbnb/javascript/tree/es5-deprecated/es5" target="_blank" rel="noopener">ES5 (Deprecated)</a></li>
<li><a href="react/">React</a></li>
<li><a href="css-in-javascript/">CSS-in-JavaScript</a></li>
<li><a href="https://github.com/airbnb/css" target="_blank" rel="noopener">CSS &amp; Sass</a></li>
<li><a href="https://github.com/airbnb/ruby" target="_blank" rel="noopener">Ruby</a></li>
</ul>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a><a id="table-of-contents">目录</a></h2><ol>
<li><a href="#types">类型</a></li>
<li><a href="#references">引用</a></li>
<li><a href="#objects">对象</a></li>
<li><a href="#arrays">数组</a></li>
<li><a href="#destructuring">解构</a></li>
<li><a href="#strings">字符</a></li>
<li><a href="#functions">方法</a></li>
<li><a href="#arrow-functions">箭头函数</a></li>
<li><a href="#classes--constructors">类和构造器</a></li>
<li><a href="#modules">模块</a></li>
<li><a href="#iterators-and-generators">迭代器和发生器</a></li>
<li><a href="#properties">属性</a></li>
<li><a href="#variables">变量</a></li>
<li><a href="#hoisting">提升</a></li>
<li><a href="#comparison-operators--equality">比较运算符和等号</a></li>
<li><a href="#blocks">块</a></li>
<li><a href="#control-statements">控制语句</a></li>
<li><a href="#comments">注释</a></li>
<li><a href="#whitespace">空白</a></li>
<li><a href="#commas">逗号</a></li>
<li><a href="#semicolons">分号</a></li>
<li><a href="#type-casting--coercion">类型转换和强制类型转换</a></li>
<li><a href="#naming-conventions">命名规范</a></li>
<li><a href="#accessors">存取器</a></li>
<li><a href="#events">事件</a></li>
<li><a href="#jquery">jQuery</a></li>
<li><a href="#ecmascript-5-compatibility">ECMAScript 5 兼容性</a></li>
<li><a href="#ecmascript-6-es-2015-styles">ECMAScript 6+ (ES 2015+) 风格</a></li>
<li><a href="#standard-library">标准库</a></li>
<li><a href="#testing">测试</a></li>
<li><a href="#performance">性能</a></li>
<li><a href="#resources">资源</a></li>
<li><a href="#the-javascript-style-guide-guide">JavaScript风格指南的指南</a></li>
<li><a href="#license">许可证</a></li>
<li><a href="#amendments">修正案</a></li>
</ol>
<h2 id="类型"><a href="#类型" class="headerlink" title="类型"></a><a id="types">类型</a></h2><p>  <a name="types--primitives"></a><a name="1.1"></a></p>
<ul>
<li><p><a href="#types--primitives">1.1</a> <strong>原始值</strong>: 当你访问一个原始类型的时候，你可以直接使用它的值。</p>
<ul>
<li><code>string</code></li>
<li><code>number</code></li>
<li><code>boolean</code></li>
<li><code>null</code></li>
<li><code>undefined</code></li>
<li><code>symbol</code></li>
</ul>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> foo = <span class="hljs-number">1</span>;</span><br><span class="line"><span class="hljs-keyword">let</span> bar = foo;</span><br><span class="line"></span><br><span class="line">bar = <span class="hljs-number">9</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">console</span>.log(foo, bar); <span class="hljs-comment">// =&gt; 1, 9</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Symbols cannot be faithfully polyfilled, so they should not be used when targeting browsers/environments that don’t support them natively.</li>
</ul>
<p><a name="types--complex"></a><a name="1.2"></a></p>
</li>
<li><p><a href="#types--complex">1.2</a>  <strong>复杂类型</strong>: 当你访问一个复杂类型的时候，你需要一个值得引用。</p>
<ul>
<li><code>object</code></li>
<li><code>array</code></li>
<li><code>function</code></li>
</ul>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> foo = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];</span><br><span class="line"><span class="hljs-keyword">const</span> bar = foo;</span><br><span class="line"></span><br><span class="line">bar[<span class="hljs-number">0</span>] = <span class="hljs-number">9</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">console</span>.log(foo[<span class="hljs-number">0</span>], bar[<span class="hljs-number">0</span>]); <span class="hljs-comment">// =&gt; 9, 9</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a><a id="references">引用</a></h2><p>  <a name="references--prefer-const"></a><a name="2.1"></a></p>
<ul>
<li><p><a href="#references--prefer-const">2.1</a> 使用 <code>const</code> 定义你的所有引用；避免使用 <code>var</code>。 eslint: <a href="https://eslint.org/docs/rules/prefer-const.html" target="_blank" rel="noopener"><code>prefer-const</code></a>, <a href="https://eslint.org/docs/rules/no-const-assign.html" target="_blank" rel="noopener"><code>no-const-assign</code></a></p>
<blockquote>
<p>为什么? 这样能够确保你不能从新分配你的引用，否则可能导致错误或者产生难以理解的代码。.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>;</span><br><span class="line"><span class="hljs-keyword">var</span> b = <span class="hljs-number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> a = <span class="hljs-number">1</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> b = <span class="hljs-number">2</span>;</span><br></pre></td></tr></table></figure>

<p><a name="references--disallow-var"></a><a name="2.2"></a></p>
</li>
<li><p><a href="#references--disallow-var">2.2</a> 如果你必须重新分配你的引用， 使用 <code>let</code> 代替 <code>var</code>。 eslint: <a href="https://eslint.org/docs/rules/no-var.html" target="_blank" rel="noopener"><code>no-var</code></a></p>
<blockquote>
<p>为什么? <code>let</code> 是块级作用域，而不像 <code>var</code> 是函数作用域.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">var</span> count = <span class="hljs-number">1</span>;</span><br><span class="line"><span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) &#123;</span><br><span class="line">  count += <span class="hljs-number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good, use the let.</span></span><br><span class="line"><span class="hljs-keyword">let</span> count = <span class="hljs-number">1</span>;</span><br><span class="line"><span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) &#123;</span><br><span class="line">  count += <span class="hljs-number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="references--block-scope"></a><a name="2.3"></a></p>
</li>
<li><p><a href="#references--block-scope">2.3</a> 注意，let 和 const 都是块级范围的。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// const 和 let 只存在于他们定义的块中。</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="hljs-keyword">let</span> a = <span class="hljs-number">1</span>;</span><br><span class="line">  <span class="hljs-keyword">const</span> b = <span class="hljs-number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-built_in">console</span>.log(a); <span class="hljs-comment">// ReferenceError</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(b); <span class="hljs-comment">// ReferenceError</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a><a id="object">对象</a></h2><p>  <a name="objects--no-new"></a><a name="3.1"></a></p>
<ul>
<li><p><a href="#objects--no-new">3.1</a> 使用字面语法来创建对象。 eslint: <a href="https://eslint.org/docs/rules/no-new-object.html" target="_blank" rel="noopener"><code>no-new-object</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> item = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> item = &#123;&#125;;</span><br></pre></td></tr></table></figure>

<p><a name="es6-computed-properties"></a><a name="3.4"></a></p>
</li>
<li><p><a href="#es6-computed-properties">3.2</a> 在创建具有动态属性名称的对象时使用计算属性名。</p>
<blockquote>
<p>为什么? 它允许你在一个地方定义对象的所有属性。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getKey</span>(<span class="hljs-params">k</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-string">`a key named <span class="hljs-subst">$&#123;k&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> obj = &#123;</span><br><span class="line">  id: <span class="hljs-number">5</span>,</span><br><span class="line">  name: <span class="hljs-string">'San Francisco'</span>,</span><br><span class="line">&#125;;</span><br><span class="line">obj[getKey(<span class="hljs-string">'enabled'</span>)] = <span class="hljs-literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> obj = &#123;</span><br><span class="line">  id: <span class="hljs-number">5</span>,</span><br><span class="line">  name: <span class="hljs-string">'San Francisco'</span>,</span><br><span class="line">  [getKey(<span class="hljs-string">'enabled'</span>)]: <span class="hljs-literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a name="es6-object-shorthand"></a><a name="3.5"></a></p>
</li>
<li><p><a href="#es6-object-shorthand">3.3</a> 使用对象方法的缩写。 eslint: <a href="https://eslint.org/docs/rules/object-shorthand.html" target="_blank" rel="noopener"><code>object-shorthand</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> atom = &#123;</span><br><span class="line">  value: <span class="hljs-number">1</span>,</span><br><span class="line"></span><br><span class="line">  addValue: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> atom.value + value;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> atom = &#123;</span><br><span class="line">  value: <span class="hljs-number">1</span>,</span><br><span class="line"></span><br><span class="line">  addValue(value) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> atom.value + value;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a name="es6-object-concise"></a><a name="3.6"></a></p>
</li>
<li><p><a href="#es6-object-concise">3.4</a> 使用属性值的缩写。 eslint: <a href="https://eslint.org/docs/rules/object-shorthand.html" target="_blank" rel="noopener"><code>object-shorthand</code></a></p>
<blockquote>
<p>为什么? 它的写法和描述较短。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> lukeSkywalker = <span class="hljs-string">'Luke Skywalker'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> obj = &#123;</span><br><span class="line">  lukeSkywalker: lukeSkywalker,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> obj = &#123;</span><br><span class="line">  lukeSkywalker,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a name="objects--grouped-shorthand"></a><a name="3.7"></a></p>
</li>
<li><p><a href="#objects--grouped-shorthand">3.5</a> 在对象声明的时候将简写的属性进行分组。</p>
<blockquote>
<p>为什么? 这样更容易的判断哪些属性使用的简写。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> anakinSkywalker = <span class="hljs-string">'Anakin Skywalker'</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> lukeSkywalker = <span class="hljs-string">'Luke Skywalker'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> obj = &#123;</span><br><span class="line">  episodeOne: <span class="hljs-number">1</span>,</span><br><span class="line">  twoJediWalkIntoACantina: <span class="hljs-number">2</span>,</span><br><span class="line">  lukeSkywalker,</span><br><span class="line">  episodeThree: <span class="hljs-number">3</span>,</span><br><span class="line">  mayTheFourth: <span class="hljs-number">4</span>,</span><br><span class="line">  anakinSkywalker,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> obj = &#123;</span><br><span class="line">  lukeSkywalker,</span><br><span class="line">  anakinSkywalker,</span><br><span class="line">  episodeOne: <span class="hljs-number">1</span>,</span><br><span class="line">  twoJediWalkIntoACantina: <span class="hljs-number">2</span>,</span><br><span class="line">  episodeThree: <span class="hljs-number">3</span>,</span><br><span class="line">  mayTheFourth: <span class="hljs-number">4</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a name="objects--quoted-props"></a><a name="3.8"></a></p>
</li>
<li><p><a href="#objects--quoted-props">3.6</a> 只使用引号标注无效标识符的属性。 eslint: <a href="https://eslint.org/docs/rules/quote-props.html" target="_blank" rel="noopener"><code>quote-props</code></a></p>
<blockquote>
<p>为什么? 总的来说，我们认为这样更容易阅读。 它提升了语法高亮显示，并且更容易通过许多 JS 引擎优化。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> bad = &#123;</span><br><span class="line">  <span class="hljs-string">'foo'</span>: <span class="hljs-number">3</span>,</span><br><span class="line">  <span class="hljs-string">'bar'</span>: <span class="hljs-number">4</span>,</span><br><span class="line">  <span class="hljs-string">'data-blah'</span>: <span class="hljs-number">5</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> good = &#123;</span><br><span class="line">  foo: <span class="hljs-number">3</span>,</span><br><span class="line">  bar: <span class="hljs-number">4</span>,</span><br><span class="line">  <span class="hljs-string">'data-blah'</span>: <span class="hljs-number">5</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a name="objects--prototype-builtins"></a></p>
</li>
<li><p><a href="#objects--prototype-builtins">3.7</a> 不能直接调用 <code>Object.prototype</code> 的方法，如： <code>hasOwnProperty</code> 、 <code>propertyIsEnumerable</code> 和 <code>isPrototypeOf</code>。</p>
<blockquote>
<p>为什么? 这些方法可能被一下问题对象的属性追踪 - 相应的有 <code>{ hasOwnProperty: false }</code> - 或者，对象是一个空对象 (<code>Object.create(null)</code>)。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(object.hasOwnProperty(key));</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(object, key));</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// best</span></span><br><span class="line"><span class="hljs-keyword">const</span> has = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty; <span class="hljs-comment">// 在模块范围内的缓存中查找一次</span></span><br><span class="line"><span class="hljs-comment">/* or */</span></span><br><span class="line"><span class="hljs-keyword">import</span> has <span class="hljs-keyword">from</span> <span class="hljs-string">'has'</span>; <span class="hljs-comment">// https://www.npmjs.com/package/has</span></span><br><span class="line"><span class="hljs-comment">// ...</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(has.call(object, key));</span><br></pre></td></tr></table></figure>

<p><a name="objects--rest-spread"></a></p>
</li>
<li><p><a href="#objects--rest-spread">3.8</a> 更喜欢对象扩展操作符，而不是用 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" target="_blank" rel="noopener"><code>Object.assign</code></a> 浅拷贝一个对象。 使用对象的 rest 操作符来获得一个具有某些属性的新对象。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// very bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> original = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125;;</span><br><span class="line"><span class="hljs-keyword">const</span> copy = <span class="hljs-built_in">Object</span>.assign(original, &#123; <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125;); <span class="hljs-comment">// 变异的 `original` ಠ_ಠ</span></span><br><span class="line"><span class="hljs-keyword">delete</span> copy.a; <span class="hljs-comment">// 这....</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> original = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125;;</span><br><span class="line"><span class="hljs-keyword">const</span> copy = <span class="hljs-built_in">Object</span>.assign(&#123;&#125;, original, &#123; <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125;); <span class="hljs-comment">// copy =&gt; &#123; a: 1, b: 2, c: 3 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> original = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125;;</span><br><span class="line"><span class="hljs-keyword">const</span> copy = &#123; ...original, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125;; <span class="hljs-comment">// copy =&gt; &#123; a: 1, b: 2, c: 3 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> &#123; a, ...noA &#125; = copy; <span class="hljs-comment">// noA =&gt; &#123; b: 2, c: 3 &#125;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a><a id="arrays">数组</a></h2><p>  <a name="arrays--literals"></a><a name="4.1"></a></p>
<ul>
<li><p><a href="#arrays--literals">4.1</a> 使用字面语法创建数组。 eslint: <a href="https://eslint.org/docs/rules/no-array-constructor.html" target="_blank" rel="noopener"><code>no-array-constructor</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> items = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> items = [];</span><br></pre></td></tr></table></figure>

<p><a name="arrays--push"></a><a name="4.2"></a></p>
</li>
<li><p><a href="#arrays--push">4.2</a> 使用 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/push" target="_blank" rel="noopener">Array#push</a> 取代直接赋值来给数组添加项。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> someStack = [];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">someStack[someStack.length] = <span class="hljs-string">'abracadabra'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">someStack.push(<span class="hljs-string">'abracadabra'</span>);</span><br></pre></td></tr></table></figure>

<p><a name="es6-array-spreads"></a><a name="4.3"></a></p>
</li>
<li><p><a href="#es6-array-spreads">4.3</a> 使用数组展开方法 <code>...</code> 来拷贝数组。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> len = items.length;</span><br><span class="line"><span class="hljs-keyword">const</span> itemsCopy = [];</span><br><span class="line"><span class="hljs-keyword">let</span> i;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; i += <span class="hljs-number">1</span>) &#123;</span><br><span class="line">  itemsCopy[i] = items[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> itemsCopy = [...items];</span><br></pre></td></tr></table></figure>

<p><a name="arrays--from"></a><a name="4.4"></a></p>
</li>
<li><p><a href="#arrays--from">4.4</a> 将一个类数组对象转换成一个数组， 使用展开方法 <code>...</code> 代替 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from" target="_blank" rel="noopener"><code>Array.from</code></a>。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> foo = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'.foo'</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> nodes = <span class="hljs-built_in">Array</span>.from(foo);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// best</span></span><br><span class="line"><span class="hljs-keyword">const</span> nodes = [...foo];</span><br></pre></td></tr></table></figure>

<p><a name="arrays--mapping"></a></p>
</li>
<li><p><a href="#arrays--mapping">4.5</a> 对于对迭代器的映射，使用 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from" target="_blank" rel="noopener">Array.from</a> 替代展开方法 <code>...</code> ， 因为它避免了创建中间数组。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> baz = [...foo].map(bar);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> baz = <span class="hljs-built_in">Array</span>.from(foo, bar);</span><br></pre></td></tr></table></figure>

<p><a name="arrays--callback-return"></a><a name="4.5"></a></p>
</li>
<li><p><a href="#arrays--callback-return">4.6</a> 在数组回调方法中使用 return 语句。 如果函数体由一个返回无副作用的表达式的单个语句组成，那么可以省略返回值， 具体查看 <a href="#arrows--implicit-return">8.2</a>。 eslint: <a href="https://eslint.org/docs/rules/array-callback-return" target="_blank" rel="noopener"><code>array-callback-return</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function">(<span class="hljs-params">x</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> y = x + <span class="hljs-number">1</span>;</span><br><span class="line">  <span class="hljs-keyword">return</span> x * y;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x + <span class="hljs-number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad - 没有返回值，意味着在第一次迭代后 `acc` 没有被定义</span></span><br><span class="line">[[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]].reduce(<span class="hljs-function">(<span class="hljs-params">acc, item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> flatten = acc.concat(item);</span><br><span class="line">  acc[index] = flatten;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">[[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]].reduce(<span class="hljs-function">(<span class="hljs-params">acc, item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> flatten = acc.concat(item);</span><br><span class="line">  acc[index] = flatten;</span><br><span class="line">  <span class="hljs-keyword">return</span> flatten;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">inbox.filter(<span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> &#123; subject, author &#125; = msg;</span><br><span class="line">  <span class="hljs-keyword">if</span> (subject === <span class="hljs-string">'Mockingbird'</span>) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> author === <span class="hljs-string">'Harper Lee'</span>;</span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">inbox.filter(<span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> &#123; subject, author &#125; = msg;</span><br><span class="line">  <span class="hljs-keyword">if</span> (subject === <span class="hljs-string">'Mockingbird'</span>) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> author === <span class="hljs-string">'Harper Lee'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a name="arrays--bracket-newline"></a></p>
</li>
<li><p><a href="#arrays--bracket-newline">4.7</a> 如果数组有多行，则在开始的时候换行，然后在结束的时候换行。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> arr = [</span><br><span class="line">  [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> objectInArray = [&#123;</span><br><span class="line">  id: <span class="hljs-number">1</span>,</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  id: <span class="hljs-number">2</span>,</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> numberInArray = [</span><br><span class="line">  <span class="hljs-number">1</span>, <span class="hljs-number">2</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> arr = [[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]];</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> objectInArray = [</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="hljs-number">1</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="hljs-number">2</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> numberInArray = [</span><br><span class="line">  <span class="hljs-number">1</span>,</span><br><span class="line">  <span class="hljs-number">2</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="解构"><a href="#解构" class="headerlink" title="解构"></a><a id="destructuring">解构</a></h2><p>  <a name="destructuring--object"></a><a name="5.1"></a></p>
<ul>
<li><p><a href="#destructuring--object">5.1</a> 在访问和使用对象的多个属性的时候使用对象的解构。 eslint: <a href="https://eslint.org/docs/rules/prefer-destructuring" target="_blank" rel="noopener"><code>prefer-destructuring</code></a></p>
<blockquote>
<p>为什么? 解构可以避免为这些属性创建临时引用。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFullName</span>(<span class="hljs-params">user</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> firstName = user.firstName;</span><br><span class="line">  <span class="hljs-keyword">const</span> lastName = user.lastName;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;firstName&#125;</span> <span class="hljs-subst">$&#123;lastName&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFullName</span>(<span class="hljs-params">user</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> &#123; firstName, lastName &#125; = user;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;firstName&#125;</span> <span class="hljs-subst">$&#123;lastName&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// best</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFullName</span>(<span class="hljs-params">&#123; firstName, lastName &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;firstName&#125;</span> <span class="hljs-subst">$&#123;lastName&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="destructuring--array"></a><a name="5.2"></a></p>
</li>
<li><p><a href="#destructuring--array">5.2</a> 使用数组解构。 eslint: <a href="https://eslint.org/docs/rules/prefer-destructuring" target="_blank" rel="noopener"><code>prefer-destructuring</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> first = arr[<span class="hljs-number">0</span>];</span><br><span class="line"><span class="hljs-keyword">const</span> second = arr[<span class="hljs-number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> [first, second] = arr;</span><br></pre></td></tr></table></figure>

<p><a name="destructuring--object-over-array"></a><a name="5.3"></a></p>
</li>
<li><p><a href="#destructuring--object-over-array">5.3</a> 对于多个返回值使用对象解构，而不是数组解构。</p>
<blockquote>
<p>为什么? 你可以随时添加新的属性或者改变属性的顺序，而不用修改调用方。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processInput</span>(<span class="hljs-params">input</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// 处理代码...</span></span><br><span class="line">  <span class="hljs-keyword">return</span> [left, right, top, bottom];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 调用者需要考虑返回数据的顺序。</span></span><br><span class="line"><span class="hljs-keyword">const</span> [left, __, top] = processInput(input);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processInput</span>(<span class="hljs-params">input</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// 处理代码...</span></span><br><span class="line">  <span class="hljs-keyword">return</span> &#123; left, right, top, bottom &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 调用者只选择他们需要的数据。</span></span><br><span class="line"><span class="hljs-keyword">const</span> &#123; left, top &#125; = processInput(input);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="字符"><a href="#字符" class="headerlink" title="字符"></a><a id="strings">字符</a></h2><p>  <a name="strings--quotes"></a><a name="6.1"></a></p>
<ul>
<li><p><a href="#strings--quotes">6.1</a> 使用单引号 <code>&#39;&#39;</code> 定义字符串。 eslint: <a href="https://eslint.org/docs/rules/quotes.html" target="_blank" rel="noopener"><code>quotes</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> name = <span class="hljs-string">"Capt. Janeway"</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad - 模板文字应该包含插值或换行。</span></span><br><span class="line"><span class="hljs-keyword">const</span> name = <span class="hljs-string">`Capt. Janeway`</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> name = <span class="hljs-string">'Capt. Janeway'</span>;</span><br></pre></td></tr></table></figure>

<p><a name="strings--line-length"></a><a name="6.2"></a></p>
</li>
<li><p><a href="#strings--line-length">6.2</a> 使行超过100个字符的字符串不应使用字符串连接跨多行写入。</p>
<blockquote>
<p>为什么? 断开的字符串更加难以工作，并且使代码搜索更加困难。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> errorMessage = <span class="hljs-string">'This is a super long error that was thrown because \</span></span><br><span class="line"><span class="hljs-string">of Batman. When you stop to think about how Batman had anything to do \</span></span><br><span class="line"><span class="hljs-string">with this, you would get nowhere \</span></span><br><span class="line"><span class="hljs-string">fast.'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> errorMessage = <span class="hljs-string">'This is a super long error that was thrown because '</span> +</span><br><span class="line">  <span class="hljs-string">'of Batman. When you stop to think about how Batman had anything to do '</span> +</span><br><span class="line">  <span class="hljs-string">'with this, you would get nowhere fast.'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> errorMessage = <span class="hljs-string">'This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.'</span>;</span><br></pre></td></tr></table></figure>

<p><a name="es6-template-literals"></a><a name="6.4"></a></p>
</li>
<li><p><a href="#es6-template-literals">6.3</a> 当以编程模式构建字符串时，使用字符串模板代替字符串拼接。 eslint: <a href="https://eslint.org/docs/rules/prefer-template.html" target="_blank" rel="noopener"><code>prefer-template</code></a> <a href="https://eslint.org/docs/rules/template-curly-spacing" target="_blank" rel="noopener"><code>template-curly-spacing</code></a></p>
<blockquote>
<p>为什么? 字符串模板为您提供了一种可读的、简洁的语法，具有正确的换行和字符串插值特性。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sayHi</span>(<span class="hljs-params">name</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-string">'How are you, '</span> + name + <span class="hljs-string">'?'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sayHi</span>(<span class="hljs-params">name</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> [<span class="hljs-string">'How are you, '</span>, name, <span class="hljs-string">'?'</span>].join();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sayHi</span>(<span class="hljs-params">name</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-string">`How are you, <span class="hljs-subst">$&#123; name &#125;</span>?`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sayHi</span>(<span class="hljs-params">name</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-string">`How are you, <span class="hljs-subst">$&#123;name&#125;</span>?`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="strings--eval"></a><a name="6.5"></a></p>
</li>
<li><p><a href="#strings--eval">6.4</a> 不要在字符串上使用 <code>eval()</code> ，它打开了太多漏洞。 eslint: <a href="https://eslint.org/docs/rules/no-eval" target="_blank" rel="noopener"><code>no-eval</code></a></p>
<p><a name="strings--escaping"></a></p>
</li>
<li><p><a href="#strings--escaping">6.5</a> 不要转义字符串中不必要的字符。 eslint: <a href="https://eslint.org/docs/rules/no-useless-escape" target="_blank" rel="noopener"><code>no-useless-escape</code></a></p>
<blockquote>
<p>为什么? 反斜杠损害了可读性，因此只有在必要的时候才会出现。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = <span class="hljs-string">'\'this\' \i\s \"quoted\"'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = <span class="hljs-string">'\'this\' is "quoted"'</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> foo = <span class="hljs-string">`my name is '<span class="hljs-subst">$&#123;name&#125;</span>'`</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a><a id="functions">方法</a></h2><p>  <a name="functions--declarations"></a><a name="7.1"></a></p>
<ul>
<li><p><a href="#functions--declarations">7.1</a> 使用命名的函数表达式代替函数声明。 eslint: <a href="https://eslint.org/docs/rules/func-style" target="_blank" rel="noopener"><code>func-style</code></a></p>
<blockquote>
<p>为什么? 函数声明是挂起的，这意味着在它在文件中定义之前，很容易引用函数。这会损害可读性和可维护性。如果您发现函数的定义是大的或复杂的，以至于它干扰了对文件的其余部分的理解，那么也许是时候将它提取到它自己的模块中了!不要忘记显式地命名这个表达式，不管它的名称是否从包含变量(在现代浏览器中经常是这样，或者在使用诸如Babel之类的编译器时)。这消除了对错误的调用堆栈的任何假设。 (<a href="https://github.com/airbnb/javascript/issues/794" target="_blank" rel="noopener">Discussion</a>)</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-comment">// 从变量引用调用中区分的词汇名称</span></span><br><span class="line"><span class="hljs-keyword">const</span> short = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">longUniqueMoreDescriptiveLexicalFoo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a name="functions--iife"></a><a name="7.2"></a></p>
</li>
<li><p><a href="#functions--iife">7.2</a> Wrap立即调用函数表达式。 eslint: <a href="https://eslint.org/docs/rules/wrap-iife.html" target="_blank" rel="noopener"><code>wrap-iife</code></a></p>
<blockquote>
<p>为什么? 立即调用的函数表达式是单个单元 - 包装， 并且拥有括号调用, 在括号内, 清晰的表达式。 请注意，在一个到处都是模块的世界中，您几乎不需要一个 IIFE 。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// immediately-invoked function expression (IIFE) 立即调用的函数表达式</span></span><br><span class="line">(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Welcome to the Internet. Please follow me.'</span>);</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>

<p><a name="functions--in-blocks"></a><a name="7.3"></a></p>
</li>
<li><p><a href="#functions--in-blocks">7.3</a> 切记不要在非功能块中声明函数 (<code>if</code>, <code>while</code>, 等)。 将函数赋值给变量。 浏览器允许你这样做，但是他们都有不同的解释，这是个坏消息。 eslint: <a href="https://eslint.org/docs/rules/no-loop-func.html" target="_blank" rel="noopener"><code>no-loop-func</code></a></p>
<p><a name="functions--note-on-blocks"></a><a name="7.4"></a></p>
</li>
<li><p><a href="#functions--note-on-blocks">7.4</a> <strong>注意:</strong> ECMA-262 将 <code>block</code> 定义为语句列表。 函数声明不是语句。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> (currentUser) &#123;</span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Nope.'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">let</span> test;</span><br><span class="line"><span class="hljs-keyword">if</span> (currentUser) &#123;</span><br><span class="line">  test = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Yup.'</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="functions--arguments-shadow"></a><a name="7.5"></a></p>
</li>
<li><p><a href="#functions--arguments-shadow">7.5</a> 永远不要定义一个参数为 <code>arguments</code>。 这将会优先于每个函数给定范围的 <code>arguments</code> 对象。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">name, options, arguments</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">name, options, args</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="es6-rest"></a><a name="7.6"></a></p>
</li>
<li><p><a href="#es6-rest">7.6</a> 不要使用 <code>arguments</code>, 选择使用 rest 语法 <code>...</code> 代替。 eslint: <a href="https://eslint.org/docs/rules/prefer-rest-params" target="_blank" rel="noopener"><code>prefer-rest-params</code></a></p>
<blockquote>
<p>为什么? <code>...</code> 明确了你想要拉取什么参数。 更甚, rest 参数是一个真正的数组，而不仅仅是类数组的 <code>arguments</code> 。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">concatenateAll</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);</span><br><span class="line">  <span class="hljs-keyword">return</span> args.join(<span class="hljs-string">''</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">concatenateAll</span>(<span class="hljs-params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> args.join(<span class="hljs-string">''</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="es6-default-parameters"></a><a name="7.7"></a></p>
</li>
<li><p><a href="#es6-default-parameters">7.7</a> 使用默认的参数语法，而不是改变函数参数。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// really bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleThings</span>(<span class="hljs-params">opts</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// No! We shouldn’t mutate function arguments.</span></span><br><span class="line">  <span class="hljs-comment">// Double bad: if opts is falsy it'll be set to an object which may</span></span><br><span class="line">  <span class="hljs-comment">// be what you want but it can introduce subtle bugs.</span></span><br><span class="line">  opts = opts || &#123;&#125;;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// still bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleThings</span>(<span class="hljs-params">opts</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (opts === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) &#123;</span><br><span class="line">    opts = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleThings</span>(<span class="hljs-params">opts = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="functions--default-side-effects"></a><a name="7.8"></a></p>
</li>
<li><p><a href="#functions--default-side-effects">7.8</a> 避免使用默认参数的副作用。</p>
<blockquote>
<p>为什么? 他们很容易混淆。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> b = <span class="hljs-number">1</span>;</span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count</span>(<span class="hljs-params">a = b++</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(a);</span><br><span class="line">&#125;</span><br><span class="line">count();  <span class="hljs-comment">// 1</span></span><br><span class="line">count();  <span class="hljs-comment">// 2</span></span><br><span class="line">count(<span class="hljs-number">3</span>); <span class="hljs-comment">// 3</span></span><br><span class="line">count();  <span class="hljs-comment">// 3</span></span><br></pre></td></tr></table></figure>

<p><a name="functions--defaults-last"></a><a name="7.9"></a></p>
</li>
<li><p><a href="#functions--defaults-last">7.9</a> 总是把默认参数放在最后。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleThings</span>(<span class="hljs-params">opts = &#123;&#125;, name</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleThings</span>(<span class="hljs-params">name, opts = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="functions--constructor"></a><a name="7.10"></a></p>
</li>
<li><p><a href="#functions--constructor">7.10</a> 永远不要使用函数构造器来创建一个新函数。 eslint: <a href="https://eslint.org/docs/rules/no-new-func" target="_blank" rel="noopener"><code>no-new-func</code></a></p>
<blockquote>
<p>为什么? 以这种方式创建一个函数将对一个类似于 <code>eval()</code> 的字符串进行计算，这将打开漏洞。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">var</span> add = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>(<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'return a + b'</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// still bad</span></span><br><span class="line"><span class="hljs-keyword">var</span> subtract = <span class="hljs-built_in">Function</span>(<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'return a - b'</span>);</span><br></pre></td></tr></table></figure>

<p><a name="functions--signature-spacing"></a><a name="7.11"></a></p>
</li>
<li><p><a href="#functions--signature-spacing">7.11</a> 函数签名中的间距。 eslint: <a href="https://eslint.org/docs/rules/space-before-function-paren" target="_blank" rel="noopener"><code>space-before-function-paren</code></a> <a href="https://eslint.org/docs/rules/space-before-blocks" target="_blank" rel="noopener"><code>space-before-blocks</code></a></p>
<blockquote>
<p>为什么? 一致性很好，在删除或添加名称时不需要添加或删除空格。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> f = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="hljs-keyword">const</span> g = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="hljs-keyword">const</span> h = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> x = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="hljs-keyword">const</span> y = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>(<span class="hljs-params"></span>) </span>&#123;&#125;;</span><br></pre></td></tr></table></figure>

<p><a name="functions--mutate-params"></a><a name="7.12"></a></p>
</li>
<li><p><a href="#functions--mutate-params">7.12</a> 没用变异参数。 eslint: <a href="https://eslint.org/docs/rules/no-param-reassign.html" target="_blank" rel="noopener"><code>no-param-reassign</code></a></p>
<blockquote>
<p>为什么? 将传入的对象作为参数进行操作可能会在原始调用程序中造成不必要的变量副作用。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f1</span>(<span class="hljs-params">obj</span>) </span>&#123;</span><br><span class="line">  obj.key = <span class="hljs-number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f2</span>(<span class="hljs-params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> key = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(obj, <span class="hljs-string">'key'</span>) ? obj.key : <span class="hljs-number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="functions--reassign-params"></a><a name="7.13"></a></p>
</li>
<li><p><a href="#functions--reassign-params">7.13</a> 不要再分配参数。 eslint: <a href="https://eslint.org/docs/rules/no-param-reassign.html" target="_blank" rel="noopener"><code>no-param-reassign</code></a></p>
<blockquote>
<p>为什么? 重新分配参数会导致意外的行为，尤其是在访问 <code>arguments</code> 对象的时候。 它还可能导致性能优化问题，尤其是在 V8 中。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f1</span>(<span class="hljs-params">a</span>) </span>&#123;</span><br><span class="line">  a = <span class="hljs-number">1</span>;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f2</span>(<span class="hljs-params">a</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (!a) &#123; a = <span class="hljs-number">1</span>; &#125;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f3</span>(<span class="hljs-params">a</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> b = a || <span class="hljs-number">1</span>;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f4</span>(<span class="hljs-params">a = <span class="hljs-number">1</span></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="functions--spread-vs-apply"></a><a name="7.14"></a></p>
</li>
<li><p><a href="#functions--spread-vs-apply">7.14</a> 优先使用扩展运算符 <code>...</code> 来调用可变参数函数。 eslint: <a href="https://eslint.org/docs/rules/prefer-spread" target="_blank" rel="noopener"><code>prefer-spread</code></a></p>
<blockquote>
<p>为什么? 它更加干净，你不需要提供上下文，并且你不能轻易的使用 <code>apply</code> 来 <code>new</code> 。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> x = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];</span><br><span class="line"><span class="hljs-built_in">console</span>.log.apply(<span class="hljs-built_in">console</span>, x);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> x = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];</span><br><span class="line"><span class="hljs-built_in">console</span>.log(...x);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">new</span> (<span class="hljs-built_in">Function</span>.prototype.bind.apply(<span class="hljs-built_in">Date</span>, [<span class="hljs-literal">null</span>, <span class="hljs-number">2016</span>, <span class="hljs-number">8</span>, <span class="hljs-number">5</span>]));</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(...[<span class="hljs-number">2016</span>, <span class="hljs-number">8</span>, <span class="hljs-number">5</span>]);</span><br></pre></td></tr></table></figure>

<p><a name="functions--signature-invocation-indentation"></a></p>
</li>
<li><p><a href="#functions--signature-invocation-indentation">7.15</a> 具有多行签名或者调用的函数应该像本指南中的其他多行列表一样缩进：在一行上只有一个条目，并且每个条目最后加上逗号。 eslint: <a href="https://eslint.org/docs/rules/function-paren-newline" target="_blank" rel="noopener"><code>function-paren-newline</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">bar,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">             baz,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">             quux</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  bar,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  baz,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  quux,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(foo,</span><br><span class="line">  bar,</span><br><span class="line">  baz);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(</span><br><span class="line">  foo,</span><br><span class="line">  bar,</span><br><span class="line">  baz,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a><a id="arrow-functions">箭头函数</a></h2><p>  <a name="arrows--use-them"></a><a name="8.1"></a></p>
<ul>
<li><p><a href="#arrows--use-them">8.1</a> 当你必须使用匿名函数时 (当传递内联函数时)， 使用箭头函数。 eslint: <a href="https://eslint.org/docs/rules/prefer-arrow-callback.html" target="_blank" rel="noopener"><code>prefer-arrow-callback</code></a>, <a href="https://eslint.org/docs/rules/arrow-spacing.html" target="_blank" rel="noopener"><code>arrow-spacing</code></a></p>
<blockquote>
<p>为什么? 它创建了一个在 <code>this</code> 上下文中执行的函数版本，它通常是你想要的，并且是一个更简洁的语法。</p>
</blockquote>
<blockquote>
<p>为什么不? 如果你有一个相当复杂的函数，你可以把这个逻辑转移到它自己的命名函数表达式中。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> y = x + <span class="hljs-number">1</span>;</span><br><span class="line">  <span class="hljs-keyword">return</span> x * y;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function">(<span class="hljs-params">x</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> y = x + <span class="hljs-number">1</span>;</span><br><span class="line">  <span class="hljs-keyword">return</span> x * y;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a name="arrows--implicit-return"></a><a name="8.2"></a></p>
</li>
<li><p><a href="#arrows--implicit-return">8.2</a> 如果函数体包含一个单独的语句，返回一个没有副作用的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Expressions" target="_blank" rel="noopener">expression</a> ， 省略括号并使用隐式返回。否则，保留括号并使用 <code>return</code> 语句。 eslint: <a href="https://eslint.org/docs/rules/arrow-parens.html" target="_blank" rel="noopener"><code>arrow-parens</code></a>, <a href="https://eslint.org/docs/rules/arrow-body-style.html" target="_blank" rel="noopener"><code>arrow-body-style</code></a></p>
<blockquote>
<p>为什么? 语法糖。 多个函数被链接在一起时，提高可读性。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> nextNumber = number + <span class="hljs-number">1</span>;</span><br><span class="line">  <span class="hljs-string">`A string containing the <span class="hljs-subst">$&#123;nextNumber&#125;</span>.`</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> <span class="hljs-string">`A string containing the <span class="hljs-subst">$&#123;number&#125;</span>.`</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function">(<span class="hljs-params">number</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> nextNumber = number + <span class="hljs-number">1</span>;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-string">`A string containing the <span class="hljs-subst">$&#123;nextNumber&#125;</span>.`</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function">(<span class="hljs-params">number, index</span>) =&gt;</span> (&#123;</span><br><span class="line">  [index]: number,</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 没有副作用的隐式返回</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> val = callback();</span><br><span class="line">  <span class="hljs-keyword">if</span> (val === <span class="hljs-literal">true</span>) &#123;</span><br><span class="line">    <span class="hljs-comment">// 如果回调返回 true 执行</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> bool = <span class="hljs-literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">foo(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> bool = <span class="hljs-literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">foo(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">  bool = <span class="hljs-literal">true</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a name="arrows--paren-wrap"></a><a name="8.3"></a></p>
</li>
<li><p><a href="#arrows--paren-wrap">8.3</a> 如果表达式跨越多个行，用括号将其括起来，以获得更好的可读性。</p>
<blockquote>
<p>为什么? 它清楚地显示了函数的起点和终点。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">[<span class="hljs-string">'get'</span>, <span class="hljs-string">'post'</span>, <span class="hljs-string">'put'</span>].map(<span class="hljs-function"><span class="hljs-params">httpMethod</span> =&gt;</span> <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(</span><br><span class="line">    httpMagicObjectWithAVeryLongName,</span><br><span class="line">    httpMethod,</span><br><span class="line">  )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">[<span class="hljs-string">'get'</span>, <span class="hljs-string">'post'</span>, <span class="hljs-string">'put'</span>].map(<span class="hljs-function"><span class="hljs-params">httpMethod</span> =&gt;</span> (</span><br><span class="line">  <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(</span><br><span class="line">    httpMagicObjectWithAVeryLongName,</span><br><span class="line">    httpMethod,</span><br><span class="line">  )</span><br><span class="line">));</span><br></pre></td></tr></table></figure>

<p><a name="arrows--one-arg-parens"></a><a name="8.4"></a></p>
</li>
<li><p><a href="#arrows--one-arg-parens">8.4</a> 如果你的函数接收一个参数，则可以不用括号，省略括号。 否则，为了保证清晰和一致性，需要在参数周围加上括号。 注意：总是使用括号是可以接受的，在这种情况下，我们使用 <a href="https://eslint.org/docs/rules/arrow-parens#always" target="_blank" rel="noopener">“always” option</a> 来配置 eslint. eslint: <a href="https://eslint.org/docs/rules/arrow-parens.html" target="_blank" rel="noopener"><code>arrow-parens</code></a></p>
<blockquote>
<p>为什么? 减少视觉上的混乱。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function">(<span class="hljs-params">x</span>) =&gt;</span> x * x);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x * x);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> (</span><br><span class="line">  <span class="hljs-string">`A long string with the <span class="hljs-subst">$&#123;number&#125;</span>. It’s so long that we don’t want it to take up space on the .map line!`</span></span><br><span class="line">));</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> y = x + <span class="hljs-number">1</span>;</span><br><span class="line">  <span class="hljs-keyword">return</span> x * y;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].map(<span class="hljs-function">(<span class="hljs-params">x</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> y = x + <span class="hljs-number">1</span>;</span><br><span class="line">  <span class="hljs-keyword">return</span> x * y;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a name="arrows--confusing"></a><a name="8.5"></a></p>
</li>
<li><p><a href="#arrows--confusing">8.5</a> 避免箭头函数符号 (<code>=&gt;</code>) 和比较运算符 (<code>&lt;=</code>, <code>&gt;=</code>) 的混淆。 eslint: <a href="https://eslint.org/docs/rules/no-confusing-arrow" target="_blank" rel="noopener"><code>no-confusing-arrow</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> itemHeight = <span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.height &gt; <span class="hljs-number">256</span> ? item.largeSize : item.smallSize;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> itemHeight = <span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.height &gt; <span class="hljs-number">256</span> ? item.largeSize : item.smallSize;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> itemHeight = <span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> (item.height &gt; <span class="hljs-number">256</span> ? item.largeSize : item.smallSize);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> itemHeight = <span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> &#123; height, largeSize, smallSize &#125; = item;</span><br><span class="line">  <span class="hljs-keyword">return</span> height &gt; <span class="hljs-number">256</span> ? largeSize : smallSize;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--implicit-arrow-linebreak"></a></p>
</li>
<li><p><a href="#whitespace--implicit-arrow-linebreak">8.6</a> 注意带有隐式返回的箭头函数函数体的位置。 eslint: <a href="https://eslint.org/docs/rules/implicit-arrow-linebreak" target="_blank" rel="noopener"><code>implicit-arrow-linebreak</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">(foo) =&gt;</span><br><span class="line">  bar;</span><br><span class="line"></span><br><span class="line">(foo) =&gt;</span><br><span class="line">  (bar);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">(foo) =&gt; bar;</span><br><span class="line">(foo) =&gt; (bar);</span><br><span class="line">(foo) =&gt; (</span><br><span class="line">   bar</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="类和构造器"><a href="#类和构造器" class="headerlink" title="类和构造器"></a><a id="classes--constructors">类和构造器</a></h2><p>  <a name="constructors--use-class"></a><a name="9.1"></a></p>
<ul>
<li><p><a href="#constructors--use-class">9.1</a> 尽量使用 <code>class</code>. 避免直接操作 <code>prototype</code> .</p>
<blockquote>
<p>为什么? <code>class</code> 语法更简洁，更容易推理。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Queue</span>(<span class="hljs-params">contents = []</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">this</span>.queue = [...contents];</span><br><span class="line">&#125;</span><br><span class="line">Queue.prototype.pop = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> value = <span class="hljs-keyword">this</span>.queue[<span class="hljs-number">0</span>];</span><br><span class="line">  <span class="hljs-keyword">this</span>.queue.splice(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);</span><br><span class="line">  <span class="hljs-keyword">return</span> value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Queue</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">constructor</span>(contents = []) &#123;</span><br><span class="line">    <span class="hljs-keyword">this</span>.queue = [...contents];</span><br><span class="line">  &#125;</span><br><span class="line">  pop() &#123;</span><br><span class="line">    <span class="hljs-keyword">const</span> value = <span class="hljs-keyword">this</span>.queue[<span class="hljs-number">0</span>];</span><br><span class="line">    <span class="hljs-keyword">this</span>.queue.splice(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);</span><br><span class="line">    <span class="hljs-keyword">return</span> value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="constructors--extends"></a><a name="9.2"></a></p>
</li>
<li><p><a href="#constructors--extends">9.2</a> 使用 <code>extends</code> 来扩展继承。</p>
<blockquote>
<p>为什么? 它是一个内置的方法，可以在不破坏 <code>instanceof</code> 的情况下继承原型功能。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> inherits = <span class="hljs-built_in">require</span>(<span class="hljs-string">'inherits'</span>);</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">PeekableQueue</span>(<span class="hljs-params">contents</span>) </span>&#123;</span><br><span class="line">  Queue.apply(<span class="hljs-keyword">this</span>, contents);</span><br><span class="line">&#125;</span><br><span class="line">inherits(PeekableQueue, Queue);</span><br><span class="line">PeekableQueue.prototype.peek = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.queue[<span class="hljs-number">0</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PeekableQueue</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Queue</span> </span>&#123;</span><br><span class="line">  peek() &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.queue[<span class="hljs-number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="constructors--chaining"></a><a name="9.3"></a></p>
</li>
<li><p><a href="#constructors--chaining">9.3</a> 方法返回了 <code>this</code> 来供其内部方法调用。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">Jedi.prototype.jump = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">this</span>.jumping = <span class="hljs-literal">true</span>;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Jedi.prototype.setHeight = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">height</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">this</span>.height = height;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> luke = <span class="hljs-keyword">new</span> Jedi();</span><br><span class="line">luke.jump(); <span class="hljs-comment">// =&gt; true</span></span><br><span class="line">luke.setHeight(<span class="hljs-number">20</span>); <span class="hljs-comment">// =&gt; undefined</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Jedi</span> </span>&#123;</span><br><span class="line">  jump() &#123;</span><br><span class="line">    <span class="hljs-keyword">this</span>.jumping = <span class="hljs-literal">true</span>;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setHeight(height) &#123;</span><br><span class="line">    <span class="hljs-keyword">this</span>.height = height;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> luke = <span class="hljs-keyword">new</span> Jedi();</span><br><span class="line"></span><br><span class="line">luke.jump()</span><br><span class="line">  .setHeight(<span class="hljs-number">20</span>);</span><br></pre></td></tr></table></figure>

<p><a name="constructors--tostring"></a><a name="9.4"></a></p>
</li>
<li><p><a href="#constructors--tostring">9.4</a> 只要在确保能正常工作并且不产生任何副作用的情况下，编写一个自定义的 <code>toString()</code> 方法也是可以的。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Jedi</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">constructor</span>(options = &#123;&#125;) &#123;</span><br><span class="line">    <span class="hljs-keyword">this</span>.name = options.name || <span class="hljs-string">'no name'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getName() &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">`Jedi - <span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.getName()&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="constructors--no-useless"></a><a name="9.5"></a></p>
</li>
<li><p><a href="#constructors--no-useless">9.5</a> 如果没有指定类，则类具有默认的构造器。 一个空的构造器或是一个代表父类的函数是没有必要的。 eslint: <a href="https://eslint.org/docs/rules/no-useless-constructor" target="_blank" rel="noopener"><code>no-useless-constructor</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Jedi</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">constructor</span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line">  getName() &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rey</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Jedi</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">constructor</span>(...args) &#123;</span><br><span class="line">    <span class="hljs-keyword">super</span>(...args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rey</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Jedi</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">constructor</span>(...args) &#123;</span><br><span class="line">    <span class="hljs-keyword">super</span>(...args);</span><br><span class="line">    <span class="hljs-keyword">this</span>.name = <span class="hljs-string">'Rey'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="classes--no-duplicate-members"></a></p>
</li>
<li><p><a href="#classes--no-duplicate-members">9.6</a> 避免定义重复的类成员。 eslint: <a href="https://eslint.org/docs/rules/no-dupe-class-members" target="_blank" rel="noopener"><code>no-dupe-class-members</code></a></p>
<blockquote>
<p>为什么? 重复的类成员声明将会默认倾向于最后一个 - 具有重复的类成员可以说是一个错误。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>&#123;</span><br><span class="line">  bar() &#123; <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; &#125;</span><br><span class="line">  bar() &#123; <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>&#123;</span><br><span class="line">  bar() &#123; <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>&#123;</span><br><span class="line">  bar() &#123; <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a><a id="modules">模块</a></h2><p>  <a name="modules--use-them"></a><a name="10.1"></a></p>
<ul>
<li><p><a href="#modules--use-them">10.1</a> 你可能经常使用模块 (<code>import</code>/<code>export</code>) 在一些非标准模块的系统上。 你也可以在你喜欢的模块系统上相互转换。</p>
<blockquote>
<p>为什么? 模块是未来的趋势，让我们拥抱未来。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> AirbnbStyleGuide = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./AirbnbStyleGuide'</span>);</span><br><span class="line"><span class="hljs-built_in">module</span>.exports = AirbnbStyleGuide.es6;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ok</span></span><br><span class="line"><span class="hljs-keyword">import</span> AirbnbStyleGuide <span class="hljs-keyword">from</span> <span class="hljs-string">'./AirbnbStyleGuide'</span>;</span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> AirbnbStyleGuide.es6;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// best</span></span><br><span class="line"><span class="hljs-keyword">import</span> &#123; es6 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./AirbnbStyleGuide'</span>;</span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> es6;</span><br></pre></td></tr></table></figure>

<p><a name="modules--no-wildcard"></a><a name="10.2"></a></p>
</li>
<li><p><a href="#modules--no-wildcard">10.2</a> 不要使用通配符导入。</p>
<blockquote>
<p>为什么? 这确定你有一个单独的默认导出。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> AirbnbStyleGuide <span class="hljs-keyword">from</span> <span class="hljs-string">'./AirbnbStyleGuide'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">import</span> AirbnbStyleGuide <span class="hljs-keyword">from</span> <span class="hljs-string">'./AirbnbStyleGuide'</span>;</span><br></pre></td></tr></table></figure>

<p><a name="modules--no-export-from-import"></a><a name="10.3"></a></p>
</li>
<li><p><a href="#modules--no-export-from-import">10.3</a> 不要直接从导入导出。</p>
<blockquote>
<p>为什么? 虽然写在一行很简洁，但是有一个明确的导入和一个明确的导出能够保证一致性。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-comment">// filename es6.js</span></span><br><span class="line"><span class="hljs-keyword">export</span> &#123; es6 <span class="hljs-keyword">as</span> <span class="hljs-keyword">default</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./AirbnbStyleGuide'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-comment">// filename es6.js</span></span><br><span class="line"><span class="hljs-keyword">import</span> &#123; es6 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./AirbnbStyleGuide'</span>;</span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> es6;</span><br></pre></td></tr></table></figure>

<p><a name="modules--no-duplicate-imports"></a></p>
</li>
<li><p><a href="#modules--no-duplicate-imports">10.4</a> 只从一个路径导入所有需要的东西。<br>eslint: <a href="https://eslint.org/docs/rules/no-duplicate-imports" target="_blank" rel="noopener"><code>no-duplicate-imports</code></a></p>
<blockquote>
<p>为什么? 从同一个路径导入多个行，使代码更难以维护。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">import</span> foo <span class="hljs-keyword">from</span> <span class="hljs-string">'foo'</span>;</span><br><span class="line"><span class="hljs-comment">// … 其他导入 … //</span></span><br><span class="line"><span class="hljs-keyword">import</span> &#123; named1, named2 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'foo'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">import</span> foo, &#123; named1, named2 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'foo'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">import</span> foo, &#123;</span><br><span class="line">  named1,</span><br><span class="line">  named2,</span><br><span class="line">&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'foo'</span>;</span><br></pre></td></tr></table></figure>

<p><a name="modules--no-mutable-exports"></a></p>
</li>
<li><p><a href="#modules--no-mutable-exports">10.5</a> 不要导出可变的引用。<br>eslint: <a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/no-mutable-exports.md" target="_blank" rel="noopener"><code>import/no-mutable-exports</code></a></p>
<blockquote>
<p>为什么? 在一般情况下，应该避免发生突变，但是在导出可变引用时及其容易发生突变。虽然在某些特殊情况下，可能需要这样，但是一般情况下只需要导出常量引用。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">let</span> foo = <span class="hljs-number">3</span>;</span><br><span class="line"><span class="hljs-keyword">export</span> &#123; foo &#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = <span class="hljs-number">3</span>;</span><br><span class="line"><span class="hljs-keyword">export</span> &#123; foo &#125;;</span><br></pre></td></tr></table></figure>

<p><a name="modules--prefer-default-export"></a></p>
</li>
<li><p><a href="#modules--prefer-default-export">10.6</a> 在单个导出的模块中，选择默认模块而不是指定的导出。<br>eslint: <a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/prefer-default-export.md" target="_blank" rel="noopener"><code>import/prefer-default-export</code></a></p>
<blockquote>
<p>为什么? 为了鼓励更多的文件只导出一件东西，这样可读性和可维护性更好。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p><a name="modules--imports-first"></a></p>
</li>
<li><p><a href="#modules--imports-first">10.7</a> 将所有的 <code>import</code>s 语句放在所有非导入语句的上边。<br>eslint: <a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/first.md" target="_blank" rel="noopener"><code>import/first</code></a></p>
<blockquote>
<p>为什么? 由于所有的 <code>import</code>s 都被提前，保持他们在顶部是为了防止意外发生。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">import</span> foo <span class="hljs-keyword">from</span> <span class="hljs-string">'foo'</span>;</span><br><span class="line">foo.init();</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> bar <span class="hljs-keyword">from</span> <span class="hljs-string">'bar'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">import</span> foo <span class="hljs-keyword">from</span> <span class="hljs-string">'foo'</span>;</span><br><span class="line"><span class="hljs-keyword">import</span> bar <span class="hljs-keyword">from</span> <span class="hljs-string">'bar'</span>;</span><br><span class="line"></span><br><span class="line">foo.init();</span><br></pre></td></tr></table></figure>

<p><a name="modules--multiline-imports-over-newlines"></a></p>
</li>
<li><p><a href="#modules--multiline-imports-over-newlines">10.8</a> 多行导入应该像多行数组和对象一样缩进。</p>
<blockquote>
<p>为什么? 花括号和其他规范一样，遵循相同的缩进规则，后边的都好一样。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">import</span> &#123;longNameA, longNameB, longNameC, longNameD, longNameE&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">import</span> &#123;</span><br><span class="line">  longNameA,</span><br><span class="line">  longNameB,</span><br><span class="line">  longNameC,</span><br><span class="line">  longNameD,</span><br><span class="line">  longNameE,</span><br><span class="line">&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;</span><br></pre></td></tr></table></figure>

<p><a name="modules--no-webpack-loader-syntax"></a></p>
</li>
<li><p><a href="#modules--no-webpack-loader-syntax">10.9</a> 在模块导入语句中禁止使用 Webpack 加载器语法。<br>eslint: <a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/no-webpack-loader-syntax.md" target="_blank" rel="noopener"><code>import/no-webpack-loader-syntax</code></a></p>
<blockquote>
<p>为什么? 因为在导入语句中使用 webpack 语法，将代码和模块绑定在一起。应该在 <code>webpack.config.js</code> 中使用加载器语法。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">import</span> fooSass <span class="hljs-keyword">from</span> <span class="hljs-string">'css!sass!foo.scss'</span>;</span><br><span class="line"><span class="hljs-keyword">import</span> barCss <span class="hljs-keyword">from</span> <span class="hljs-string">'style!css!bar.css'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">import</span> fooSass <span class="hljs-keyword">from</span> <span class="hljs-string">'foo.scss'</span>;</span><br><span class="line"><span class="hljs-keyword">import</span> barCss <span class="hljs-keyword">from</span> <span class="hljs-string">'bar.css'</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="迭代器和发生器"><a href="#迭代器和发生器" class="headerlink" title="迭代器和发生器"></a><a id="iterators-and-generators">迭代器和发生器</a></h2><p>  <a name="iterators--nope"></a><a name="11.1"></a></p>
<ul>
<li><p><a href="#iterators--nope">11.1</a> 不要使用迭代器。 你应该使用 JavaScript 的高阶函数代替 <code>for-in</code> 或者 <code>for-of</code>。 eslint: <a href="https://eslint.org/docs/rules/no-iterator.html" target="_blank" rel="noopener"><code>no-iterator</code></a> <a href="https://eslint.org/docs/rules/no-restricted-syntax" target="_blank" rel="noopener"><code>no-restricted-syntax</code></a></p>
<blockquote>
<p>为什么? 这是我们强制的规则。 拥有返回值得纯函数比这个更容易解释。</p>
</blockquote>
<blockquote>
<p>使用 <code>map()</code> / <code>every()</code> / <code>filter()</code> / <code>find()</code> / <code>findIndex()</code> / <code>reduce()</code> / <code>some()</code> / … 遍历数组， 和使用 <code>Object.keys()</code> / <code>Object.values()</code> / <code>Object.entries()</code> 迭代你的对象生成数组。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;</span><br><span class="line"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> num <span class="hljs-keyword">of</span> numbers) &#123;</span><br><span class="line">  sum += num;</span><br><span class="line">&#125;</span><br><span class="line">sum === <span class="hljs-number">15</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;</span><br><span class="line">numbers.forEach(<span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> &#123;</span><br><span class="line">  sum += num;</span><br><span class="line">&#125;);</span><br><span class="line">sum === <span class="hljs-number">15</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// best (use the functional force)</span></span><br><span class="line"><span class="hljs-keyword">const</span> sum = numbers.reduce(<span class="hljs-function">(<span class="hljs-params">total, num</span>) =&gt;</span> total + num, <span class="hljs-number">0</span>);</span><br><span class="line">sum === <span class="hljs-number">15</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> increasedByOne = [];</span><br><span class="line"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; numbers.length; i++) &#123;</span><br><span class="line">  increasedByOne.push(numbers[i] + <span class="hljs-number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> increasedByOne = [];</span><br><span class="line">numbers.forEach(<span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> &#123;</span><br><span class="line">  increasedByOne.push(num + <span class="hljs-number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// best (keeping it functional)</span></span><br><span class="line"><span class="hljs-keyword">const</span> increasedByOne = numbers.map(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num + <span class="hljs-number">1</span>);</span><br></pre></td></tr></table></figure>

<p><a name="generators--nope"></a><a name="11.2"></a></p>
</li>
<li><p><a href="#generators--nope">11.2</a> 不要使用发生器。</p>
<blockquote>
<p>为什么? They don’t transpile well to ES5.</p>
</blockquote>
<p><a name="generators--spacing"></a></p>
</li>
<li><p><a href="#generators--spacing">11.3</a> 如果你必须使用发生器或者无视 <a href="#generators--nope">我们的建议</a>，请确保他们的函数签名是正常的间隔。 eslint: <a href="https://eslint.org/docs/rules/generator-star-spacing" target="_blank" rel="noopener"><code>generator-star-spacing</code></a></p>
<blockquote>
<p>为什么? <code>function</code> 和 <code>*</code> 是同一个概念关键字的一部分 - <code>*</code> 不是 <code>function</code> 的修饰符， <code>function*</code> 是一个不同于 <code>function</code> 的构造器。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> * <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> bar = <span class="hljs-function"><span class="hljs-keyword">function</span> * (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> baz = <span class="hljs-function"><span class="hljs-keyword">function</span> *(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> quux = <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span>*<span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> *<span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// very bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><br><span class="line"><span class="hljs-function">*</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// very bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> wat = <span class="hljs-function"><span class="hljs-keyword">function</span></span></span><br><span class="line"><span class="hljs-function">*</span></span><br><span class="line"><span class="hljs-function">(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = <span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a><a id="properties">属性</a></h2><p>  <a name="properties--dot"></a><a name="12.1"></a></p>
<ul>
<li><p><a href="#properties--dot">12.1</a> 访问属性时使用点符号。 eslint: <a href="https://eslint.org/docs/rules/dot-notation.html" target="_blank" rel="noopener"><code>dot-notation</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> luke = &#123;</span><br><span class="line">  jedi: <span class="hljs-literal">true</span>,</span><br><span class="line">  age: <span class="hljs-number">28</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> isJedi = luke[<span class="hljs-string">'jedi'</span>];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> isJedi = luke.jedi;</span><br></pre></td></tr></table></figure>

<p><a name="properties--bracket"></a><a name="12.2"></a></p>
</li>
<li><p><a href="#properties--bracket">12.2</a> 使用变量访问属性时，使用 <code>[]</code>表示法。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> luke = &#123;</span><br><span class="line">  jedi: <span class="hljs-literal">true</span>,</span><br><span class="line">  age: <span class="hljs-number">28</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProp</span>(<span class="hljs-params">prop</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> luke[prop];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> isJedi = getProp(<span class="hljs-string">'jedi'</span>);</span><br></pre></td></tr></table></figure>

<p><a name="es2016-properties--exponentiation-operator"></a></p>
</li>
<li><p><a href="#es2016-properties--exponentiation-operator">12.3</a> 计算指数时，可以使用 <code>**</code> 运算符。 eslint: <a href="https://eslint.org/docs/rules/no-restricted-properties" target="_blank" rel="noopener"><code>no-restricted-properties</code></a>.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> binary = <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> binary = <span class="hljs-number">2</span> ** <span class="hljs-number">10</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a><a id="variables">变量</a></h2><p>  <a name="variables--const"></a><a name="13.1"></a></p>
<ul>
<li><p><a href="#variables--const">13.1</a> 使用 <code>const</code> 或者 <code>let</code> 来定义变量。 不这样做将创建一个全局变量。 我们希望避免污染全局命名空间。 Captain Planet 警告过我们。 eslint: <a href="https://eslint.org/docs/rules/no-undef" target="_blank" rel="noopener"><code>no-undef</code></a> <a href="https://eslint.org/docs/rules/prefer-const" target="_blank" rel="noopener"><code>prefer-const</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">superPower = <span class="hljs-keyword">new</span> SuperPower();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> superPower = <span class="hljs-keyword">new</span> SuperPower();</span><br></pre></td></tr></table></figure>

<p><a name="variables--one-const"></a><a name="13.2"></a></p>
</li>
<li><p><a href="#variables--one-const">13.2</a> 使用 <code>const</code> 或者 <code>let</code> 声明每一个变量。 eslint: <a href="https://eslint.org/docs/rules/one-var.html" target="_blank" rel="noopener"><code>one-var</code></a></p>
<blockquote>
<p>为什么? 这样更容易添加新的变量声明，而且你不必担心是使用 <code>;</code> 还是使用 <code>,</code> 或引入标点符号的差别。 你可以通过 debugger 逐步查看每个声明，而不是立即跳过所有声明。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> items = getItems(),</span><br><span class="line">    goSportsTeam = <span class="hljs-literal">true</span>,</span><br><span class="line">    dragonball = <span class="hljs-string">'z'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-comment">// (compare to above, and try to spot the mistake)</span></span><br><span class="line"><span class="hljs-keyword">const</span> items = getItems(),</span><br><span class="line">    goSportsTeam = <span class="hljs-literal">true</span>;</span><br><span class="line">    dragonball = <span class="hljs-string">'z'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> items = getItems();</span><br><span class="line"><span class="hljs-keyword">const</span> goSportsTeam = <span class="hljs-literal">true</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> dragonball = <span class="hljs-string">'z'</span>;</span><br></pre></td></tr></table></figure>

<p><a name="variables--const-let-group"></a><a name="13.3"></a></p>
</li>
<li><p><a href="#variables--const-let-group">13.3</a> 把 <code>const</code> 声明的放在一起，把 <code>let</code> 声明的放在一起。.</p>
<blockquote>
<p>为什么? 这在后边如果需要根据前边的赋值变量指定一个变量时很有用。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">let</span> i, len, dragonball,</span><br><span class="line">    items = getItems(),</span><br><span class="line">    goSportsTeam = <span class="hljs-literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">let</span> i;</span><br><span class="line"><span class="hljs-keyword">const</span> items = getItems();</span><br><span class="line"><span class="hljs-keyword">let</span> dragonball;</span><br><span class="line"><span class="hljs-keyword">const</span> goSportsTeam = <span class="hljs-literal">true</span>;</span><br><span class="line"><span class="hljs-keyword">let</span> len;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> goSportsTeam = <span class="hljs-literal">true</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> items = getItems();</span><br><span class="line"><span class="hljs-keyword">let</span> dragonball;</span><br><span class="line"><span class="hljs-keyword">let</span> i;</span><br><span class="line"><span class="hljs-keyword">let</span> length;</span><br></pre></td></tr></table></figure>

<p><a name="variables--define-where-used"></a><a name="13.4"></a></p>
</li>
<li><p><a href="#variables--define-where-used">13.4</a> 在你需要的使用定义变量，但是要把它们放在一个合理的地方。</p>
<blockquote>
<p>为什么? <code>let</code> 和 <code>const</code> 是块级作用域而不是函数作用域。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad - 不必要的函数调用</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkName</span>(<span class="hljs-params">hasName</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> name = getName();</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">if</span> (hasName === <span class="hljs-string">'test'</span>) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'test'</span>) &#123;</span><br><span class="line">    <span class="hljs-keyword">this</span>.setName(<span class="hljs-string">''</span>);</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkName</span>(<span class="hljs-params">hasName</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (hasName === <span class="hljs-string">'test'</span>) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">const</span> name = getName();</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'test'</span>) &#123;</span><br><span class="line">    <span class="hljs-keyword">this</span>.setName(<span class="hljs-string">''</span>);</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="variables--no-chain-assignment"></a><a name="13.5"></a></p>
</li>
<li><p><a href="#variables--no-chain-assignment">13.5</a> 不要链式变量赋值。 eslint: <a href="https://eslint.org/docs/rules/no-multi-assign" target="_blank" rel="noopener"><code>no-multi-assign</code></a></p>
<blockquote>
<p>为什么? 链式变量赋值会创建隐式全局变量。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">example</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// JavaScript 把它解释为</span></span><br><span class="line">  <span class="hljs-comment">// let a = ( b = ( c = 1 ) );</span></span><br><span class="line">  <span class="hljs-comment">// let 关键词只适用于变量 a ；变量 b 和变量 c 则变成了全局变量。</span></span><br><span class="line">  <span class="hljs-keyword">let</span> a = b = c = <span class="hljs-number">1</span>;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">console</span>.log(a); <span class="hljs-comment">// throws ReferenceError</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(b); <span class="hljs-comment">// 1</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(c); <span class="hljs-comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">example</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">let</span> a = <span class="hljs-number">1</span>;</span><br><span class="line">  <span class="hljs-keyword">let</span> b = a;</span><br><span class="line">  <span class="hljs-keyword">let</span> c = a;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">console</span>.log(a); <span class="hljs-comment">// throws ReferenceError</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(b); <span class="hljs-comment">// throws ReferenceError</span></span><br><span class="line"><span class="hljs-built_in">console</span>.log(c); <span class="hljs-comment">// throws ReferenceError</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 对于 `const` 也一样</span></span><br></pre></td></tr></table></figure>

<p><a name="variables--unary-increment-decrement"></a><a name="13.6"></a></p>
</li>
<li><p><a href="#variables--unary-increment-decrement">13.6</a> 避免使用不必要的递增和递减 (<code>++</code>, <code>--</code>)。 eslint <a href="https://eslint.org/docs/rules/no-plusplus" target="_blank" rel="noopener"><code>no-plusplus</code></a></p>
<blockquote>
<p>为什么? 在eslint文档中，一元递增和递减语句以自动分号插入为主题，并且在应用程序中可能会导致默认值的递增或递减。它还可以用像 <code>num += 1</code> 这样的语句来改变您的值，而不是使用 <code>num++</code> 或 <code>num ++</code> 。不允许不必要的增量和减量语句也会使您无法预先递增/预递减值，这也会导致程序中的意外行为。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> array = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];</span><br><span class="line"><span class="hljs-keyword">let</span> num = <span class="hljs-number">1</span>;</span><br><span class="line">num++;</span><br><span class="line">--num;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;</span><br><span class="line"><span class="hljs-keyword">let</span> truthyCount = <span class="hljs-number">0</span>;</span><br><span class="line"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">  <span class="hljs-keyword">let</span> value = array[i];</span><br><span class="line">  sum += value;</span><br><span class="line">  <span class="hljs-keyword">if</span> (value) &#123;</span><br><span class="line">    truthyCount++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> array = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];</span><br><span class="line"><span class="hljs-keyword">let</span> num = <span class="hljs-number">1</span>;</span><br><span class="line">num += <span class="hljs-number">1</span>;</span><br><span class="line">num -= <span class="hljs-number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> sum = array.reduce(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);</span><br><span class="line"><span class="hljs-keyword">const</span> truthyCount = array.filter(<span class="hljs-built_in">Boolean</span>).length;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><a name="variables--linebreak"></a></p>
<ul>
<li><p><a href="#variables--linebreak">13.7</a> 避免在赋值语句 <code>=</code> 前后换行。如果你的代码违反了 <a href="https://eslint.org/docs/rules/max-len.html" target="_blank" rel="noopener"><code>max-len</code></a>， 使用括号包裹。 eslint <a href="https://eslint.org/docs/rules/operator-linebreak.html" target="_blank" rel="noopener"><code>operator-linebreak</code></a>.</p>
<blockquote>
<p>为什么? 在 <code>=</code> 前后换行，可能混淆分配的值。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo =</span><br><span class="line">  superLongLongLongLongLongLongLongLongFunctionName();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo</span><br><span class="line">  = <span class="hljs-string">'superLongLongLongLongLongLongLongLongString'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = (</span><br><span class="line">  superLongLongLongLongLongLongLongLongFunctionName()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = <span class="hljs-string">'superLongLongLongLongLongLongLongLongString'</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="提升"><a href="#提升" class="headerlink" title="提升"></a><a id="hoisting">提升</a></h2><p>  <a name="hoisting--about"></a><a name="14.1"></a></p>
<ul>
<li><p><a href="#hoisting--about">14.1</a> <code>var</code> 定义的变量会被提升到函数范围的最顶部，但是它的赋值不会。<code>const</code> 和 <code>let</code> 声明的变量受到一个称之为 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Temporal_Dead_Zone_and_errors_with_let" target="_blank" rel="noopener">Temporal Dead Zones (TDZ)</a> 的新概念保护。 知道为什么 <a href="http://es-discourse.com/t/why-typeof-is-no-longer-safe/15" target="_blank" rel="noopener">typeof 不在安全</a> 是很重要的。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// 我们知道这个行不通 (假设没有未定义的全局变量)</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">example</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(notDefined); <span class="hljs-comment">// =&gt; throws a ReferenceError</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 在引用变量后创建变量声明将会因变量提升而起作用。</span></span><br><span class="line"><span class="hljs-comment">// 注意: 真正的值 `true` 不会被提升。</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">example</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(declaredButNotAssigned); <span class="hljs-comment">// =&gt; undefined</span></span><br><span class="line">  <span class="hljs-keyword">var</span> declaredButNotAssigned = <span class="hljs-literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 解释器将变量提升到函数的顶部</span></span><br><span class="line"><span class="hljs-comment">// 这意味着我们可以将上边的例子重写为：</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">example</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">let</span> declaredButNotAssigned;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(declaredButNotAssigned); <span class="hljs-comment">// =&gt; undefined</span></span><br><span class="line">  declaredButNotAssigned = <span class="hljs-literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 使用 const 和 let</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">example</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(declaredButNotAssigned); <span class="hljs-comment">// =&gt; throws a ReferenceError</span></span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> declaredButNotAssigned); <span class="hljs-comment">// =&gt; throws a ReferenceError</span></span><br><span class="line">  <span class="hljs-keyword">const</span> declaredButNotAssigned = <span class="hljs-literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="hoisting--anon-expressions"></a><a name="14.2"></a></p>
</li>
<li><p><a href="#hoisting--anon-expressions">14.2</a> 匿名函数表达式提升变量名，而不是函数赋值。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">example</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(anonymous); <span class="hljs-comment">// =&gt; undefined</span></span><br><span class="line"></span><br><span class="line">  anonymous(); <span class="hljs-comment">// =&gt; TypeError anonymous is not a function</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">var</span> anonymous = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'anonymous function expression'</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="hoisting--named-expresions"></a><a name="hoisting--named-expressions"></a><a name="14.3"></a></p>
</li>
<li><p><a href="#hoisting--named-expressions">14.3</a> 命名函数表达式提升的是变量名，而不是函数名或者函数体。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">example</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(named); <span class="hljs-comment">// =&gt; undefined</span></span><br><span class="line"></span><br><span class="line">  named(); <span class="hljs-comment">// =&gt; TypeError named is not a function</span></span><br><span class="line"></span><br><span class="line">  superPower(); <span class="hljs-comment">// =&gt; ReferenceError superPower is not defined</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">var</span> named = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">superPower</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Flying'</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 当函数名和变量名相同时也是如此。</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">example</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(named); <span class="hljs-comment">// =&gt; undefined</span></span><br><span class="line"></span><br><span class="line">  named(); <span class="hljs-comment">// =&gt; TypeError named is not a function</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">var</span> named = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">named</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'named'</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="hoisting--declarations"></a><a name="14.4"></a></p>
</li>
<li><p><a href="#hoisting--declarations">14.4</a> 函数声明提升其名称和函数体。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">example</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  superPower(); <span class="hljs-comment">// =&gt; Flying</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">superPower</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Flying'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>更多信息请参考 <a href="http://www.adequatelygood.com/" target="_blank" rel="noopener">Ben Cherry</a> 的 <a href="http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting/" target="_blank" rel="noopener">JavaScript Scoping &amp; Hoisting</a>。</p>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="比较运算符和等号"><a href="#比较运算符和等号" class="headerlink" title="比较运算符和等号"></a><a id="comparison-operators--equality">比较运算符和等号</a></h2><p>  <a name="comparison--eqeqeq"></a><a name="15.1"></a></p>
<ul>
<li><p><a href="#comparison--eqeqeq">15.1</a> 使用 <code>===</code> 和 <code>!==</code> 而不是 <code>==</code> 和 <code>!=</code>。 eslint: <a href="https://eslint.org/docs/rules/eqeqeq.html" target="_blank" rel="noopener"><code>eqeqeq</code></a></p>
<p><a name="comparison--if"></a><a name="15.2"></a></p>
</li>
<li><p><a href="#comparison--if">15.2</a> 条件语句，例如 <code>if</code> 语句使用 <code>ToBoolean</code> 的抽象方法来计算表达式的结果，并始终遵循以下简单的规则：</p>
<ul>
<li><strong>Objects</strong> 的取值为： <strong>true</strong></li>
<li><strong>Undefined</strong> 的取值为： <strong>false</strong></li>
<li><strong>Null</strong> 的取值为： <strong>false</strong></li>
<li><strong>Booleans</strong> 的取值为： <strong>布尔值的取值</strong></li>
<li><strong>Numbers</strong> 的取值为：如果为 <strong>+0, -0, or NaN</strong> 值为 <strong>false</strong> 否则为 <strong>true</strong></li>
<li><strong>Strings</strong> 的取值为: 如果是一个空字符串 <code>&#39;&#39;</code> 值为 <strong>false</strong> 否则为 <strong>true</strong></li>
</ul>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">if</span> ([<span class="hljs-number">0</span>] &amp;&amp; []) &#123;</span><br><span class="line">  <span class="hljs-comment">// true</span></span><br><span class="line">  <span class="hljs-comment">// 一个数组（既是是空的）是一个对象，对象的取值为 true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="comparison--shortcuts"></a><a name="15.3"></a></p>
</li>
<li><p><a href="#comparison--shortcuts">15.3</a> 对于布尔值使用简写，但是对于字符串和数字进行显式比较。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> (isValid === <span class="hljs-literal">true</span>) &#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (isValid) &#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> (name) &#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (name !== <span class="hljs-string">''</span>) &#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> (collection.length) &#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (collection.length &gt; <span class="hljs-number">0</span>) &#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="comparison--moreinfo"></a><a name="15.4"></a></p>
</li>
<li><p><a href="#comparison--moreinfo">15.4</a> 获取更多信息请查看 Angus Croll 的 <a href="https://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/#more-2108" target="_blank" rel="noopener">Truth Equality and JavaScript</a> 。</p>
<p><a name="comparison--switch-blocks"></a><a name="15.5"></a></p>
</li>
<li><p><a href="#comparison--switch-blocks">15.5</a> 在 <code>case</code> 和 <code>default</code> 的子句中，如果存在声明 (例如. <code>let</code>, <code>const</code>, <code>function</code>, 和 <code>class</code>)，使用大括号来创建块 。 eslint: <a href="https://eslint.org/docs/rules/no-case-declarations.html" target="_blank" rel="noopener"><code>no-case-declarations</code></a></p>
<blockquote>
<p>为什么? 语法声明在整个 <code>switch</code> 块中都是可见的，但是只有在赋值的时候才会被初始化，这种情况只有在 <code>case</code> 条件达到才会发生。 当多个 <code>case</code> 语句定义相同的东西是，这会导致问题问题。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">switch</span> (foo) &#123;</span><br><span class="line">  <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:</span><br><span class="line">    <span class="hljs-keyword">let</span> x = <span class="hljs-number">1</span>;</span><br><span class="line">    <span class="hljs-keyword">break</span>;</span><br><span class="line">  <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:</span><br><span class="line">    <span class="hljs-keyword">const</span> y = <span class="hljs-number">2</span>;</span><br><span class="line">    <span class="hljs-keyword">break</span>;</span><br><span class="line">  <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">      <span class="hljs-comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-keyword">break</span>;</span><br><span class="line">  <span class="hljs-keyword">default</span>:</span><br><span class="line">    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">switch</span> (foo) &#123;</span><br><span class="line">  <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: &#123;</span><br><span class="line">    <span class="hljs-keyword">let</span> x = <span class="hljs-number">1</span>;</span><br><span class="line">    <span class="hljs-keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: &#123;</span><br><span class="line">    <span class="hljs-keyword">const</span> y = <span class="hljs-number">2</span>;</span><br><span class="line">    <span class="hljs-keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: &#123;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">      <span class="hljs-comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:</span><br><span class="line">    bar();</span><br><span class="line">    <span class="hljs-keyword">break</span>;</span><br><span class="line">  <span class="hljs-keyword">default</span>: &#123;</span><br><span class="line">    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> </span>&#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="comparison--nested-ternaries"></a><a name="15.6"></a></p>
</li>
<li><p><a href="#comparison--nested-ternaries">15.6</a> 三目表达式不应该嵌套，通常是单行表达式。 eslint: <a href="https://eslint.org/docs/rules/no-nested-ternary.html" target="_blank" rel="noopener"><code>no-nested-ternary</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = maybe1 &gt; maybe2</span><br><span class="line">  ? <span class="hljs-string">"bar"</span></span><br><span class="line">  : value1 &gt; value2 ? <span class="hljs-string">"baz"</span> : <span class="hljs-literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 分离为两个三目表达式</span></span><br><span class="line"><span class="hljs-keyword">const</span> maybeNull = value1 &gt; value2 ? <span class="hljs-string">'baz'</span> : <span class="hljs-literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// better</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = maybe1 &gt; maybe2</span><br><span class="line">  ? <span class="hljs-string">'bar'</span></span><br><span class="line">  : maybeNull;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// best</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = maybe1 &gt; maybe2 ? <span class="hljs-string">'bar'</span> : maybeNull;</span><br></pre></td></tr></table></figure>

<p><a name="comparison--unneeded-ternary"></a><a name="15.7"></a></p>
</li>
<li><p><a href="#comparison--unneeded-ternary">15.7</a> 避免不必要的三目表达式。 eslint: <a href="https://eslint.org/docs/rules/no-unneeded-ternary.html" target="_blank" rel="noopener"><code>no-unneeded-ternary</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = a ? a : b;</span><br><span class="line"><span class="hljs-keyword">const</span> bar = c ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> baz = c ? <span class="hljs-literal">false</span> : <span class="hljs-literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = a || b;</span><br><span class="line"><span class="hljs-keyword">const</span> bar = !!c;</span><br><span class="line"><span class="hljs-keyword">const</span> baz = !c;</span><br></pre></td></tr></table></figure>

<p><a name="comparison--no-mixed-operators"></a></p>
</li>
<li><p><a href="#comparison--no-mixed-operators">15.8</a> 使用该混合运算符时，使用括号括起来。 唯一例外的是标准算数运算符 (<code>+</code>, <code>-</code>, <code>*</code>, &amp; <code>/</code>) 因为他们的优先级被广泛理解。 eslint: <a href="https://eslint.org/docs/rules/no-mixed-operators.html" target="_blank" rel="noopener"><code>no-mixed-operators</code></a></p>
<blockquote>
<p>为什么? 这能提高可读性并且表明开发人员的意图。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = a &amp;&amp; b &lt; <span class="hljs-number">0</span> || c &gt; <span class="hljs-number">0</span> || d + <span class="hljs-number">1</span> === <span class="hljs-number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> bar = a ** b - <span class="hljs-number">5</span> % d;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-comment">// 可能陷入一种 (a || b) &amp;&amp; c 的思考</span></span><br><span class="line"><span class="hljs-keyword">if</span> (a || b &amp;&amp; c) &#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = (a &amp;&amp; b &lt; <span class="hljs-number">0</span>) || c &gt; <span class="hljs-number">0</span> || (d + <span class="hljs-number">1</span> === <span class="hljs-number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> bar = (a ** b) - (<span class="hljs-number">5</span> % d);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (a || (b &amp;&amp; c)) &#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> bar = a + b / c * d;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="块"><a href="#块" class="headerlink" title="块"></a><a id="blocks">块</a></h2><p>  <a name="blocks--braces"></a><a name="16.1"></a></p>
<ul>
<li><p><a href="#blocks--braces">16.1</a> 当有多行代码块的时候，使用大括号包裹。 eslint: <a href="https://eslint.org/docs/rules/nonblock-statement-body-position" target="_blank" rel="noopener"><code>nonblock-statement-body-position</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> (test)</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (test) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (test) &#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="blocks--cuddled-elses"></a><a name="16.2"></a></p>
</li>
<li><p><a href="#blocks--cuddled-elses">16.2</a> 如果你使用的是 <code>if</code> 和 <code>else</code> 的多行代码块，则将 <code>else</code> 语句放在 <code>if</code> 块闭括号同一行的位置。 eslint: <a href="https://eslint.org/docs/rules/brace-style.html" target="_blank" rel="noopener"><code>brace-style</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> (test) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">  thing2();</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-keyword">else</span> &#123;</span><br><span class="line">  thing3();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (test) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">  thing2();</span><br><span class="line">&#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">  thing3();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="blocks--no-else-return"></a><a name="16.3"></a></p>
</li>
<li><p><a href="#blocks--no-else-return">16.3</a> 如果一个 <code>if</code> 块总是执行一个 <code>return</code> 语句，那么接下来的 <code>else</code> 块就没有必要了。 如果一个包含 <code>return</code> 语句的 <code>else if</code> 块，在一个包含了 <code>return</code> 语句的 <code>if</code> 块之后，那么可以拆成多个 <code>if</code> 块。 eslint: <a href="https://eslint.org/docs/rules/no-else-return" target="_blank" rel="noopener"><code>no-else-return</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (x) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> x;</span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cats</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (x) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> x;</span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (y) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dogs</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (x) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> x;</span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">if</span> (y) &#123;</span><br><span class="line">      <span class="hljs-keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (x) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> x;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cats</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (x) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> x;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">if</span> (y) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dogs</span>(<span class="hljs-params">x</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (x) &#123;</span><br><span class="line">    <span class="hljs-keyword">if</span> (z) &#123;</span><br><span class="line">      <span class="hljs-keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> z;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a><a id="control-statements">控制语句</a></h2><p>  <a name="control-statements"></a></p>
<ul>
<li><p><a href="#control-statements">17.1</a> 如果你的控制语句 (<code>if</code>, <code>while</code> 等) 太长或者超过了一行最大长度的限制，则可以将每个条件（或组）放入一个新的行。 逻辑运算符应该在行的开始。</p>
<blockquote>
<p>为什么? 要求操作符在行的开始保持对齐并遵循类似方法衔接的模式。 这提高了可读性，并且使更复杂的逻辑更容易直观的被理解。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> ((foo === <span class="hljs-number">123</span> || bar === <span class="hljs-string">'abc'</span>) &amp;&amp; doesItLookGoodWhenItBecomesThatLong() &amp;&amp; isThisReallyHappening()) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> (foo === <span class="hljs-number">123</span> &amp;&amp;</span><br><span class="line">  bar === <span class="hljs-string">'abc'</span>) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> (foo === <span class="hljs-number">123</span></span><br><span class="line">  &amp;&amp; bar === <span class="hljs-string">'abc'</span>) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> (</span><br><span class="line">  foo === <span class="hljs-number">123</span> &amp;&amp;</span><br><span class="line">  bar === <span class="hljs-string">'abc'</span></span><br><span class="line">) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (</span><br><span class="line">  foo === <span class="hljs-number">123</span></span><br><span class="line">  &amp;&amp; bar === <span class="hljs-string">'abc'</span></span><br><span class="line">) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (</span><br><span class="line">  (foo === <span class="hljs-number">123</span> || bar === <span class="hljs-string">'abc'</span>)</span><br><span class="line">  &amp;&amp; doesItLookGoodWhenItBecomesThatLong()</span><br><span class="line">  &amp;&amp; isThisReallyHappening()</span><br><span class="line">) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (foo === <span class="hljs-number">123</span> &amp;&amp; bar === <span class="hljs-string">'abc'</span>) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="control-statement--value-selection"></a></p>
</li>
<li><p><a href="#control-statements--value-selection">17.2</a> 不要使用选择操作符代替控制语句。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">!isRunning &amp;&amp; startRunning();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (!isRunning) &#123;</span><br><span class="line">  startRunning();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a><a id="comments">注释</a></h2><p>  <a name="comments--multiline"></a><a name="17.1"></a></p>
<ul>
<li><p><a href="#comments--multiline">18.1</a> 使用 <code>/** ... */</code> 来进行多行注释。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-comment">// make() returns a new element</span></span><br><span class="line"><span class="hljs-comment">// based on the passed in tag name</span></span><br><span class="line"><span class="hljs-comment">//</span></span><br><span class="line"><span class="hljs-comment">// @param &#123;String&#125; tag</span></span><br><span class="line"><span class="hljs-comment">// @return &#123;Element&#125; element</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">make</span>(<span class="hljs-params">tag</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> element;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * make() returns a new element</span></span><br><span class="line"><span class="hljs-comment"> * based on the passed-in tag name</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">make</span>(<span class="hljs-params">tag</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="comments--singleline"></a><a name="17.2"></a></p>
</li>
<li><p><a href="#comments--singleline">18.2</a> 使用 <code>//</code> 进行单行注释。 将单行注释放在需要注释的行的上方新行。 在注释之前放一个空行，除非它在块的第一行。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> active = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// is current tab</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-comment">// is current tab</span></span><br><span class="line"><span class="hljs-keyword">const</span> active = <span class="hljs-literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getType</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'fetching type...'</span>);</span><br><span class="line">  <span class="hljs-comment">// set the default type to 'no type'</span></span><br><span class="line">  <span class="hljs-keyword">const</span> type = <span class="hljs-keyword">this</span>.type || <span class="hljs-string">'no type'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> type;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getType</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'fetching type...'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// set the default type to 'no type'</span></span><br><span class="line">  <span class="hljs-keyword">const</span> type = <span class="hljs-keyword">this</span>.type || <span class="hljs-string">'no type'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> type;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// also good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getType</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// set the default type to 'no type'</span></span><br><span class="line">  <span class="hljs-keyword">const</span> type = <span class="hljs-keyword">this</span>.type || <span class="hljs-string">'no type'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> type;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="comments--spaces"></a></p>
</li>
<li><p><a href="#comments--spaces">18.3</a> 用一个空格开始所有的注释，使它更容易阅读。 eslint: <a href="https://eslint.org/docs/rules/spaced-comment" target="_blank" rel="noopener"><code>spaced-comment</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-comment">//is current tab</span></span><br><span class="line"><span class="hljs-keyword">const</span> active = <span class="hljs-literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-comment">// is current tab</span></span><br><span class="line"><span class="hljs-keyword">const</span> active = <span class="hljs-literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> *make() returns a new element</span></span><br><span class="line"><span class="hljs-comment"> *based on the passed-in tag name</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">make</span>(<span class="hljs-params">tag</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> element;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * make() returns a new element</span></span><br><span class="line"><span class="hljs-comment"> * based on the passed-in tag name</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">make</span>(<span class="hljs-params">tag</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="comments--actionitems"></a><a name="17.3"></a></p>
</li>
<li><p><a href="#comments--actionitems">18.4</a> 使用 <code>FIXME</code> 或者 <code>TODO</code> 开始你的注释可以帮助其他开发人员快速了解，如果你提出了一个需要重新审视的问题，或者你对需要实现的问题提出的解决方案。 这些不同于其他评论，因为他们是可操作的。 这些行为是 <code>FIXME: -- 需要解决这个问题</code> 或者 <code>TODO: -- 需要被实现</code>。</p>
<p><a name="comments--fixme"></a><a name="17.4"></a></p>
</li>
<li><p><a href="#comments--fixme">18.5</a> 使用 <code>// FIXME:</code> 注释一个问题。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Calculator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Abacus</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="hljs-keyword">super</span>();</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">// <span class="hljs-doctag">FIXME:</span> 这里不应该使用全局变量</span></span><br><span class="line">    total = <span class="hljs-number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="comments--todo"></a><a name="17.5"></a></p>
</li>
<li><p><a href="#comments--todo">18.6</a> 使用 <code>// TODO:</code> 注释解决问题的方法。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Calculator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Abacus</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="hljs-keyword">super</span>();</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> total 应该由一个 param 的选项配置</span></span><br><span class="line">    <span class="hljs-keyword">this</span>.total = <span class="hljs-number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="空白"><a href="#空白" class="headerlink" title="空白"></a><a id="whitespace">空白</a></h2><p>  <a name="whitespace--spaces"></a><a name="18.1"></a></p>
<ul>
<li><p><a href="#whitespace--spaces">19.1</a> 使用 tabs (空格字符) 设置为 2 个空格。 eslint: <a href="https://eslint.org/docs/rules/indent.html" target="_blank" rel="noopener"><code>indent</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">∙∙∙∙<span class="hljs-keyword">let</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">∙<span class="hljs-keyword">let</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">baz</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">∙∙<span class="hljs-keyword">let</span> name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--before-blocks"></a><a name="18.2"></a></p>
</li>
<li><p><a href="#whitespace--before-blocks">19.2</a> 在主体前放置一个空格。 eslint: <a href="https://eslint.org/docs/rules/space-before-blocks.html" target="_blank" rel="noopener"><code>space-before-blocks</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'test'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'test'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">dog.set(<span class="hljs-string">'attr'</span>,&#123;</span><br><span class="line">  age: <span class="hljs-string">'1 year'</span>,</span><br><span class="line">  breed: <span class="hljs-string">'Bernese Mountain Dog'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">dog.set(<span class="hljs-string">'attr'</span>, &#123;</span><br><span class="line">  age: <span class="hljs-string">'1 year'</span>,</span><br><span class="line">  breed: <span class="hljs-string">'Bernese Mountain Dog'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--around-keywords"></a><a name="18.3"></a></p>
</li>
<li><p><a href="#whitespace--around-keywords">19.3</a> 在控制语句（<code>if</code>, <code>while</code> 等）开始括号之前放置一个空格。 在函数调用和是声明中，在参数列表和函数名之间没有空格。 eslint: <a href="https://eslint.org/docs/rules/keyword-spacing.html" target="_blank" rel="noopener"><code>keyword-spacing</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span>(isJedi) &#123;</span><br><span class="line">  fight ();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (isJedi) &#123;</span><br><span class="line">  fight();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fight</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log (<span class="hljs-string">'Swooosh!'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fight</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Swooosh!'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--infix-ops"></a><a name="18.4"></a></p>
</li>
<li><p><a href="#whitespace--infix-ops">19.4</a> 用空格分离操作符。 eslint: <a href="https://eslint.org/docs/rules/space-infix-ops.html" target="_blank" rel="noopener"><code>space-infix-ops</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> x=y+<span class="hljs-number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> x = y + <span class="hljs-number">5</span>;</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--newline-at-end"></a><a name="18.5"></a></p>
</li>
<li><p><a href="#whitespace--newline-at-end">19.5</a> 使用单个换行符结束文件。 eslint: <a href="https://github.com/eslint/eslint/blob/master/docs/rules/eol-last.md" target="_blank" rel="noopener"><code>eol-last</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">import</span> &#123; es6 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./AirbnbStyleGuide'</span>;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> es6;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">import</span> &#123; es6 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./AirbnbStyleGuide'</span>;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> es6;↵</span><br><span class="line">↵</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">import</span> &#123; es6 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./AirbnbStyleGuide'</span>;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> es6;↵</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--chains"></a><a name="18.6"></a></p>
</li>
<li><p><a href="#whitespace--chains">19.6</a> 在使用长方法连滴啊用的时候使用缩进(超过两个方法链)。 使用一个引导点，强调该行是方法调用，而不是新的语句。 eslint: <a href="https://eslint.org/docs/rules/newline-per-chained-call" target="_blank" rel="noopener"><code>newline-per-chained-call</code></a> <a href="https://eslint.org/docs/rules/no-whitespace-before-property" target="_blank" rel="noopener"><code>no-whitespace-before-property</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">$(<span class="hljs-string">'#items'</span>).find(<span class="hljs-string">'.selected'</span>).highlight().end().find(<span class="hljs-string">'.open'</span>).updateCount();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">$(<span class="hljs-string">'#items'</span>).</span><br><span class="line">  find(<span class="hljs-string">'.selected'</span>).</span><br><span class="line">    highlight().</span><br><span class="line">    end().</span><br><span class="line">  find(<span class="hljs-string">'.open'</span>).</span><br><span class="line">    updateCount();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">$(<span class="hljs-string">'#items'</span>)</span><br><span class="line">  .find(<span class="hljs-string">'.selected'</span>)</span><br><span class="line">    .highlight()</span><br><span class="line">    .end()</span><br><span class="line">  .find(<span class="hljs-string">'.open'</span>)</span><br><span class="line">    .updateCount();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> leds = stage.selectAll(<span class="hljs-string">'.led'</span>).data(data).enter().append(<span class="hljs-string">'svg:svg'</span>).classed(<span class="hljs-string">'led'</span>, <span class="hljs-literal">true</span>)</span><br><span class="line">    .attr(<span class="hljs-string">'width'</span>, (radius + margin) * <span class="hljs-number">2</span>).append(<span class="hljs-string">'svg:g'</span>)</span><br><span class="line">    .attr(<span class="hljs-string">'transform'</span>, <span class="hljs-string">`translate(<span class="hljs-subst">$&#123;radius + margin&#125;</span>,<span class="hljs-subst">$&#123;radius + margin&#125;</span>)`</span>)</span><br><span class="line">    .call(tron.led);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> leds = stage.selectAll(<span class="hljs-string">'.led'</span>)</span><br><span class="line">    .data(data)</span><br><span class="line">  .enter().append(<span class="hljs-string">'svg:svg'</span>)</span><br><span class="line">    .classed(<span class="hljs-string">'led'</span>, <span class="hljs-literal">true</span>)</span><br><span class="line">    .attr(<span class="hljs-string">'width'</span>, (radius + margin) * <span class="hljs-number">2</span>)</span><br><span class="line">  .append(<span class="hljs-string">'svg:g'</span>)</span><br><span class="line">    .attr(<span class="hljs-string">'transform'</span>, <span class="hljs-string">`translate(<span class="hljs-subst">$&#123;radius + margin&#125;</span>,<span class="hljs-subst">$&#123;radius + margin&#125;</span>)`</span>)</span><br><span class="line">    .call(tron.led);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> leds = stage.selectAll(<span class="hljs-string">'.led'</span>).data(data);</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--after-blocks"></a><a name="18.7"></a></p>
</li>
<li><p><a href="#whitespace--after-blocks">19.7</a> 在块和下一个语句之前留下一空白行。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> (foo) &#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> bar;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-keyword">return</span> baz;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (foo) &#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> bar;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">return</span> baz;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> obj = &#123;</span><br><span class="line">  foo() &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  bar() &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-keyword">return</span> obj;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> obj = &#123;</span><br><span class="line">  foo() &#123;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  bar() &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">return</span> obj;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> arr = [</span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="hljs-keyword">return</span> arr;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> arr = [</span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">return</span> arr;</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--padded-blocks"></a><a name="18.8"></a></p>
</li>
<li><p><a href="#whitespace--padded-blocks">19.8</a> 不要在块的开头使用空白行。 eslint: <a href="https://eslint.org/docs/rules/padded-blocks.html" target="_blank" rel="noopener"><code>padded-blocks</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-built_in">console</span>.log(foo);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> (baz) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-built_in">console</span>.log(qux);</span><br><span class="line">&#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(foo);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">constructor</span>(bar) &#123;</span><br><span class="line">    <span class="hljs-keyword">this</span>.bar = bar;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(foo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (baz) &#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(qux);</span><br><span class="line">&#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(foo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--in-parens"></a><a name="18.9"></a></p>
</li>
<li><p><a href="#whitespace--in-parens">19.9</a> 不要在括号内添加空格。 eslint: <a href="https://eslint.org/docs/rules/space-in-parens.html" target="_blank" rel="noopener"><code>space-in-parens</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"> foo </span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> foo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params">foo</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> foo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> ( foo ) &#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(foo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (foo) &#123;</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(foo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--in-brackets"></a><a name="18.10"></a></p>
</li>
<li><p><a href="#whitespace--in-brackets">19.10</a> 不要在中括号中添加空格。 eslint: <a href="https://eslint.org/docs/rules/array-bracket-spacing.html" target="_blank" rel="noopener"><code>array-bracket-spacing</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> ];</span><br><span class="line"><span class="hljs-built_in">console</span>.log(foo[ <span class="hljs-number">0</span> ]);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];</span><br><span class="line"><span class="hljs-built_in">console</span>.log(foo[<span class="hljs-number">0</span>]);</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--in-braces"></a><a name="18.11"></a></p>
</li>
<li><p><a href="#whitespace--in-braces">19.11</a> 在花括号内添加空格。 eslint: <a href="https://eslint.org/docs/rules/object-curly-spacing.html" target="_blank" rel="noopener"><code>object-curly-spacing</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = &#123;<span class="hljs-attr">clark</span>: <span class="hljs-string">'kent'</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = &#123; <span class="hljs-attr">clark</span>: <span class="hljs-string">'kent'</span> &#125;;</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--max-len"></a><a name="18.12"></a></p>
</li>
<li><p><a href="#whitespace--max-len">19.12</a> 避免让你的代码行超过100个字符（包括空格）。 注意：根据上边的 <a href="#strings--line-length">约束</a>，长字符串可免除此规定，不应分解。 eslint: <a href="https://eslint.org/docs/rules/max-len.html" target="_blank" rel="noopener"><code>max-len</code></a></p>
<blockquote>
<p>为什么? 这样能够确保可读性和可维护性。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = jsonData &amp;&amp; jsonData.foo &amp;&amp; jsonData.foo.bar &amp;&amp; jsonData.foo.bar.baz &amp;&amp; jsonData.foo.bar.baz.quux &amp;&amp; jsonData.foo.bar.baz.quux.xyzzy;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">$.ajax(&#123; <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, <span class="hljs-attr">url</span>: <span class="hljs-string">'https://airbnb.com/'</span>, <span class="hljs-attr">data</span>: &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span> &#125; &#125;).done(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Congratulations!'</span>)).fail(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'You have failed this city.'</span>));</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> foo = jsonData</span><br><span class="line">  &amp;&amp; jsonData.foo</span><br><span class="line">  &amp;&amp; jsonData.foo.bar</span><br><span class="line">  &amp;&amp; jsonData.foo.bar.baz</span><br><span class="line">  &amp;&amp; jsonData.foo.bar.baz.quux</span><br><span class="line">  &amp;&amp; jsonData.foo.bar.baz.quux.xyzzy;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">  method: <span class="hljs-string">'POST'</span>,</span><br><span class="line">  url: <span class="hljs-string">'https://airbnb.com/'</span>,</span><br><span class="line">  data: &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span> &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">  .done(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Congratulations!'</span>))</span><br><span class="line">  .fail(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'You have failed this city.'</span>));</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--block-spacing"></a></p>
</li>
<li><p><a href="#whitespace--block-spacing">19.13</a> 要求打开的块标志和同一行上的标志拥有一致的间距。此规则还会在同一行关闭的块标记和前边的标记强制实施一致的间距。 eslint: <a href="https://eslint.org/docs/rules/block-spacing" target="_blank" rel="noopener"><code>block-spacing</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#125;</span><br><span class="line"><span class="hljs-keyword">if</span> (foo) &#123; bar = <span class="hljs-number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; &#125;</span><br><span class="line"><span class="hljs-keyword">if</span> (foo) &#123; bar = <span class="hljs-number">0</span>; &#125;</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--comma-spacing"></a></p>
</li>
<li><p><a href="#whitespace--comma-spacing">19.14</a> 逗号之前避免使用空格，逗号之后需要使用空格。eslint: <a href="https://eslint.org/docs/rules/comma-spacing" target="_blank" rel="noopener"><code>comma-spacing</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">var</span> foo = <span class="hljs-number">1</span>,bar = <span class="hljs-number">2</span>;</span><br><span class="line"><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span> , <span class="hljs-number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">var</span> foo = <span class="hljs-number">1</span>, bar = <span class="hljs-number">2</span>;</span><br><span class="line"><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--computed-property-spacing"></a></p>
</li>
<li><p><a href="#whitespace--computed-property-spacing">19.15</a> 在计算属性之间强化间距。eslint: <a href="https://eslint.org/docs/rules/computed-property-spacing" target="_blank" rel="noopener"><code>computed-property-spacing</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">obj[foo ]</span><br><span class="line">obj[ <span class="hljs-string">'foo'</span>]</span><br><span class="line"><span class="hljs-keyword">var</span> x = &#123;[ b ]: a&#125;</span><br><span class="line">obj[foo[ bar ]]</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">obj[foo]</span><br><span class="line">obj[<span class="hljs-string">'foo'</span>]</span><br><span class="line"><span class="hljs-keyword">var</span> x = &#123; [b]: a &#125;</span><br><span class="line">obj[foo[bar]]</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--func-call-spacing"></a></p>
</li>
<li><p><a href="#whitespace--func-call-spacing">19.16</a> 在函数和它的调用之间强化间距。 eslint: <a href="https://eslint.org/docs/rules/func-call-spacing" target="_blank" rel="noopener"><code>func-call-spacing</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">func ();</span><br><span class="line"></span><br><span class="line">func</span><br><span class="line">();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">func();</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--key-spacing"></a></p>
</li>
<li><p><a href="#whitespace--key-spacing">19.17</a> 在对象的属性和值之间强化间距。 eslint: <a href="https://eslint.org/docs/rules/key-spacing" target="_blank" rel="noopener"><code>key-spacing</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">var</span> obj = &#123; <span class="hljs-string">"foo"</span> : <span class="hljs-number">42</span> &#125;;</span><br><span class="line"><span class="hljs-keyword">var</span> obj2 = &#123; <span class="hljs-string">"foo"</span>:<span class="hljs-number">42</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">var</span> obj = &#123; <span class="hljs-string">"foo"</span>: <span class="hljs-number">42</span> &#125;;</span><br></pre></td></tr></table></figure>

<p><a name="whitespace--no-trailing-spaces"></a></p>
</li>
<li><p><a href="#whitespace--no-trailing-spaces">19.18</a> 在行的末尾避免使用空格。 eslint: <a href="https://eslint.org/docs/rules/no-trailing-spaces" target="_blank" rel="noopener"><code>no-trailing-spaces</code></a></p>
<p><a name="whitespace--no-multiple-empty-lines"></a></p>
</li>
<li><p><a href="#whitespace--no-multiple-empty-lines">19.19</a> 避免多个空行，并且只允许在文件末尾添加一个换行符。 eslint: <a href="https://eslint.org/docs/rules/no-multiple-empty-lines" target="_blank" rel="noopener"><code>no-multiple-empty-lines</code></a></p>
<!-- markdownlint-disable MD012 -->
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">var</span> x = <span class="hljs-number">1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">var</span> y = <span class="hljs-number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">var</span> x = <span class="hljs-number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">var</span> y = <span class="hljs-number">2</span>;</span><br></pre></td></tr></table></figure>

<!-- markdownlint-enable MD012 -->

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="逗号"><a href="#逗号" class="headerlink" title="逗号"></a><a id="commas">逗号</a></h2><p>  <a name="commas--leading-trailing"></a><a name="19.1"></a></p>
<ul>
<li><p><a href="#commas--leading-trailing">20.1</a> 逗号前置： <strong>不行</strong> eslint: <a href="https://eslint.org/docs/rules/comma-style.html" target="_blank" rel="noopener"><code>comma-style</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> story = [</span><br><span class="line">    once</span><br><span class="line">  , upon</span><br><span class="line">  , aTime</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> story = [</span><br><span class="line">  once,</span><br><span class="line">  upon,</span><br><span class="line">  aTime,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> hero = &#123;</span><br><span class="line">    firstName: <span class="hljs-string">'Ada'</span></span><br><span class="line">  , <span class="hljs-attr">lastName</span>: <span class="hljs-string">'Lovelace'</span></span><br><span class="line">  , <span class="hljs-attr">birthYear</span>: <span class="hljs-number">1815</span></span><br><span class="line">  , <span class="hljs-attr">superPower</span>: <span class="hljs-string">'computers'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> hero = &#123;</span><br><span class="line">  firstName: <span class="hljs-string">'Ada'</span>,</span><br><span class="line">  lastName: <span class="hljs-string">'Lovelace'</span>,</span><br><span class="line">  birthYear: <span class="hljs-number">1815</span>,</span><br><span class="line">  superPower: <span class="hljs-string">'computers'</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a name="commas--dangling"></a><a name="19.2"></a></p>
</li>
<li><p><a href="#commas--dangling">20.2</a> 添加尾随逗号： <strong>可以</strong> eslint: <a href="https://eslint.org/docs/rules/comma-dangle.html" target="_blank" rel="noopener"><code>comma-dangle</code></a></p>
<blockquote>
<p>为什么? 这个将造成更清洁的 git 扩展差异。 另外，像 Babel 这样的编译器，会在转换后的代码中删除额外的尾随逗号，这意味着你不必担心在浏览器中后面的 <a href="https://github.com/airbnb/javascript/blob/es5-deprecated/es5/README.md#commas" target="_blank" rel="noopener">尾随逗号问题</a> 。</p>
</blockquote>
<figure class="highlight diff hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// bad - 没有尾随逗号的 git 差异</span><br><span class="line">const hero = &#123;</span><br><span class="line">     firstName: 'Florence',</span><br><span class="line"><span class="hljs-deletion">-    lastName: 'Nightingale'</span></span><br><span class="line"><span class="hljs-addition">+    lastName: 'Nightingale',</span></span><br><span class="line"><span class="hljs-addition">+    inventorOf: ['coxcomb chart', 'modern nursing']</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// good - 有尾随逗号的 git 差异</span><br><span class="line">const hero = &#123;</span><br><span class="line">     firstName: 'Florence',</span><br><span class="line">     lastName: 'Nightingale',</span><br><span class="line"><span class="hljs-addition">+    inventorOf: ['coxcomb chart', 'modern nursing'],</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> hero = &#123;</span><br><span class="line">  firstName: <span class="hljs-string">'Dana'</span>,</span><br><span class="line">  lastName: <span class="hljs-string">'Scully'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> heroes = [</span><br><span class="line">  <span class="hljs-string">'Batman'</span>,</span><br><span class="line">  <span class="hljs-string">'Superman'</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> hero = &#123;</span><br><span class="line">  firstName: <span class="hljs-string">'Dana'</span>,</span><br><span class="line">  lastName: <span class="hljs-string">'Scully'</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> heroes = [</span><br><span class="line">  <span class="hljs-string">'Batman'</span>,</span><br><span class="line">  <span class="hljs-string">'Superman'</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createHero</span>(<span class="hljs-params"></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  firstName,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  lastName,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  inventorOf</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// does nothing</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createHero</span>(<span class="hljs-params"></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  firstName,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  lastName,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  inventorOf,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// does nothing</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good (注意逗号不能出现在 "rest" 元素后边)</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createHero</span>(<span class="hljs-params"></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  firstName,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  lastName,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  inventorOf,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">  ...heroArgs</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// does nothing</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">createHero(</span><br><span class="line">  firstName,</span><br><span class="line">  lastName,</span><br><span class="line">  inventorOf</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">createHero(</span><br><span class="line">  firstName,</span><br><span class="line">  lastName,</span><br><span class="line">  inventorOf,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good (注意逗号不能出现在 "rest" 元素后边)</span></span><br><span class="line">createHero(</span><br><span class="line">  firstName,</span><br><span class="line">  lastName,</span><br><span class="line">  inventorOf,</span><br><span class="line">  ...heroArgs</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="分号"><a href="#分号" class="headerlink" title="分号"></a><a id="semicolons">分号</a></h2><p>  <a name="semicolons--required"></a><a name="20.1"></a></p>
<ul>
<li><p><a href="#semicolons--required">21.1</a> <strong>对</strong> eslint: <a href="https://eslint.org/docs/rules/semi.html" target="_blank" rel="noopener"><code>semi</code></a></p>
<blockquote>
<p>为什么? 当 JavaScript 遇见一个没有分号的换行符时，它会使用一个叫做 <a href="https://tc39.github.io/ecma262/#sec-automatic-semicolon-insertion" target="_blank" rel="noopener">Automatic Semicolon Insertion</a> 的规则来确定是否应该以换行符视为语句的结束，并且如果认为如此，会在代码中断前插入一个分号到代码中。 但是，ASI 包含了一些奇怪的行为，如果 JavaScript 错误的解释了你的换行符，你的代码将会中断。 随着新特性成为 JavaScript 的一部分，这些规则将变得更加复杂。 明确地终止你的语句，并配置你的 linter 以捕获缺少的分号将有助于防止你遇到的问题。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad - 可能异常</span></span><br><span class="line"><span class="hljs-keyword">const</span> luke = &#123;&#125;</span><br><span class="line"><span class="hljs-keyword">const</span> leia = &#123;&#125;</span><br><span class="line">[luke, leia].forEach(<span class="hljs-function"><span class="hljs-params">jedi</span> =&gt;</span> jedi.father = <span class="hljs-string">'vader'</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad - 可能异常</span></span><br><span class="line"><span class="hljs-keyword">const</span> reaction = <span class="hljs-string">"No! That's impossible!"</span></span><br><span class="line">(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">meanwhileOnTheFalcon</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// handle `leia`, `lando`, `chewie`, `r2`, `c3p0`</span></span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;())</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad - 返回 `undefined` 而不是下一行的值 - 当 `return` 单独一行的时候 ASI 总是会发生</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span></span><br><span class="line">    <span class="hljs-string">'search your feelings, you know it to be foo'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> luke = &#123;&#125;;</span><br><span class="line"><span class="hljs-keyword">const</span> leia = &#123;&#125;;</span><br><span class="line">[luke, leia].forEach(<span class="hljs-function">(<span class="hljs-params">jedi</span>) =&gt;</span> &#123;</span><br><span class="line">  jedi.father = <span class="hljs-string">'vader'</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> reaction = <span class="hljs-string">"No! That's impossible!"</span>;</span><br><span class="line">(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">meanwhileOnTheFalcon</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// handle `leia`, `lando`, `chewie`, `r2`, `c3p0`</span></span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-string">'search your feelings, you know it to be foo'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://stackoverflow.com/questions/7365172/semicolon-before-self-invoking-function/7365214#7365214" target="_blank" rel="noopener">更多信息</a>.</p>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="类型转换和强制类型转换"><a href="#类型转换和强制类型转换" class="headerlink" title="类型转换和强制类型转换"></a><a id="type-casting--coercion">类型转换和强制类型转换</a></h2><p>  <a name="coercion--explicit"></a><a name="21.1"></a></p>
<ul>
<li><p><a href="#coercion--explicit">22.1</a> 在语句开始前进行类型转换。</p>
<p><a name="coercion--strings"></a><a name="21.2"></a></p>
</li>
<li><p><a href="#coercion--strings">22.2</a>  字符类型： eslint: <a href="https://eslint.org/docs/rules/no-new-wrappers" target="_blank" rel="noopener"><code>no-new-wrappers</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// =&gt; this.reviewScore = 9;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> totalScore = <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(<span class="hljs-keyword">this</span>.reviewScore); <span class="hljs-comment">// typeof totalScore is "object" not "string"</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> totalScore = <span class="hljs-keyword">this</span>.reviewScore + <span class="hljs-string">''</span>; <span class="hljs-comment">// invokes this.reviewScore.valueOf()</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> totalScore = <span class="hljs-keyword">this</span>.reviewScore.toString(); <span class="hljs-comment">// isn’t guaranteed to return a string</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> totalScore = <span class="hljs-built_in">String</span>(<span class="hljs-keyword">this</span>.reviewScore);</span><br></pre></td></tr></table></figure>

<p><a name="coercion--numbers"></a><a name="21.3"></a></p>
</li>
<li><p><a href="#coercion--numbers">22.3</a> 数字类型：使用 <code>Number</code> 进行类型铸造和 <code>parseInt</code> 总是通过一个基数来解析一个字符串。 eslint: <a href="https://eslint.org/docs/rules/radix" target="_blank" rel="noopener"><code>radix</code></a> <a href="https://eslint.org/docs/rules/no-new-wrappers" target="_blank" rel="noopener"><code>no-new-wrappers</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> inputValue = <span class="hljs-string">'4'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> val = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(inputValue);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> val = +inputValue;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> val = inputValue &gt;&gt; <span class="hljs-number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> val = <span class="hljs-built_in">parseInt</span>(inputValue);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> val = <span class="hljs-built_in">Number</span>(inputValue);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> val = <span class="hljs-built_in">parseInt</span>(inputValue, <span class="hljs-number">10</span>);</span><br></pre></td></tr></table></figure>

<p><a name="coercion--comment-deviations"></a><a name="21.4"></a></p>
</li>
<li><p><a href="#coercion--comment-deviations">22.4</a> 如果出于某种原因，你正在做一些疯狂的事情，而 <code>parseInt</code> 是你的瓶颈，并且出于 <a href="https://jsperf.com/coercion-vs-casting/3" target="_blank" rel="noopener">性能问题</a> 需要使用位运算， 请写下注释，说明为什么这样做和你做了什么。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * parseInt 使我的代码变慢。</span></span><br><span class="line"><span class="hljs-comment"> * 位运算将一个字符串转换成数字更快。</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-keyword">const</span> val = inputValue &gt;&gt; <span class="hljs-number">0</span>;</span><br></pre></td></tr></table></figure>

<p><a name="coercion--bitwise"></a><a name="21.5"></a></p>
</li>
<li><p><a href="#coercion--bitwise">22.5</a> <strong>注意：</strong> 当你使用位运算的时候要小心。 数字总是被以 <a href="https://es5.github.io/#x4.3.19" target="_blank" rel="noopener">64-bit 值</a> 的形式表示，但是位运算总是返回一个 32-bit 的整数 (<a href="https://es5.github.io/#x11.7" target="_blank" rel="noopener">来源</a>)。 对于大于 32 位的整数值，位运算可能会导致意外行为。<a href="https://github.com/airbnb/javascript/issues/109" target="_blank" rel="noopener">讨论</a>。 最大的 32 位整数是： 2,147,483,647。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-number">2147483647</span> &gt;&gt; <span class="hljs-number">0</span>; <span class="hljs-comment">// =&gt; 2147483647</span></span><br><span class="line"><span class="hljs-number">2147483648</span> &gt;&gt; <span class="hljs-number">0</span>; <span class="hljs-comment">// =&gt; -2147483648</span></span><br><span class="line"><span class="hljs-number">2147483649</span> &gt;&gt; <span class="hljs-number">0</span>; <span class="hljs-comment">// =&gt; -2147483647</span></span><br></pre></td></tr></table></figure>

<p><a name="coercion--booleans"></a><a name="21.6"></a></p>
</li>
<li><p><a href="#coercion--booleans">22.6</a> 布尔类型： eslint: <a href="https://eslint.org/docs/rules/no-new-wrappers" target="_blank" rel="noopener"><code>no-new-wrappers</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> age = <span class="hljs-number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> hasAge = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Boolean</span>(age);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> hasAge = <span class="hljs-built_in">Boolean</span>(age);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// best</span></span><br><span class="line"><span class="hljs-keyword">const</span> hasAge = !!age;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="命名规范"><a href="#命名规范" class="headerlink" title="命名规范"></a><a id="naming-conventions">命名规范</a></h2><p>  <a name="naming--descriptive"></a><a name="22.1"></a></p>
<ul>
<li><p><a href="#naming--descriptive">23.1</a> 避免单字母的名字。用你的命名来描述功能。 eslint: <a href="https://eslint.org/docs/rules/id-length" target="_blank" rel="noopener"><code>id-length</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">q</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">query</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="naming--camelCase"></a><a name="22.2"></a></p>
</li>
<li><p><a href="#naming--camelCase">23.2</a> 在命名对象、函数和实例时使用驼峰命名法（camelCase）。 eslint: <a href="https://eslint.org/docs/rules/camelcase.html" target="_blank" rel="noopener"><code>camelcase</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> OBJEcttsssss = &#123;&#125;;</span><br><span class="line"><span class="hljs-keyword">const</span> this_is_my_object = &#123;&#125;;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">c</span>(<span class="hljs-params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> thisIsMyObject = &#123;&#125;;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">thisIsMyFunction</span>(<span class="hljs-params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p><a name="naming--PascalCase"></a><a name="22.3"></a></p>
</li>
<li><p><a href="#naming--PascalCase">23.3</a> 只有在命名构造器或者类的时候才用帕斯卡拼命名法（PascalCase）。 eslint: <a href="https://eslint.org/docs/rules/new-cap.html" target="_blank" rel="noopener"><code>new-cap</code></a></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">user</span>(<span class="hljs-params">options</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">this</span>.name = options.name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> bad = <span class="hljs-keyword">new</span> user(&#123;</span><br><span class="line">  name: <span class="hljs-string">'nope'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">constructor</span>(options) &#123;</span><br><span class="line">    <span class="hljs-keyword">this</span>.name = options.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> good = <span class="hljs-keyword">new</span> User(&#123;</span><br><span class="line">  name: <span class="hljs-string">'yup'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a name="naming--leading-underscore"></a><a name="22.4"></a></p>
</li>
<li><p><a href="#naming--leading-underscore">23.4</a> 不要使用前置或者后置下划线。 eslint: <a href="https://eslint.org/docs/rules/no-underscore-dangle.html" target="_blank" rel="noopener"><code>no-underscore-dangle</code></a></p>
<blockquote>
<p>为什么? JavaScript 在属性和方法方面没有隐私设置。 虽然前置的下划线是一种常见的惯例，意思是 “private” ，事实上，这些属性时公开的，因此，它们也是你公共 API 的一部分。 这种约定可能导致开发人员错误的认为更改不会被视为中断，或者不需要测试。建议：如果你想要什么东西是 “private” ， 那就一定不能有明显的表现。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">this</span>.__firstName__ = <span class="hljs-string">'Panda'</span>;</span><br><span class="line"><span class="hljs-keyword">this</span>.firstName_ = <span class="hljs-string">'Panda'</span>;</span><br><span class="line"><span class="hljs-keyword">this</span>._firstName = <span class="hljs-string">'Panda'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">this</span>.firstName = <span class="hljs-string">'Panda'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 好，在 WeakMapx 可用的环境中</span></span><br><span class="line"><span class="hljs-comment">// see https://kangax.github.io/compat-table/es6/#test-WeakMap</span></span><br><span class="line"><span class="hljs-keyword">const</span> firstNames = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>();</span><br><span class="line">firstNames.set(<span class="hljs-keyword">this</span>, <span class="hljs-string">'Panda'</span>);</span><br></pre></td></tr></table></figure>

<p><a name="naming--self-this"></a><a name="22.5"></a></p>
</li>
<li><p><a href="#naming--self-this">23.5</a> 不要保存 <code>this</code> 的引用。 使用箭头函数或者 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" target="_blank" rel="noopener">函数#bind</a>。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> self = <span class="hljs-keyword">this</span>;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(self);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> that = <span class="hljs-keyword">this</span>;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(that);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="naming--filename-matches-export"></a><a name="22.6"></a></p>
</li>
<li><p><a href="#naming--filename-matches-export">23.6</a> 文件名应该和默认导出的名称完全匹配。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// file 1 contents</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CheckBox</span> </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> CheckBox;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// file 2 contents</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fortyTwo</span>(<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// file 3 contents</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">insideDirectory</span>(<span class="hljs-params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// in some other file</span></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">import</span> CheckBox <span class="hljs-keyword">from</span> <span class="hljs-string">'./checkBox'</span>; <span class="hljs-comment">// PascalCase import/export, camelCase filename</span></span><br><span class="line"><span class="hljs-keyword">import</span> FortyTwo <span class="hljs-keyword">from</span> <span class="hljs-string">'./FortyTwo'</span>; <span class="hljs-comment">// PascalCase import/filename, camelCase export</span></span><br><span class="line"><span class="hljs-keyword">import</span> InsideDirectory <span class="hljs-keyword">from</span> <span class="hljs-string">'./InsideDirectory'</span>; <span class="hljs-comment">// PascalCase import/filename, camelCase export</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">import</span> CheckBox <span class="hljs-keyword">from</span> <span class="hljs-string">'./check_box'</span>; <span class="hljs-comment">// PascalCase import/export, snake_case filename</span></span><br><span class="line"><span class="hljs-keyword">import</span> forty_two <span class="hljs-keyword">from</span> <span class="hljs-string">'./forty_two'</span>; <span class="hljs-comment">// snake_case import/filename, camelCase export</span></span><br><span class="line"><span class="hljs-keyword">import</span> inside_directory <span class="hljs-keyword">from</span> <span class="hljs-string">'./inside_directory'</span>; <span class="hljs-comment">// snake_case import, camelCase export</span></span><br><span class="line"><span class="hljs-keyword">import</span> index <span class="hljs-keyword">from</span> <span class="hljs-string">'./inside_directory/index'</span>; <span class="hljs-comment">// requiring the index file explicitly</span></span><br><span class="line"><span class="hljs-keyword">import</span> insideDirectory <span class="hljs-keyword">from</span> <span class="hljs-string">'./insideDirectory/index'</span>; <span class="hljs-comment">// requiring the index file explicitly</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">import</span> CheckBox <span class="hljs-keyword">from</span> <span class="hljs-string">'./CheckBox'</span>; <span class="hljs-comment">// PascalCase export/import/filename</span></span><br><span class="line"><span class="hljs-keyword">import</span> fortyTwo <span class="hljs-keyword">from</span> <span class="hljs-string">'./fortyTwo'</span>; <span class="hljs-comment">// camelCase export/import/filename</span></span><br><span class="line"><span class="hljs-keyword">import</span> insideDirectory <span class="hljs-keyword">from</span> <span class="hljs-string">'./insideDirectory'</span>; <span class="hljs-comment">// camelCase export/import/directory name/implicit "index"</span></span><br><span class="line"><span class="hljs-comment">// ^ supports both insideDirectory.js and insideDirectory/index.js</span></span><br></pre></td></tr></table></figure>

<p><a name="naming--camelCase-default-export"></a><a name="22.7"></a></p>
</li>
<li><p><a href="#naming--camelCase-default-export">23.7</a> 当你导出默认函数时使用驼峰命名法。 你的文件名应该和方法名相同。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeStyleGuide</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> makeStyleGuide;</span><br></pre></td></tr></table></figure>

<p><a name="naming--PascalCase-singleton"></a><a name="22.8"></a></p>
</li>
<li><p><a href="#naming--PascalCase-singleton">23.8</a> 当你导出一个构造器 / 类 / 单例 / 函数库 / 暴露的对象时应该使用帕斯卡命名法。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> AirbnbStyleGuide = &#123;</span><br><span class="line">  es6: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> AirbnbStyleGuide;</span><br></pre></td></tr></table></figure>

<p><a name="naming--Acronyms-and-Initialisms"></a></p>
</li>
<li><p><a href="#naming--Acronyms-and-Initialisms">23.9</a> 缩略词和缩写都必须是全部大写或者全部小写。</p>
<blockquote>
<p>为什么? 名字是为了可读性，不是为了满足计算机算法。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">import</span> SmsContainer <span class="hljs-keyword">from</span> <span class="hljs-string">'./containers/SmsContainer'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> HttpRequests = [</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">import</span> SMSContainer <span class="hljs-keyword">from</span> <span class="hljs-string">'./containers/SMSContainer'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> HTTPRequests = [</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// also good</span></span><br><span class="line"><span class="hljs-keyword">const</span> httpRequests = [</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// best</span></span><br><span class="line"><span class="hljs-keyword">import</span> TextMessageContainer <span class="hljs-keyword">from</span> <span class="hljs-string">'./containers/TextMessageContainer'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// best</span></span><br><span class="line"><span class="hljs-keyword">const</span> requests = [</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p><a name="naming--uppercase"></a></p>
</li>
<li><p><a href="#naming--uppercase">23.10</a> 你可以大写一个常亮，如果它：（1）被导出，（2）使用 <code>const</code> 定义（不能被重新分配），（3）程序员可以信任它（以及其嵌套的属性）是不变的。</p>
<blockquote>
<p>为什么? 这是一个可以帮助程序员确定变量是否会发生变化的辅助工具。UPPERCASE_VARIABLES 可以让程序员知道他们可以相信变量（及其属性）不会改变。</p>
<ul>
<li>是否是对所有的 <code>const</code> 定义的变量？ - 这个是没哟必要的，不应该在文件中使用大学。但是，它应该用于导出常量。</li>
<li>导出对象呢？ - 在顶级导出属性 (e.g. <code>EXPORTED_OBJECT.key</code>) 并且保持所有嵌套属性不变。</li>
</ul>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> PRIVATE_VARIABLE = <span class="hljs-string">'should not be unnecessarily uppercased within a file'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> THING_TO_BE_CHANGED = <span class="hljs-string">'should obviously not be uppercased'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> REASSIGNABLE_VARIABLE = <span class="hljs-string">'do not use let with uppercase variables'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ---</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 允许，但是不提供语义值</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> apiKey = <span class="hljs-string">'SOMEKEY'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 多数情况下，很好</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> API_KEY = <span class="hljs-string">'SOMEKEY'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ---</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad - 不必要大写 key 没有增加语义值</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> MAPPING = &#123;</span><br><span class="line">  KEY: <span class="hljs-string">'value'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> MAPPING = &#123;</span><br><span class="line">  key: <span class="hljs-string">'value'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="存取器"><a href="#存取器" class="headerlink" title="存取器"></a><a id="accessors">存取器</a></h2><p>  <a name="accessors--not-required"></a><a name="23.1"></a></p>
<ul>
<li><p><a href="#accessors--not-required">24.1</a> 对于属性的的存取函数不是必须的。</p>
<p><a name="accessors--no-getters-setters"></a><a name="23.2"></a></p>
</li>
<li><p><a href="#accessors--no-getters-setters">24.2</a> 不要使用 JavaScript 的 getters/setters 方法，因为它们会导致意外的副作用，并且更加难以测试、维护和推敲。 相应的，如果你需要存取函数的时候使用 <code>getVal()</code> 和 <code>setVal(&#39;hello&#39;)</code>。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dragon</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">get</span> age() &#123;</span><br><span class="line">    <span class="hljs-comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">set</span> age(value) &#123;</span><br><span class="line">    <span class="hljs-comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dragon</span> </span>&#123;</span><br><span class="line">  getAge() &#123;</span><br><span class="line">    <span class="hljs-comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setAge(value) &#123;</span><br><span class="line">    <span class="hljs-comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="accessors--boolean-prefix"></a><a name="23.3"></a></p>
</li>
<li><p><a href="#accessors--boolean-prefix">24.3</a> 如果属性/方法是一个 <code>boolean</code> 值，使用 <code>isVal()</code> 或者 <code>hasVal()</code>。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">if</span> (!dragon.age()) &#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">if</span> (!dragon.hasAge()) &#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="accessors--consistent"></a><a name="23.4"></a></p>
</li>
<li><p><a href="#accessors--consistent">24.4</a> 可以创建 <code>get()</code> 和 <code>set()</code> 方法，但是要保证一致性。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Jedi</span> </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">constructor</span>(options = &#123;&#125;) &#123;</span><br><span class="line">    <span class="hljs-keyword">const</span> lightsaber = options.lightsaber || <span class="hljs-string">'blue'</span>;</span><br><span class="line">    <span class="hljs-keyword">this</span>.set(<span class="hljs-string">'lightsaber'</span>, lightsaber);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">set</span>(key, val) &#123;</span><br><span class="line">    <span class="hljs-keyword">this</span>[key] = val;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">get</span>(key) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[key];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a><a id="events">事件</a></h2><p>  <a name="events--hash"></a><a name="24.1"></a></p>
<ul>
<li><p><a href="#events--hash">25.1</a> 当给事件（无论是 DOM 事件还是更加私有的事件）附加数据时，传入一个对象（通畅也叫做 “hash” ） 而不是原始值。 这样可以让后边的贡献者向事件数据添加更多的数据，而不用找出更新事件的每个处理器。 例如，不好的写法：</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">$(<span class="hljs-keyword">this</span>).trigger(<span class="hljs-string">'listingUpdated'</span>, listing.id);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ...</span></span><br><span class="line"></span><br><span class="line">$(<span class="hljs-keyword">this</span>).on(<span class="hljs-string">'listingUpdated'</span>, (e, listingID) =&gt; &#123;</span><br><span class="line">  <span class="hljs-comment">// do something with listingID</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>更好的写法：</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">$(<span class="hljs-keyword">this</span>).trigger(<span class="hljs-string">'listingUpdated'</span>, &#123; <span class="hljs-attr">listingID</span>: listing.id &#125;);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// ...</span></span><br><span class="line"></span><br><span class="line">$(<span class="hljs-keyword">this</span>).on(<span class="hljs-string">'listingUpdated'</span>, (e, data) =&gt; &#123;</span><br><span class="line">  <span class="hljs-comment">// do something with data.listingID</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>  <strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h2><p>  <a name="jquery--dollar-prefix"></a><a name="25.1"></a></p>
<ul>
<li><p><a href="#jquery--dollar-prefix">26.1</a> 对于 jQuery 对象的变量使用 <code>$</code> 作为前缀。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-keyword">const</span> sidebar = $(<span class="hljs-string">'.sidebar'</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> $sidebar = $(<span class="hljs-string">'.sidebar'</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-keyword">const</span> $sidebarBtn = $(<span class="hljs-string">'.sidebar-btn'</span>);</span><br></pre></td></tr></table></figure>

<p><a name="jquery--cache"></a><a name="25.2"></a></p>
</li>
<li><p><a href="#jquery--cache">26.2</a> 缓存 jQuery 查询。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setSidebar</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="hljs-string">'.sidebar'</span>).hide();</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line"></span><br><span class="line">  $(<span class="hljs-string">'.sidebar'</span>).css(&#123;</span><br><span class="line">    <span class="hljs-string">'background-color'</span>: <span class="hljs-string">'pink'</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setSidebar</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">const</span> $sidebar = $(<span class="hljs-string">'.sidebar'</span>);</span><br><span class="line">  $sidebar.hide();</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line"></span><br><span class="line">  $sidebar.css(&#123;</span><br><span class="line">    <span class="hljs-string">'background-color'</span>: <span class="hljs-string">'pink'</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="jquery--queries"></a><a name="25.3"></a></p>
</li>
<li><p><a href="#jquery--queries">26.3</a> 对于 DOM 查询使用层叠 <code>$(&#39;.sidebar ul&#39;)</code> 或 父元素 &gt; 子元素 <code>$(&#39;.sidebar &gt; ul&#39;)</code> 的格式。 <a href="http://jsperf.com/jquery-find-vs-context-sel/16" target="_blank" rel="noopener">jsPerf</a></p>
<p><a name="jquery--find"></a><a name="25.4"></a></p>
</li>
<li><p><a href="#jquery--find">26.4</a> 对于有作用域的 jQuery 对象查询使用 <code>find</code> 。</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">$(<span class="hljs-string">'ul'</span>, <span class="hljs-string">'.sidebar'</span>).hide();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line">$(<span class="hljs-string">'.sidebar'</span>).find(<span class="hljs-string">'ul'</span>).hide();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">$(<span class="hljs-string">'.sidebar ul'</span>).hide();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">$(<span class="hljs-string">'.sidebar &gt; ul'</span>).hide();</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line">$sidebar.find(<span class="hljs-string">'ul'</span>).hide();</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="ECMAScript-5-兼容性"><a href="#ECMAScript-5-兼容性" class="headerlink" title="ECMAScript 5 兼容性"></a><a id="ecmascript-5-compatibility">ECMAScript 5 兼容性</a></h2><p>  <a name="es5-compat--kangax"></a><a name="26.1"></a></p>
<ul>
<li><a href="#es5-compat--kangax">27.1</a> 参考 <a href="https://twitter.com/kangax/" target="_blank" rel="noopener">Kangax</a>的 ES5 <a href="https://kangax.github.io/es5-compat-table/" target="_blank" rel="noopener">兼容性表格</a>。</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="ecmascript-6-styles"></a></p>
<h2 id="ECMAScript-6-ES-2015-Styles"><a href="#ECMAScript-6-ES-2015-Styles" class="headerlink" title="ECMAScript 6+ (ES 2015+) Styles"></a>ECMAScript 6+ (ES 2015+) Styles</h2><p>  <a name="es6-styles"></a><a name="27.1"></a></p>
<ul>
<li><a href="#es6-styles">28.1</a> 这是一个链接到各种 ES6+ 特性的集合。</li>
</ul>
<ol>
<li><p><a href="#arrow-functions">箭头函数</a></p>
</li>
<li><p><a href="#classes--constructors">类</a></p>
</li>
<li><p><a href="#es6-object-shorthand">对象简写</a></p>
</li>
<li><p><a href="#es6-object-concise">对象简洁</a></p>
</li>
<li><p><a href="#es6-computed-properties">对象计算属性</a></p>
</li>
<li><p><a href="#es6-template-literals">字符串模板</a></p>
</li>
<li><p><a href="#destructuring">解构</a></p>
</li>
<li><p><a href="#es6-default-parameters">默认参数</a></p>
</li>
<li><p><a href="#es6-rest">Rest</a></p>
</li>
<li><p><a href="#es6-array-spreads">数组展开</a></p>
</li>
<li><p><a href="#references">Let 和 Const</a></p>
</li>
<li><p><a href="#es2016-properties--exponentiation-operator">求幂运算符</a></p>
</li>
<li><p><a href="#iterators-and-generators">迭代器和发生器</a></p>
</li>
<li><p><a href="#modules">模块</a></p>
<p><a name="tc39-proposals"></a></p>
<ul>
<li><p><a href="#tc39-proposals">28.2</a> 不要使用尚未达到第3阶段的 <a href="https://github.com/tc39/proposals" target="_blank" rel="noopener">TC39 建议</a>。</p>
<blockquote>
<p>为什么? <a href="https://tc39.github.io/process-document/" target="_blank" rel="noopener">它们没有最终确定</a>， 并且它们可能会被改变或完全撤回。我们希望使用JavaScript，而建议还不是JavaScript。</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="标准库"><a href="#标准库" class="headerlink" title="标准库"></a><a id="standard-library">标准库</a></h2><p>  <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects" target="_blank" rel="noopener">标准库</a><br>  包含功能已损坏的实用工具，但因为遗留原因而保留。</p>
<p>  <a name="standard-library--isnan"></a></p>
<ul>
<li><p><a href="#standard-library--isnan">29.1</a> 使用 <code>Number.isNaN</code> 代替全局的 <code>isNaN</code>.<br>eslint: <a href="https://eslint.org/docs/rules/no-restricted-globals" target="_blank" rel="noopener"><code>no-restricted-globals</code></a></p>
<blockquote>
<p>为什么? 全局的 <code>isNaN</code> 强制非数字转化为数字，对任何强制转化为 NaN 的东西都返回 true。</p>
</blockquote>
<blockquote>
<p>如果需要这种行为，请明确说明。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-built_in">isNaN</span>(<span class="hljs-string">'1.2'</span>); <span class="hljs-comment">// false</span></span><br><span class="line"><span class="hljs-built_in">isNaN</span>(<span class="hljs-string">'1.2.3'</span>); <span class="hljs-comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-built_in">Number</span>.isNaN(<span class="hljs-string">'1.2.3'</span>); <span class="hljs-comment">// false</span></span><br><span class="line"><span class="hljs-built_in">Number</span>.isNaN(<span class="hljs-built_in">Number</span>(<span class="hljs-string">'1.2.3'</span>)); <span class="hljs-comment">// true</span></span><br></pre></td></tr></table></figure>

<p><a name="standard-library--isfinite"></a></p>
</li>
<li><p><a href="#standard-library--isfinite">29.2</a> 使用 <code>Number.isFinite</code> 代替全局的 <code>isFinite</code>.<br>eslint: <a href="https://eslint.org/docs/rules/no-restricted-globals" target="_blank" rel="noopener"><code>no-restricted-globals</code></a></p>
<blockquote>
<p>为什么? 全局的 <code>isFinite</code> 强制非数字转化为数字，对任何强制转化为有限数字的东西都返回 true。</p>
</blockquote>
<blockquote>
<p>如果需要这种行为，请明确说明。</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// bad</span></span><br><span class="line"><span class="hljs-built_in">isFinite</span>(<span class="hljs-string">'2e3'</span>); <span class="hljs-comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// good</span></span><br><span class="line"><span class="hljs-built_in">Number</span>.isFinite(<span class="hljs-string">'2e3'</span>); <span class="hljs-comment">// false</span></span><br><span class="line"><span class="hljs-built_in">Number</span>.isFinite(<span class="hljs-built_in">parseInt</span>(<span class="hljs-string">'2e3'</span>, <span class="hljs-number">10</span>)); <span class="hljs-comment">// true</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2><p>  <a name="testing--yup"></a><a name="28.1"></a></p>
<ul>
<li><p><a href="#testing--yup">30.1</a> <strong>是的.</strong></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="testing--for-real"></a><a name="28.2"></a></p>
</li>
<li><p><a href="#testing--for-real">30.2</a> <strong>没有，但是认真</strong>:</p>
<ul>
<li>无论你使用那种测试框架，都应该编写测试！</li>
<li>努力写出许多小的纯函数，并尽量减少发生错误的地方。</li>
<li>对于静态方法和 mock 要小心—-它们会使你的测试更加脆弱。</li>
<li>我们主要在 Airbnb 上使用 <a href="https://www.npmjs.com/package/mocha" target="_blank" rel="noopener"><code>mocha</code></a> 和 <a href="https://www.npmjs.com/package/jest" target="_blank" rel="noopener"><code>jest</code></a> 。 <a href="https://www.npmjs.com/package/tape" target="_blank" rel="noopener"><code>tape</code></a> 也会用在一些小的独立模块上。</li>
<li>100%的测试覆盖率是一个很好的目标，即使它并不总是可行的。</li>
<li>无论何时修复bug，都要编写一个回归测试。在没有回归测试的情况下修复的bug在将来几乎肯定会再次崩溃。</li>
</ul>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="性能"><a href="#性能" class="headerlink" title="性能"></a><a id="performance">性能</a></h2><ul>
<li><a href="https://www.kellegous.com/j/2013/01/26/layout-performance/" target="_blank" rel="noopener">On Layout &amp; Web Performance</a></li>
<li><a href="https://jsperf.com/string-vs-array-concat/2" target="_blank" rel="noopener">String vs Array Concat</a></li>
<li><a href="https://jsperf.com/try-catch-in-loop-cost" target="_blank" rel="noopener">Try/Catch Cost In a Loop</a></li>
<li><a href="https://jsperf.com/bang-function" target="_blank" rel="noopener">Bang Function</a></li>
<li><a href="https://jsperf.com/jquery-find-vs-context-sel/13" target="_blank" rel="noopener">jQuery Find vs Context, Selector</a></li>
<li><a href="https://jsperf.com/innerhtml-vs-textcontent-for-script-text" target="_blank" rel="noopener">innerHTML vs textContent for script text</a></li>
<li><a href="https://jsperf.com/ya-string-concat" target="_blank" rel="noopener">Long String Concatenation</a></li>
<li><a href="https://www.quora.com/JavaScript-programming-language-Are-Javascript-functions-like-map-reduce-and-filter-already-optimized-for-traversing-array/answer/Quildreen-Motta" target="_blank" rel="noopener">Are Javascript functions like <code>map()</code>, <code>reduce()</code>, and <code>filter()</code> optimized for traversing arrays?</a></li>
<li>Loading…</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a><a id="resources">资源</a></h2><p><strong>学习 ES6+</strong></p>
<ul>
<li><a href="https://tc39.github.io/ecma262/" target="_blank" rel="noopener">Latest ECMA spec</a></li>
<li><a href="http://exploringjs.com/" target="_blank" rel="noopener">ExploringJS</a></li>
<li><a href="https://kangax.github.io/compat-table/es6/" target="_blank" rel="noopener">ES6 Compatibility Table</a></li>
<li><a href="http://es6-features.org/" target="_blank" rel="noopener">Comprehensive Overview of ES6 Features</a></li>
</ul>
<p><strong>读这个</strong></p>
<ul>
<li><a href="http://www.ecma-international.org/ecma-262/6.0/index.html" target="_blank" rel="noopener">Standard ECMA-262</a></li>
</ul>
<p><strong>工具</strong></p>
<ul>
<li>Code Style Linters<ul>
<li><a href="https://eslint.org/" target="_blank" rel="noopener">ESlint</a> - <a href="https://github.com/airbnb/javascript/blob/master/linters/.eslintrc" target="_blank" rel="noopener">Airbnb Style .eslintrc</a></li>
<li><a href="http://jshint.com/" target="_blank" rel="noopener">JSHint</a> - <a href="https://github.com/airbnb/javascript/blob/master/linters/.jshintrc" target="_blank" rel="noopener">Airbnb Style .jshintrc</a></li>
</ul>
</li>
<li>Neutrino preset - <a href="https://neutrino.js.org/presets/neutrino-preset-airbnb-base/" target="_blank" rel="noopener">neutrino-preset-airbnb-base</a></li>
</ul>
<p><strong>其他编码规范</strong></p>
<ul>
<li><a href="https://google.github.io/styleguide/javascriptguide.xml" target="_blank" rel="noopener">Google JavaScript Style Guide</a></li>
<li><a href="https://contribute.jquery.org/style-guide/js/" target="_blank" rel="noopener">jQuery Core Style Guidelines</a></li>
<li><a href="https://github.com/rwaldron/idiomatic.js" target="_blank" rel="noopener">Principles of Writing Consistent, Idiomatic JavaScript</a></li>
<li><a href="https://standardjs.com" target="_blank" rel="noopener">StandardJS</a></li>
</ul>
<p><strong>其他风格</strong></p>
<ul>
<li><a href="https://gist.github.com/cjohansen/4135065" target="_blank" rel="noopener">Naming this in nested functions</a> - Christian Johansen</li>
<li><a href="https://github.com/airbnb/javascript/issues/52" target="_blank" rel="noopener">Conditional Callbacks</a> - Ross Allen</li>
<li><a href="http://sideeffect.kr/popularconvention/#javascript" target="_blank" rel="noopener">Popular JavaScript Coding Conventions on GitHub</a> - JeongHoon Byun</li>
<li><a href="http://benalman.com/news/2012/05/multiple-var-statements-javascript/" target="_blank" rel="noopener">Multiple var statements in JavaScript, not superfluous</a> - Ben Alman</li>
</ul>
<p><strong>进一步阅读</strong></p>
<ul>
<li><a href="https://javascriptweblog.wordpress.com/2010/10/25/understanding-javascript-closures/" target="_blank" rel="noopener">Understanding JavaScript Closures</a> - Angus Croll</li>
<li><a href="http://www.2ality.com/2013/06/basic-javascript.html" target="_blank" rel="noopener">Basic JavaScript for the impatient programmer</a> - Dr. Axel Rauschmayer</li>
<li><a href="http://youmightnotneedjquery.com/" target="_blank" rel="noopener">You Might Not Need jQuery</a> - Zack Bloom &amp; Adam Schwartz</li>
<li><a href="https://github.com/lukehoban/es6features" target="_blank" rel="noopener">ES6 Features</a> - Luke Hoban</li>
<li><a href="https://github.com/bendc/frontend-guidelines" target="_blank" rel="noopener">Frontend Guidelines</a> - Benjamin De Cock</li>
</ul>
<p><strong>书籍</strong></p>
<ul>
<li><a href="https://www.amazon.com/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742" target="_blank" rel="noopener">JavaScript: The Good Parts</a> - Douglas Crockford</li>
<li><a href="https://www.amazon.com/JavaScript-Patterns-Stoyan-Stefanov/dp/0596806752" target="_blank" rel="noopener">JavaScript Patterns</a> - Stoyan Stefanov</li>
<li><a href="https://www.amazon.com/JavaScript-Design-Patterns-Recipes-Problem-Solution/dp/159059908X" target="_blank" rel="noopener">Pro JavaScript Design Patterns</a>  - Ross Harmes and Dustin Diaz</li>
<li><a href="https://www.amazon.com/High-Performance-Web-Sites-Essential/dp/0596529309" target="_blank" rel="noopener">High Performance Web Sites: Essential Knowledge for Front-End Engineers</a> - Steve Souders</li>
<li><a href="https://www.amazon.com/Maintainable-JavaScript-Nicholas-C-Zakas/dp/1449327680" target="_blank" rel="noopener">Maintainable JavaScript</a> - Nicholas C. Zakas</li>
<li><a href="https://www.amazon.com/JavaScript-Web-Applications-Alex-MacCaw/dp/144930351X" target="_blank" rel="noopener">JavaScript Web Applications</a> - Alex MacCaw</li>
<li><a href="https://www.amazon.com/Pro-JavaScript-Techniques-John-Resig/dp/1590597273" target="_blank" rel="noopener">Pro JavaScript Techniques</a> - John Resig</li>
<li><a href="https://www.amazon.com/Smashing-Node-js-JavaScript-Everywhere-Magazine/dp/1119962595" target="_blank" rel="noopener">Smashing Node.js: JavaScript Everywhere</a> - Guillermo Rauch</li>
<li><a href="https://www.amazon.com/Secrets-JavaScript-Ninja-John-Resig/dp/193398869X" target="_blank" rel="noopener">Secrets of the JavaScript Ninja</a> - John Resig and Bear Bibeault</li>
<li><a href="http://humanjavascript.com/" target="_blank" rel="noopener">Human JavaScript</a> - Henrik Joreteg</li>
<li><a href="http://superherojs.com/" target="_blank" rel="noopener">Superhero.js</a> - Kim Joar Bekkelund, Mads Mobæk, &amp; Olav Bjorkoy</li>
<li><a href="http://jsbooks.revolunet.com/" target="_blank" rel="noopener">JSBooks</a> - Julien Bouquillon</li>
<li><a href="https://www.manning.com/books/third-party-javascript" target="_blank" rel="noopener">Third Party JavaScript</a> - Ben Vinegar and Anton Kovalyov</li>
<li><a href="http://amzn.com/0321812182" target="_blank" rel="noopener">Effective JavaScript: 68 Specific Ways to Harness the Power of JavaScript</a> - David Herman</li>
<li><a href="http://eloquentjavascript.net/" target="_blank" rel="noopener">Eloquent JavaScript</a> - Marijn Haverbeke</li>
<li><a href="http://shop.oreilly.com/product/0636920033769.do" target="_blank" rel="noopener">You Don’t Know JS: ES6 &amp; Beyond</a> - Kyle Simpson</li>
</ul>
<p><strong>博客</strong></p>
<ul>
<li><a href="http://javascriptweekly.com/" target="_blank" rel="noopener">JavaScript Weekly</a></li>
<li><a href="https://javascriptweblog.wordpress.com/" target="_blank" rel="noopener">JavaScript, JavaScript…</a></li>
<li><a href="https://bocoup.com/weblog" target="_blank" rel="noopener">Bocoup Weblog</a></li>
<li><a href="http://www.adequatelygood.com/" target="_blank" rel="noopener">Adequately Good</a></li>
<li><a href="https://www.nczonline.net/" target="_blank" rel="noopener">NCZOnline</a></li>
<li><a href="http://perfectionkills.com/" target="_blank" rel="noopener">Perfection Kills</a></li>
<li><a href="http://benalman.com/" target="_blank" rel="noopener">Ben Alman</a></li>
<li><a href="http://dmitry.baranovskiy.com/" target="_blank" rel="noopener">Dmitry Baranovskiy</a></li>
<li><a href="http://code.tutsplus.com/?s=javascript" target="_blank" rel="noopener">nettuts</a></li>
</ul>
<p><strong>播客</strong></p>
<ul>
<li><a href="https://javascriptair.com/" target="_blank" rel="noopener">JavaScript Air</a></li>
<li><a href="https://devchat.tv/js-jabber/" target="_blank" rel="noopener">JavaScript Jabber</a></li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="JavaScript风格指南的指南"><a href="#JavaScript风格指南的指南" class="headerlink" title="JavaScript风格指南的指南"></a><a id="the-javascript-style-guide-guide">JavaScript风格指南的指南</a></h2><ul>
<li><a href="https://github.com/airbnb/javascript/wiki/The-JavaScript-Style-Guide-Guide" target="_blank" rel="noopener">Reference</a></li>
</ul>
<h2 id="许可证"><a href="#许可证" class="headerlink" title="许可证"></a><a id="license">许可证</a></h2><p>(The MIT License)</p>
<p>Copyright (c) 2012 康兵奎</p>
<p>Permission is hereby granted, free of charge, to any person obtaining<br>a copy of this software and associated documentation files (the<br>‘Software’), to deal in the Software without restriction, including<br>without limitation the rights to use, copy, modify, merge, publish,<br>distribute, sublicense, and/or sell copies of the Software, and to<br>permit persons to whom the Software is furnished to do so, subject to<br>the following conditions:</p>
<p>The above copyright notice and this permission notice shall be<br>included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED ‘AS IS’, WITHOUT WARRANTY OF ANY KIND,<br>EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF<br>MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.<br>IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY<br>CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,<br>TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE<br>SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="修正案"><a href="#修正案" class="headerlink" title="修正案"></a><a id="amendments">修正案</a></h2><p>我们鼓励您使用此指南并更改规则以适应您的团队的风格指南。下面，你可以列出一些对风格指南的修正。这允许您定期更新您的样式指南，而不必处理合并冲突。</p>
<h1 id><a href="#" class="headerlink" title="};"></a>};</h1>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-08T02:43:14.000Z">2019-09-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    11 分钟 读完 (大约 1687 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/08/面试红黑树/">面试红黑树</a>
            
        </h1>
        <div class="content">
            <h1 id="什么是红黑树"><a href="#什么是红黑树" class="headerlink" title="什么是红黑树"></a>什么是红黑树</h1><p>红黑树本质上是一种二叉查找树，但它在二叉查找树的基础上额外添加了一个标记（颜色），同时具有一定的规则。这些规则使红黑树保证了一种平衡，插入、删除、查找的最坏时间复杂度都为 O(logn)。</p>
<p>它的统计性能要好于平衡二叉树（AVL树），因此，红黑树在很多地方都有应用。比如在 Java 集合框架中，很多部分(HashMap, TreeMap, TreeSet 等)都有红黑树的应用，这些集合均提供了很好的性能。</p>
<p>由于 TreeMap 就是由红黑树实现的，因此本文将使用 TreeMap 的相关操作的代码进行分析、论证。</p>
<p>黑色高度<br>从根节点到叶节点的路径上黑色节点的个数，叫做树的黑色高度。</p>
<h1 id="红黑树的-5-个特性"><a href="#红黑树的-5-个特性" class="headerlink" title="红黑树的 5 个特性"></a>红黑树的 5 个特性</h1><p><img src="/images/2019/09/08/9f0e92d0-d1e1-11e9-98b8-15e58d7acd49.png" alt="image.png"></p>
<p>红黑树在原有的二叉查找树基础上增加了如下几个要求：</p>
<ol>
<li>Every node is either red or black.</li>
<li>The root is black.</li>
<li>Every leaf (NIL) is black.</li>
<li>If a node is red, then both its children are black.</li>
<li>For each node, all simple paths from the node to descendant leaves contain the same number of black nodes.</li>
</ol>
<p>中文意思是：</p>
<ol>
<li>每个节点要么是红色，要么是黑色；</li>
<li>根节点永远是黑色的；</li>
<li>所有的叶节点都是是黑色的（注意这里说叶子节点其实是上图中的 NIL 节点）；</li>
<li>每个红色节点的两个子节点一定都是黑色；</li>
<li>从任一节点到其子树中每个叶子节点的路径都包含相同数量的黑色节点；</li>
</ol>
<p><strong>注意：</strong><br>性质 3 中指定红黑树的每个叶子节点都是空节点，而且并叶子节点都是黑色。但 Java 实现的红黑树将使用 null 来代表空节点，因此遍历红黑树时将看不到黑色的叶子节点，反而看到每个叶子节点都是红色的。</p>
<p>性质 4 的意思是：从每个根到节点的路径上不会有两个连续的红色节点，但黑色节点是可以连续的。<br>因此若给定黑色节点的个数 N，最短路径的情况是连续的 N 个黑色，树的高度为 N - 1;最长路径的情况为节点红黑相间，树的高度为 2(N - 1) 。</p>
<p>性质 5 是成为红黑树最主要的条件，后序的插入、删除操作都是为了遵守这个规定。</p>
<p>红黑树并不是标准平衡二叉树，它以性质 5 作为一种平衡方法，使自己的性能得到了提升。</p>
<h1 id="红黑树的左旋右旋"><a href="#红黑树的左旋右旋" class="headerlink" title="红黑树的左旋右旋"></a>红黑树的左旋右旋</h1><p><img src="/images/2019/09/08/e9d7edc0-d1e1-11e9-98b8-15e58d7acd49.png" alt="image.png"></p>
<p>红黑树的左右旋是比较重要的操作，左右旋的目的是调整红黑节点结构，转移黑色节点位置，使其在进行插入、删除后仍能保持红黑树的 5 条性质。</p>
<p>比如 X 左旋(右图转成左图)的结果，是让在 Y 左子树的黑色节点跑到 X 右子树去。</p>
<p>我们以 Java 集合框架中的 TreeMap 中的代码来看下左右旋的具体操作方法：</p>
<p><strong>指定节点 x 的左旋 (右图转成左图)：</strong></p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> <span class="hljs-comment">//这里 p 代表 x</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rotateLeft</span><span class="hljs-params">(Entry p)</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">if</span> (p != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">        Entry r = p.right; <span class="hljs-comment">// p 是上图中的 x，r 就是 y</span></span><br><span class="line">        p.right = r.left;       <span class="hljs-comment">// 左旋后，x 的右子树变成了 y 的左子树 β </span></span><br><span class="line">        <span class="hljs-keyword">if</span> (r.left != <span class="hljs-keyword">null</span>)         </span><br><span class="line">            r.left.parent = p;  <span class="hljs-comment">//β 确认父亲为 x</span></span><br><span class="line">        r.parent = p.parent;        <span class="hljs-comment">//y 取代 x 的第一步：认 x 的父亲为爹</span></span><br><span class="line">        <span class="hljs-keyword">if</span> (p.parent == <span class="hljs-keyword">null</span>)       <span class="hljs-comment">//要是 x 没有父亲，那 y 就是最老的根节点</span></span><br><span class="line">            root = r;</span><br><span class="line">        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p.parent.left == p) <span class="hljs-comment">//如果 x 有父亲并且是它父亲的左孩子，x 的父亲现在认 y 为左孩子，不要 x 了</span></span><br><span class="line">            p.parent.left = r;</span><br><span class="line">        <span class="hljs-keyword">else</span>                            <span class="hljs-comment">//如果 x 是父亲的右孩子，父亲就认 y 为右孩子，抛弃 x</span></span><br><span class="line">            p.parent.right = r;</span><br><span class="line">        r.left = p;     <span class="hljs-comment">//y 逆袭成功，以前的爸爸 x 现在成了它的左孩子</span></span><br><span class="line">        p.parent = r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到，x 节点的左旋就是把 x 变成 右孩子 y 的左孩子，同时把 y 的左孩子送给 x 当右子树。</p>
<p>简单点记就是：左旋把右子树里的一个节点（上图 β）移动到了左子树。</p>
<p><strong>指定节点 y 的右旋（左图转成右图）：</strong></p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rotateRight</span><span class="hljs-params">(Entry p)</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">if</span> (p != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">        Entry l = p.left;</span><br><span class="line">        p.left = l.right;</span><br><span class="line">        <span class="hljs-keyword">if</span> (l.right != <span class="hljs-keyword">null</span>) l.right.parent = p;</span><br><span class="line">        l.parent = p.parent;</span><br><span class="line">        <span class="hljs-keyword">if</span> (p.parent == <span class="hljs-keyword">null</span>)</span><br><span class="line">            root = l;</span><br><span class="line">        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p.parent.right == p)</span><br><span class="line">            p.parent.right = l;</span><br><span class="line">        <span class="hljs-keyword">else</span> p.parent.left = l;</span><br><span class="line">        l.right = p;</span><br><span class="line">        p.parent = l;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同理，y 节点的右旋就是把 y 变成 左孩子 x 的右孩子，同时把 x 的右孩子送给 x 当左子树。</p>
<p>简单点记就是：右旋把左子树里的一个节点（上图 β）移动到了右子树。</p>
<p>了解左旋、右旋的方法及意义后，就可以了解红黑树的主要操作：插入、删除。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>红黑树并不是真正的平衡二叉树，但在实际应用中，红黑树的统计性能要高于平衡二叉树，但极端性能略差。</p>
<p>红黑树的插入、删除调整逻辑比较复杂，但最终目的是满足红黑树的 5 个特性，尤其是 4 和 5。</p>
<p>在插入调整时为了简化操作我们直接把插入的节点涂成红色，这样只要保证插入节点的父节点不是红色就可以了。</p>
<p>而在删除后的调整中，针对删除黑色节点，所在子树缺少一个节点，需要进行弥补或者对别人造成一个黑色节点的伤害。具体调整方法取决于兄弟节点所在子树的情况。</p>
<p>红黑树的插入、删除在树形数据结构中算比较复杂的，理解起来比较难，但只要记住，红黑树有其特殊的平衡规则，而我们为了维持平衡，根据邻树的状况进行旋转或者涂色。</p>
<p>红黑树这么难理解，必定有其过人之处。它的有序、快速特性在很多场景下都有用到，比如 Java 集合框架的 TreeMap, TreeSet 等。</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-06T06:20:34.000Z">2019-09-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    37 分钟 读完 (大约 5584 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/06/System类/">System类</a>
            
        </h1>
        <div class="content">
            <p><img src="/images/2019/09/06/6505ce10-d06e-11e9-b8c8-91efca18534b.png" alt="image.png"></p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/*</span></span><br><span class="line"><span class="hljs-comment"> * Copyright (c) 1994, 2013, Oracle and/or its affiliates. All rights reserved.</span></span><br><span class="line"><span class="hljs-comment"> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</span></span><br><span class="line"><span class="hljs-comment"> *</span></span><br><span class="line"><span class="hljs-comment"> *</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-keyword">package</span> java.lang;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.io.*;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.reflect.Executable;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.annotation.Annotation;</span><br><span class="line"><span class="hljs-keyword">import</span> java.security.AccessControlContext;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.PropertyPermission;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.StringTokenizer;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Map;</span><br><span class="line"><span class="hljs-keyword">import</span> java.security.AccessController;</span><br><span class="line"><span class="hljs-keyword">import</span> java.security.PrivilegedAction;</span><br><span class="line"><span class="hljs-keyword">import</span> java.security.AllPermission;</span><br><span class="line"><span class="hljs-keyword">import</span> java.nio.channels.Channel;</span><br><span class="line"><span class="hljs-keyword">import</span> java.nio.channels.spi.SelectorProvider;</span><br><span class="line"><span class="hljs-keyword">import</span> sun.nio.ch.Interruptible;</span><br><span class="line"><span class="hljs-keyword">import</span> sun.reflect.CallerSensitive;</span><br><span class="line"><span class="hljs-keyword">import</span> sun.reflect.Reflection;</span><br><span class="line"><span class="hljs-keyword">import</span> sun.security.util.SecurityConstants;</span><br><span class="line"><span class="hljs-keyword">import</span> sun.reflect.annotation.AnnotationType;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * The &lt;code&gt;System&lt;/code&gt; class contains several useful class fields</span></span><br><span class="line"><span class="hljs-comment"> * and methods. It cannot be instantiated.</span></span><br><span class="line"><span class="hljs-comment"> *</span></span><br><span class="line"><span class="hljs-comment"> * &lt;p&gt;Among the facilities provided by the &lt;code&gt;System&lt;/code&gt; class</span></span><br><span class="line"><span class="hljs-comment"> * are standard input, standard output, and error output streams;</span></span><br><span class="line"><span class="hljs-comment"> * access to externally defined properties and environment</span></span><br><span class="line"><span class="hljs-comment"> * variables; a means of loading files and libraries; and a utility</span></span><br><span class="line"><span class="hljs-comment"> * method for quickly copying a portion of an array.</span></span><br><span class="line"><span class="hljs-comment"> *</span></span><br><span class="line"><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>  unascribed</span></span><br><span class="line"><span class="hljs-comment"> * <span class="hljs-doctag">@since</span>   JDK1.0</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">System</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/* register the natives via the static initializer.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * VM will invoke the initializeSystemClass method to complete</span></span><br><span class="line"><span class="hljs-comment">     * the initialization for this class separated from clinit.</span></span><br><span class="line"><span class="hljs-comment">     * Note that to use properties set by the VM, see the constraints</span></span><br><span class="line"><span class="hljs-comment">     * described in the initializeSystemClass method.</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">registerNatives</span><span class="hljs-params">()</span></span>;</span><br><span class="line">    <span class="hljs-keyword">static</span> &#123;</span><br><span class="line">        registerNatives();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/** Don't let anyone instantiate this class */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">System</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * The "standard" input stream. This stream is already</span></span><br><span class="line"><span class="hljs-comment">     * open and ready to supply input data. Typically this stream</span></span><br><span class="line"><span class="hljs-comment">     * corresponds to keyboard input or another input source specified by</span></span><br><span class="line"><span class="hljs-comment">     * the host environment or user.</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> InputStream in = <span class="hljs-keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * The "standard" output stream. This stream is already</span></span><br><span class="line"><span class="hljs-comment">     * open and ready to accept output data. Typically this stream</span></span><br><span class="line"><span class="hljs-comment">     * corresponds to display output or another output destination</span></span><br><span class="line"><span class="hljs-comment">     * specified by the host environment or user.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * For simple stand-alone Java applications, a typical way to write</span></span><br><span class="line"><span class="hljs-comment">     * a line of output data is:</span></span><br><span class="line"><span class="hljs-comment">     * &lt;blockquote&gt;&lt;pre&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     System.out.println(data)</span></span><br><span class="line"><span class="hljs-comment">     * &lt;/pre&gt;&lt;/blockquote&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * See the &lt;code&gt;println&lt;/code&gt; methods in class &lt;code&gt;PrintStream&lt;/code&gt;.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.io.PrintStream#println()</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.io.PrintStream#println(boolean)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.io.PrintStream#println(char)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.io.PrintStream#println(char[])</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.io.PrintStream#println(double)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.io.PrintStream#println(float)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.io.PrintStream#println(int)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.io.PrintStream#println(long)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.io.PrintStream#println(java.lang.Object)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.io.PrintStream#println(java.lang.String)</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> PrintStream out = <span class="hljs-keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * The "standard" error output stream. This stream is already</span></span><br><span class="line"><span class="hljs-comment">     * open and ready to accept output data.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Typically this stream corresponds to display output or another</span></span><br><span class="line"><span class="hljs-comment">     * output destination specified by the host environment or user. By</span></span><br><span class="line"><span class="hljs-comment">     * convention, this output stream is used to display error messages</span></span><br><span class="line"><span class="hljs-comment">     * or other information that should come to the immediate attention</span></span><br><span class="line"><span class="hljs-comment">     * of a user even if the principal output stream, the value of the</span></span><br><span class="line"><span class="hljs-comment">     * variable &lt;code&gt;out&lt;/code&gt;, has been redirected to a file or other</span></span><br><span class="line"><span class="hljs-comment">     * destination that is typically not continuously monitored.</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> PrintStream err = <span class="hljs-keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/* The security manager for the system.</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> SecurityManager security = <span class="hljs-keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Reassigns the "standard" input stream.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;First, if there is a security manager, its &lt;code&gt;checkPermission&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * method is called with a &lt;code&gt;RuntimePermission("setIO")&lt;/code&gt; permission</span></span><br><span class="line"><span class="hljs-comment">     *  to see if it's ok to reassign the "standard" input stream.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> in the new standard input stream.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> SecurityException</span></span><br><span class="line"><span class="hljs-comment">     *        if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *        &lt;code&gt;checkPermission&lt;/code&gt; method doesn't allow</span></span><br><span class="line"><span class="hljs-comment">     *        reassigning of the standard input stream.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span> SecurityManager#checkPermission</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span> java.lang.RuntimePermission</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span>   JDK1.1</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setIn</span><span class="hljs-params">(InputStream in)</span> </span>&#123;</span><br><span class="line">        checkIO();</span><br><span class="line">        setIn0(in);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Reassigns the "standard" output stream.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;First, if there is a security manager, its &lt;code&gt;checkPermission&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * method is called with a &lt;code&gt;RuntimePermission("setIO")&lt;/code&gt; permission</span></span><br><span class="line"><span class="hljs-comment">     *  to see if it's ok to reassign the "standard" output stream.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> out the new standard output stream</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> SecurityException</span></span><br><span class="line"><span class="hljs-comment">     *        if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *        &lt;code&gt;checkPermission&lt;/code&gt; method doesn't allow</span></span><br><span class="line"><span class="hljs-comment">     *        reassigning of the standard output stream.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span> SecurityManager#checkPermission</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span> java.lang.RuntimePermission</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span>   JDK1.1</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setOut</span><span class="hljs-params">(PrintStream out)</span> </span>&#123;</span><br><span class="line">        checkIO();</span><br><span class="line">        setOut0(out);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Reassigns the "standard" error output stream.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;First, if there is a security manager, its &lt;code&gt;checkPermission&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * method is called with a &lt;code&gt;RuntimePermission("setIO")&lt;/code&gt; permission</span></span><br><span class="line"><span class="hljs-comment">     *  to see if it's ok to reassign the "standard" error output stream.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> err the new standard error output stream.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> SecurityException</span></span><br><span class="line"><span class="hljs-comment">     *        if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *        &lt;code&gt;checkPermission&lt;/code&gt; method doesn't allow</span></span><br><span class="line"><span class="hljs-comment">     *        reassigning of the standard error output stream.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span> SecurityManager#checkPermission</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span> java.lang.RuntimePermission</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span>   JDK1.1</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setErr</span><span class="hljs-params">(PrintStream err)</span> </span>&#123;</span><br><span class="line">        checkIO();</span><br><span class="line">        setErr0(err);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> Console cons = <span class="hljs-keyword">null</span>;</span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Returns the unique &#123;<span class="hljs-doctag">@link</span> java.io.Console Console&#125; object associated</span></span><br><span class="line"><span class="hljs-comment">     * with the current Java virtual machine, if any.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>  The system console, if any, otherwise &lt;tt&gt;null&lt;/tt&gt;.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span>   1.6</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Console <span class="hljs-title">console</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (cons == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">             <span class="hljs-keyword">synchronized</span> (System.class) &#123;</span><br><span class="line">                 cons = sun.misc.SharedSecrets.getJavaIOAccess().console();</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="hljs-keyword">return</span> cons;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Returns the channel inherited from the entity that created this</span></span><br><span class="line"><span class="hljs-comment">     * Java virtual machine.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt; This method returns the channel obtained by invoking the</span></span><br><span class="line"><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> java.nio.channels.spi.SelectorProvider#inheritedChannel</span></span><br><span class="line"><span class="hljs-comment">     * inheritedChannel&#125; method of the system-wide default</span></span><br><span class="line"><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> java.nio.channels.spi.SelectorProvider&#125; object. &lt;/p&gt;</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt; In addition to the network-oriented channels described in</span></span><br><span class="line"><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> java.nio.channels.spi.SelectorProvider#inheritedChannel</span></span><br><span class="line"><span class="hljs-comment">     * inheritedChannel&#125;, this method may return other kinds of</span></span><br><span class="line"><span class="hljs-comment">     * channels in the future.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>  The inherited channel, if any, otherwise &lt;tt&gt;null&lt;/tt&gt;.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  IOException</span></span><br><span class="line"><span class="hljs-comment">     *          If an I/O error occurs</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  SecurityException</span></span><br><span class="line"><span class="hljs-comment">     *          If a security manager is present and it does not</span></span><br><span class="line"><span class="hljs-comment">     *          permit access to the channel.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span> 1.5</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Channel <span class="hljs-title">inheritedChannel</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> SelectorProvider.provider().inheritedChannel();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkIO</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        SecurityManager sm = getSecurityManager();</span><br><span class="line">        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            sm.checkPermission(<span class="hljs-keyword">new</span> RuntimePermission(<span class="hljs-string">"setIO"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setIn0</span><span class="hljs-params">(InputStream in)</span></span>;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setOut0</span><span class="hljs-params">(PrintStream out)</span></span>;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setErr0</span><span class="hljs-params">(PrintStream err)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Sets the System security.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt; If there is a security manager already installed, this method first</span></span><br><span class="line"><span class="hljs-comment">     * calls the security manager's &lt;code&gt;checkPermission&lt;/code&gt; method</span></span><br><span class="line"><span class="hljs-comment">     * with a &lt;code&gt;RuntimePermission("setSecurityManager")&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * permission to ensure it's ok to replace the existing</span></span><br><span class="line"><span class="hljs-comment">     * security manager.</span></span><br><span class="line"><span class="hljs-comment">     * This may result in throwing a &lt;code&gt;SecurityException&lt;/code&gt;.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt; Otherwise, the argument is established as the current</span></span><br><span class="line"><span class="hljs-comment">     * security manager. If the argument is &lt;code&gt;null&lt;/code&gt; and no</span></span><br><span class="line"><span class="hljs-comment">     * security manager has been established, then no action is taken and</span></span><br><span class="line"><span class="hljs-comment">     * the method simply returns.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      s   the security manager.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  SecurityException  if the security manager has already</span></span><br><span class="line"><span class="hljs-comment">     *             been set and its &lt;code&gt;checkPermission&lt;/code&gt; method</span></span><br><span class="line"><span class="hljs-comment">     *             doesn't allow it to be replaced.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span> #getSecurityManager</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span> SecurityManager#checkPermission</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span> java.lang.RuntimePermission</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setSecurityManager</span><span class="hljs-params">(<span class="hljs-keyword">final</span> SecurityManager s)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">            s.checkPackageAccess(<span class="hljs-string">"java.lang"</span>);</span><br><span class="line">        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="hljs-comment">// no-op</span></span><br><span class="line">        &#125;</span><br><span class="line">        setSecurityManager0(s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setSecurityManager0</span><span class="hljs-params">(<span class="hljs-keyword">final</span> SecurityManager s)</span> </span>&#123;</span><br><span class="line">        SecurityManager sm = getSecurityManager();</span><br><span class="line">        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            <span class="hljs-comment">// ask the currently installed security manager if we</span></span><br><span class="line">            <span class="hljs-comment">// can replace it.</span></span><br><span class="line">            sm.checkPermission(<span class="hljs-keyword">new</span> RuntimePermission</span><br><span class="line">                                     (<span class="hljs-string">"setSecurityManager"</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">if</span> ((s != <span class="hljs-keyword">null</span>) &amp;&amp; (s.getClass().getClassLoader() != <span class="hljs-keyword">null</span>)) &#123;</span><br><span class="line">            <span class="hljs-comment">// New security manager class is not on bootstrap classpath.</span></span><br><span class="line">            <span class="hljs-comment">// Cause policy to get initialized before we install the new</span></span><br><span class="line">            <span class="hljs-comment">// security manager, in order to prevent infinite loops when</span></span><br><span class="line">            <span class="hljs-comment">// trying to initialize the policy (which usually involves</span></span><br><span class="line">            <span class="hljs-comment">// accessing some security and/or system properties, which in turn</span></span><br><span class="line">            <span class="hljs-comment">// calls the installed security manager's checkPermission method</span></span><br><span class="line">            <span class="hljs-comment">// which will loop infinitely if there is a non-system class</span></span><br><span class="line">            <span class="hljs-comment">// (in this case: the new security manager class) on the stack).</span></span><br><span class="line">            AccessController.doPrivileged(<span class="hljs-keyword">new</span> PrivilegedAction&lt;Object&gt;() &#123;</span><br><span class="line">                <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">                    s.getClass().getProtectionDomain().implies</span><br><span class="line">                        (SecurityConstants.ALL_PERMISSION);</span><br><span class="line">                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        security = s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Gets the system security interface.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>  if a security manager has already been established for the</span></span><br><span class="line"><span class="hljs-comment">     *          current application, then that security manager is returned;</span></span><br><span class="line"><span class="hljs-comment">     *          otherwise, &lt;code&gt;null&lt;/code&gt; is returned.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     #setSecurityManager</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SecurityManager <span class="hljs-title">getSecurityManager</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> security;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Returns the current time in milliseconds.  Note that</span></span><br><span class="line"><span class="hljs-comment">     * while the unit of time of the return value is a millisecond,</span></span><br><span class="line"><span class="hljs-comment">     * the granularity of the value depends on the underlying</span></span><br><span class="line"><span class="hljs-comment">     * operating system and may be larger.  For example, many</span></span><br><span class="line"><span class="hljs-comment">     * operating systems measure time in units of tens of</span></span><br><span class="line"><span class="hljs-comment">     * milliseconds.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt; See the description of the class &lt;code&gt;Date&lt;/code&gt; for</span></span><br><span class="line"><span class="hljs-comment">     * a discussion of slight discrepancies that may arise between</span></span><br><span class="line"><span class="hljs-comment">     * "computer time" and coordinated universal time (UTC).</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>  the difference, measured in milliseconds, between</span></span><br><span class="line"><span class="hljs-comment">     *          the current time and midnight, January 1, 1970 UTC.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.util.Date</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">long</span> <span class="hljs-title">currentTimeMillis</span><span class="hljs-params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Returns the current value of the running Java Virtual Machine's</span></span><br><span class="line"><span class="hljs-comment">     * high-resolution time source, in nanoseconds.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;This method can only be used to measure elapsed time and is</span></span><br><span class="line"><span class="hljs-comment">     * not related to any other notion of system or wall-clock time.</span></span><br><span class="line"><span class="hljs-comment">     * The value returned represents nanoseconds since some fixed but</span></span><br><span class="line"><span class="hljs-comment">     * arbitrary &lt;i&gt;origin&lt;/i&gt; time (perhaps in the future, so values</span></span><br><span class="line"><span class="hljs-comment">     * may be negative).  The same origin is used by all invocations of</span></span><br><span class="line"><span class="hljs-comment">     * this method in an instance of a Java virtual machine; other</span></span><br><span class="line"><span class="hljs-comment">     * virtual machine instances are likely to use a different origin.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;This method provides nanosecond precision, but not necessarily</span></span><br><span class="line"><span class="hljs-comment">     * nanosecond resolution (that is, how frequently the value changes)</span></span><br><span class="line"><span class="hljs-comment">     * - no guarantees are made except that the resolution is at least as</span></span><br><span class="line"><span class="hljs-comment">     * good as that of &#123;<span class="hljs-doctag">@link</span> #currentTimeMillis()&#125;.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;Differences in successive calls that span greater than</span></span><br><span class="line"><span class="hljs-comment">     * approximately 292 years (2&lt;sup&gt;63&lt;/sup&gt; nanoseconds) will not</span></span><br><span class="line"><span class="hljs-comment">     * correctly compute elapsed time due to numerical overflow.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;The values returned by this method become meaningful only when</span></span><br><span class="line"><span class="hljs-comment">     * the difference between two such values, obtained within the same</span></span><br><span class="line"><span class="hljs-comment">     * instance of a Java virtual machine, is computed.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt; For example, to measure how long some code takes to execute:</span></span><br><span class="line"><span class="hljs-comment">     *  &lt;pre&gt; &#123;<span class="hljs-doctag">@code</span></span></span><br><span class="line"><span class="hljs-comment">     * long startTime = System.nanoTime();</span></span><br><span class="line"><span class="hljs-comment">     * // ... the code being measured ...</span></span><br><span class="line"><span class="hljs-comment">     * long estimatedTime = System.nanoTime() - startTime;&#125;&lt;/pre&gt;</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;To compare two nanoTime values</span></span><br><span class="line"><span class="hljs-comment">     *  &lt;pre&gt; &#123;<span class="hljs-doctag">@code</span></span></span><br><span class="line"><span class="hljs-comment">     * long t0 = System.nanoTime();</span></span><br><span class="line"><span class="hljs-comment">     * ...</span></span><br><span class="line"><span class="hljs-comment">     * long t1 = System.nanoTime();&#125;&lt;/pre&gt;</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * one should use &#123;<span class="hljs-doctag">@code</span> t1 - t0 &lt; 0&#125;, not &#123;<span class="hljs-doctag">@code</span> t1 &lt; t0&#125;,</span></span><br><span class="line"><span class="hljs-comment">     * because of the possibility of numerical overflow.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> the current value of the running Java Virtual Machine's</span></span><br><span class="line"><span class="hljs-comment">     *         high-resolution time source, in nanoseconds</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span> 1.5</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">long</span> <span class="hljs-title">nanoTime</span><span class="hljs-params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Copies an array from the specified source array, beginning at the</span></span><br><span class="line"><span class="hljs-comment">     * specified position, to the specified position of the destination array.</span></span><br><span class="line"><span class="hljs-comment">     * A subsequence of array components are copied from the source</span></span><br><span class="line"><span class="hljs-comment">     * array referenced by &lt;code&gt;src&lt;/code&gt; to the destination array</span></span><br><span class="line"><span class="hljs-comment">     * referenced by &lt;code&gt;dest&lt;/code&gt;. The number of components copied is</span></span><br><span class="line"><span class="hljs-comment">     * equal to the &lt;code&gt;length&lt;/code&gt; argument. The components at</span></span><br><span class="line"><span class="hljs-comment">     * positions &lt;code&gt;srcPos&lt;/code&gt; through</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;srcPos+length-1&lt;/code&gt; in the source array are copied into</span></span><br><span class="line"><span class="hljs-comment">     * positions &lt;code&gt;destPos&lt;/code&gt; through</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;destPos+length-1&lt;/code&gt;, respectively, of the destination</span></span><br><span class="line"><span class="hljs-comment">     * array.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * If the &lt;code&gt;src&lt;/code&gt; and &lt;code&gt;dest&lt;/code&gt; arguments refer to the</span></span><br><span class="line"><span class="hljs-comment">     * same array object, then the copying is performed as if the</span></span><br><span class="line"><span class="hljs-comment">     * components at positions &lt;code&gt;srcPos&lt;/code&gt; through</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;srcPos+length-1&lt;/code&gt; were first copied to a temporary</span></span><br><span class="line"><span class="hljs-comment">     * array with &lt;code&gt;length&lt;/code&gt; components and then the contents of</span></span><br><span class="line"><span class="hljs-comment">     * the temporary array were copied into positions</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;destPos&lt;/code&gt; through &lt;code&gt;destPos+length-1&lt;/code&gt; of the</span></span><br><span class="line"><span class="hljs-comment">     * destination array.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * If &lt;code&gt;dest&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;, then a</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;NullPointerException&lt;/code&gt; is thrown.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * If &lt;code&gt;src&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;, then a</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;NullPointerException&lt;/code&gt; is thrown and the destination</span></span><br><span class="line"><span class="hljs-comment">     * array is not modified.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Otherwise, if any of the following is true, an</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;ArrayStoreException&lt;/code&gt; is thrown and the destination is</span></span><br><span class="line"><span class="hljs-comment">     * not modified:</span></span><br><span class="line"><span class="hljs-comment">     * &lt;ul&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;The &lt;code&gt;src&lt;/code&gt; argument refers to an object that is not an</span></span><br><span class="line"><span class="hljs-comment">     *     array.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;The &lt;code&gt;dest&lt;/code&gt; argument refers to an object that is not an</span></span><br><span class="line"><span class="hljs-comment">     *     array.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;The &lt;code&gt;src&lt;/code&gt; argument and &lt;code&gt;dest&lt;/code&gt; argument refer</span></span><br><span class="line"><span class="hljs-comment">     *     to arrays whose component types are different primitive types.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;The &lt;code&gt;src&lt;/code&gt; argument refers to an array with a primitive</span></span><br><span class="line"><span class="hljs-comment">     *    component type and the &lt;code&gt;dest&lt;/code&gt; argument refers to an array</span></span><br><span class="line"><span class="hljs-comment">     *     with a reference component type.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;The &lt;code&gt;src&lt;/code&gt; argument refers to an array with a reference</span></span><br><span class="line"><span class="hljs-comment">     *    component type and the &lt;code&gt;dest&lt;/code&gt; argument refers to an array</span></span><br><span class="line"><span class="hljs-comment">     *     with a primitive component type.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;/ul&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Otherwise, if any of the following is true, an</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;IndexOutOfBoundsException&lt;/code&gt; is</span></span><br><span class="line"><span class="hljs-comment">     * thrown and the destination is not modified:</span></span><br><span class="line"><span class="hljs-comment">     * &lt;ul&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;The &lt;code&gt;srcPos&lt;/code&gt; argument is negative.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;The &lt;code&gt;destPos&lt;/code&gt; argument is negative.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;The &lt;code&gt;length&lt;/code&gt; argument is negative.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;&lt;code&gt;srcPos+length&lt;/code&gt; is greater than</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;code&gt;src.length&lt;/code&gt;, the length of the source array.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;&lt;code&gt;destPos+length&lt;/code&gt; is greater than</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;code&gt;dest.length&lt;/code&gt;, the length of the destination array.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;/ul&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Otherwise, if any actual component of the source array from</span></span><br><span class="line"><span class="hljs-comment">     * position &lt;code&gt;srcPos&lt;/code&gt; through</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;srcPos+length-1&lt;/code&gt; cannot be converted to the component</span></span><br><span class="line"><span class="hljs-comment">     * type of the destination array by assignment conversion, an</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;ArrayStoreException&lt;/code&gt; is thrown. In this case, let</span></span><br><span class="line"><span class="hljs-comment">     * &lt;b&gt;&lt;i&gt;k&lt;/i&gt;&lt;/b&gt; be the smallest nonnegative integer less than</span></span><br><span class="line"><span class="hljs-comment">     * length such that &lt;code&gt;src[srcPos+&lt;/code&gt;&lt;i&gt;k&lt;/i&gt;&lt;code&gt;]&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * cannot be converted to the component type of the destination</span></span><br><span class="line"><span class="hljs-comment">     * array; when the exception is thrown, source array components from</span></span><br><span class="line"><span class="hljs-comment">     * positions &lt;code&gt;srcPos&lt;/code&gt; through</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;srcPos+&lt;/code&gt;&lt;i&gt;k&lt;/i&gt;&lt;code&gt;-1&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * will already have been copied to destination array positions</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;destPos&lt;/code&gt; through</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;destPos+&lt;/code&gt;&lt;i&gt;k&lt;/I&gt;&lt;code&gt;-1&lt;/code&gt; and no other</span></span><br><span class="line"><span class="hljs-comment">     * positions of the destination array will have been modified.</span></span><br><span class="line"><span class="hljs-comment">     * (Because of the restrictions already itemized, this</span></span><br><span class="line"><span class="hljs-comment">     * paragraph effectively applies only to the situation where both</span></span><br><span class="line"><span class="hljs-comment">     * arrays have component types that are reference types.)</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      src      the source array.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      srcPos   starting position in the source array.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      dest     the destination array.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      destPos  starting position in the destination data.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      length   the number of array elements to be copied.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  IndexOutOfBoundsException  if copying would cause</span></span><br><span class="line"><span class="hljs-comment">     *               access of data outside array bounds.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  ArrayStoreException  if an element in the &lt;code&gt;src&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     *               array could not be stored into the &lt;code&gt;dest&lt;/code&gt; array</span></span><br><span class="line"><span class="hljs-comment">     *               because of a type mismatch.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  NullPointerException if either &lt;code&gt;src&lt;/code&gt; or</span></span><br><span class="line"><span class="hljs-comment">     *               &lt;code&gt;dest&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;.</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">arraycopy</span><span class="hljs-params">(Object src,  <span class="hljs-keyword">int</span>  srcPos,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">                                        Object dest, <span class="hljs-keyword">int</span> destPos,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">                                        <span class="hljs-keyword">int</span> length)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Returns the same hash code for the given object as</span></span><br><span class="line"><span class="hljs-comment">     * would be returned by the default method hashCode(),</span></span><br><span class="line"><span class="hljs-comment">     * whether or not the given object's class overrides</span></span><br><span class="line"><span class="hljs-comment">     * hashCode().</span></span><br><span class="line"><span class="hljs-comment">     * The hash code for the null reference is zero.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> x object for which the hashCode is to be calculated</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>  the hashCode</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span>   JDK1.1</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">int</span> <span class="hljs-title">identityHashCode</span><span class="hljs-params">(Object x)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * System properties. The following properties are guaranteed to be defined:</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dl&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;java.version         &lt;dd&gt;Java version number</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;java.vendor          &lt;dd&gt;Java vendor specific string</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;java.vendor.url      &lt;dd&gt;Java vendor URL</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;java.home            &lt;dd&gt;Java installation directory</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;java.class.version   &lt;dd&gt;Java class version number</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;java.class.path      &lt;dd&gt;Java classpath</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;os.name              &lt;dd&gt;Operating System Name</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;os.arch              &lt;dd&gt;Operating System Architecture</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;os.version           &lt;dd&gt;Operating System Version</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;file.separator       &lt;dd&gt;File separator ("/" on Unix)</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;path.separator       &lt;dd&gt;Path separator (":" on Unix)</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;line.separator       &lt;dd&gt;Line separator ("\n" on Unix)</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;user.name            &lt;dd&gt;User account name</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;user.home            &lt;dd&gt;User home directory</span></span><br><span class="line"><span class="hljs-comment">     * &lt;dt&gt;user.dir             &lt;dd&gt;User's current working directory</span></span><br><span class="line"><span class="hljs-comment">     * &lt;/dl&gt;</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Properties props;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> Properties <span class="hljs-title">initProperties</span><span class="hljs-params">(Properties props)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Determines the current system properties.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * First, if there is a security manager, its</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;checkPropertiesAccess&lt;/code&gt; method is called with no</span></span><br><span class="line"><span class="hljs-comment">     * arguments. This may result in a security exception.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * The current set of system properties for use by the</span></span><br><span class="line"><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> #getProperty(String)&#125; method is returned as a</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;Properties&lt;/code&gt; object. If there is no current set of</span></span><br><span class="line"><span class="hljs-comment">     * system properties, a set of system properties is first created and</span></span><br><span class="line"><span class="hljs-comment">     * initialized. This set of system properties always includes values</span></span><br><span class="line"><span class="hljs-comment">     * for the following keys:</span></span><br><span class="line"><span class="hljs-comment">     * &lt;table summary="Shows property keys and associated values"&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;th&gt;Key&lt;/th&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;th&gt;Description of Associated Value&lt;/th&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.version&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java Runtime Environment version&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.vendor&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java Runtime Environment vendor&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.vendor.url&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java vendor URL&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.home&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java installation directory&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.vm.specification.version&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java Virtual Machine specification version&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.vm.specification.vendor&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java Virtual Machine specification vendor&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.vm.specification.name&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java Virtual Machine specification name&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.vm.version&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java Virtual Machine implementation version&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.vm.vendor&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java Virtual Machine implementation vendor&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.vm.name&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java Virtual Machine implementation name&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.specification.version&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java Runtime Environment specification  version&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.specification.vendor&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java Runtime Environment specification  vendor&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.specification.name&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java Runtime Environment specification  name&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.class.version&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java class format version number&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.class.path&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Java class path&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.library.path&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;List of paths to search when loading libraries&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.io.tmpdir&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Default temp file path&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.compiler&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Name of JIT compiler to use&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;java.ext.dirs&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Path of extension directory or directories</span></span><br><span class="line"><span class="hljs-comment">     *         &lt;b&gt;Deprecated.&lt;/b&gt; &lt;i&gt;This property, and the mechanism</span></span><br><span class="line"><span class="hljs-comment">     *            which implements it, may be removed in a future</span></span><br><span class="line"><span class="hljs-comment">     *            release.&lt;/i&gt; &lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;os.name&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Operating system name&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;os.arch&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Operating system architecture&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;os.version&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Operating system version&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;file.separator&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;File separator ("/" on UNIX)&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;path.separator&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Path separator (":" on UNIX)&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;line.separator&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;Line separator ("\n" on UNIX)&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;user.name&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;User's account name&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;user.home&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;User's home directory&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;tr&gt;&lt;td&gt;&lt;code&gt;user.dir&lt;/code&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="hljs-comment">     *     &lt;td&gt;User's current working directory&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;/table&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Multiple paths in a system property value are separated by the path</span></span><br><span class="line"><span class="hljs-comment">     * separator character of the platform.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Note that even if the security manager does not permit the</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;getProperties&lt;/code&gt; operation, it may choose to permit the</span></span><br><span class="line"><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> #getProperty(String)&#125; operation.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>     the system properties</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  SecurityException  if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;checkPropertiesAccess&lt;/code&gt; method doesn't allow access</span></span><br><span class="line"><span class="hljs-comment">     *              to the system properties.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        #setProperties</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.SecurityException</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.SecurityManager#checkPropertiesAccess()</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.util.Properties</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Properties <span class="hljs-title">getProperties</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        SecurityManager sm = getSecurityManager();</span><br><span class="line">        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            sm.checkPropertiesAccess();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">return</span> props;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Returns the system-dependent line separator string.  It always</span></span><br><span class="line"><span class="hljs-comment">     * returns the same value - the initial value of the &#123;<span class="hljs-doctag">@linkplain</span></span></span><br><span class="line"><span class="hljs-comment">     * #getProperty(String) system property&#125; &#123;<span class="hljs-doctag">@code</span> line.separator&#125;.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;On UNIX systems, it returns &#123;<span class="hljs-doctag">@code</span> "\n"&#125;; on Microsoft</span></span><br><span class="line"><span class="hljs-comment">     * Windows systems it returns &#123;<span class="hljs-doctag">@code</span> "\r\n"&#125;.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> the system-dependent line separator string</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span> 1.7</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">lineSeparator</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> lineSeparator;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String lineSeparator;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Sets the system properties to the &lt;code&gt;Properties&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * argument.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * First, if there is a security manager, its</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;checkPropertiesAccess&lt;/code&gt; method is called with no</span></span><br><span class="line"><span class="hljs-comment">     * arguments. This may result in a security exception.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * The argument becomes the current set of system properties for use</span></span><br><span class="line"><span class="hljs-comment">     * by the &#123;<span class="hljs-doctag">@link</span> #getProperty(String)&#125; method. If the argument is</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;null&lt;/code&gt;, then the current set of system properties is</span></span><br><span class="line"><span class="hljs-comment">     * forgotten.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      props   the new system properties.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  SecurityException  if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;checkPropertiesAccess&lt;/code&gt; method doesn't allow access</span></span><br><span class="line"><span class="hljs-comment">     *              to the system properties.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        #getProperties</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.util.Properties</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.SecurityException</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.SecurityManager#checkPropertiesAccess()</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProperties</span><span class="hljs-params">(Properties props)</span> </span>&#123;</span><br><span class="line">        SecurityManager sm = getSecurityManager();</span><br><span class="line">        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            sm.checkPropertiesAccess();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">if</span> (props == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            props = <span class="hljs-keyword">new</span> Properties();</span><br><span class="line">            initProperties(props);</span><br><span class="line">        &#125;</span><br><span class="line">        System.props = props;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Gets the system property indicated by the specified key.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * First, if there is a security manager, its</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;checkPropertyAccess&lt;/code&gt; method is called with the key as</span></span><br><span class="line"><span class="hljs-comment">     * its argument. This may result in a SecurityException.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * If there is no current set of system properties, a set of system</span></span><br><span class="line"><span class="hljs-comment">     * properties is first created and initialized in the same manner as</span></span><br><span class="line"><span class="hljs-comment">     * for the &lt;code&gt;getProperties&lt;/code&gt; method.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      key   the name of the system property.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>     the string value of the system property,</span></span><br><span class="line"><span class="hljs-comment">     *             or &lt;code&gt;null&lt;/code&gt; if there is no property with that key.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  SecurityException  if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;checkPropertyAccess&lt;/code&gt; method doesn't allow</span></span><br><span class="line"><span class="hljs-comment">     *              access to the specified system property.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  NullPointerException if &lt;code&gt;key&lt;/code&gt; is</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;null&lt;/code&gt;.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  IllegalArgumentException if &lt;code&gt;key&lt;/code&gt; is empty.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        #setProperty</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.SecurityException</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.SecurityManager#checkPropertyAccess(java.lang.String)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.System#getProperties()</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getProperty</span><span class="hljs-params">(String key)</span> </span>&#123;</span><br><span class="line">        checkKey(key);</span><br><span class="line">        SecurityManager sm = getSecurityManager();</span><br><span class="line">        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            sm.checkPropertyAccess(key);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">return</span> props.getProperty(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Gets the system property indicated by the specified key.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * First, if there is a security manager, its</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;checkPropertyAccess&lt;/code&gt; method is called with the</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;key&lt;/code&gt; as its argument.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * If there is no current set of system properties, a set of system</span></span><br><span class="line"><span class="hljs-comment">     * properties is first created and initialized in the same manner as</span></span><br><span class="line"><span class="hljs-comment">     * for the &lt;code&gt;getProperties&lt;/code&gt; method.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      key   the name of the system property.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      def   a default value.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>     the string value of the system property,</span></span><br><span class="line"><span class="hljs-comment">     *             or the default value if there is no property with that key.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  SecurityException  if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;checkPropertyAccess&lt;/code&gt; method doesn't allow</span></span><br><span class="line"><span class="hljs-comment">     *             access to the specified system property.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  NullPointerException if &lt;code&gt;key&lt;/code&gt; is</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;null&lt;/code&gt;.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  IllegalArgumentException if &lt;code&gt;key&lt;/code&gt; is empty.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        #setProperty</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.SecurityManager#checkPropertyAccess(java.lang.String)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.System#getProperties()</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getProperty</span><span class="hljs-params">(String key, String def)</span> </span>&#123;</span><br><span class="line">        checkKey(key);</span><br><span class="line">        SecurityManager sm = getSecurityManager();</span><br><span class="line">        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            sm.checkPropertyAccess(key);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">return</span> props.getProperty(key, def);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Sets the system property indicated by the specified key.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * First, if a security manager exists, its</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;SecurityManager.checkPermission&lt;/code&gt; method</span></span><br><span class="line"><span class="hljs-comment">     * is called with a &lt;code&gt;PropertyPermission(key, "write")&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * permission. This may result in a SecurityException being thrown.</span></span><br><span class="line"><span class="hljs-comment">     * If no exception is thrown, the specified property is set to the given</span></span><br><span class="line"><span class="hljs-comment">     * value.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      key   the name of the system property.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      value the value of the system property.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>     the previous value of the system property,</span></span><br><span class="line"><span class="hljs-comment">     *             or &lt;code&gt;null&lt;/code&gt; if it did not have one.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  SecurityException  if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;checkPermission&lt;/code&gt; method doesn't allow</span></span><br><span class="line"><span class="hljs-comment">     *             setting of the specified property.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  NullPointerException if &lt;code&gt;key&lt;/code&gt; or</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;value&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  IllegalArgumentException if &lt;code&gt;key&lt;/code&gt; is empty.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        #getProperty</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.System#getProperty(java.lang.String)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.System#getProperty(java.lang.String, java.lang.String)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.util.PropertyPermission</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        SecurityManager#checkPermission</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span>      1.2</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">setProperty</span><span class="hljs-params">(String key, String value)</span> </span>&#123;</span><br><span class="line">        checkKey(key);</span><br><span class="line">        SecurityManager sm = getSecurityManager();</span><br><span class="line">        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            sm.checkPermission(<span class="hljs-keyword">new</span> PropertyPermission(key,</span><br><span class="line">                SecurityConstants.PROPERTY_WRITE_ACTION));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">return</span> (String) props.setProperty(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Removes the system property indicated by the specified key.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * First, if a security manager exists, its</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;SecurityManager.checkPermission&lt;/code&gt; method</span></span><br><span class="line"><span class="hljs-comment">     * is called with a &lt;code&gt;PropertyPermission(key, "write")&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * permission. This may result in a SecurityException being thrown.</span></span><br><span class="line"><span class="hljs-comment">     * If no exception is thrown, the specified property is removed.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      key   the name of the system property to be removed.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>     the previous string value of the system property,</span></span><br><span class="line"><span class="hljs-comment">     *             or &lt;code&gt;null&lt;/code&gt; if there was no property with that key.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  SecurityException  if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;checkPropertyAccess&lt;/code&gt; method doesn't allow</span></span><br><span class="line"><span class="hljs-comment">     *              access to the specified system property.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  NullPointerException if &lt;code&gt;key&lt;/code&gt; is</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;null&lt;/code&gt;.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  IllegalArgumentException if &lt;code&gt;key&lt;/code&gt; is empty.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        #getProperty</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        #setProperty</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.util.Properties</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.SecurityException</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.SecurityManager#checkPropertiesAccess()</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span> 1.5</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">clearProperty</span><span class="hljs-params">(String key)</span> </span>&#123;</span><br><span class="line">        checkKey(key);</span><br><span class="line">        SecurityManager sm = getSecurityManager();</span><br><span class="line">        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            sm.checkPermission(<span class="hljs-keyword">new</span> PropertyPermission(key, <span class="hljs-string">"write"</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">return</span> (String) props.remove(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkKey</span><span class="hljs-params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">if</span> (key == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NullPointerException(<span class="hljs-string">"key can't be null"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">if</span> (key.equals(<span class="hljs-string">""</span>)) &#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">"key can't be empty"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Gets the value of the specified environment variable. An</span></span><br><span class="line"><span class="hljs-comment">     * environment variable is a system-dependent external named</span></span><br><span class="line"><span class="hljs-comment">     * value.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;If a security manager exists, its</span></span><br><span class="line"><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> SecurityManager#checkPermission checkPermission&#125;</span></span><br><span class="line"><span class="hljs-comment">     * method is called with a</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;&#123;<span class="hljs-doctag">@link</span> RuntimePermission&#125;("getenv."+name)&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * permission.  This may result in a &#123;<span class="hljs-doctag">@link</span> SecurityException&#125;</span></span><br><span class="line"><span class="hljs-comment">     * being thrown.  If no exception is thrown the value of the</span></span><br><span class="line"><span class="hljs-comment">     * variable &lt;code&gt;name&lt;/code&gt; is returned.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;&lt;a name="EnvironmentVSSystemProperties"&gt;&lt;i&gt;System</span></span><br><span class="line"><span class="hljs-comment">     * properties&lt;/i&gt; and &lt;i&gt;environment variables&lt;/i&gt;&lt;/a&gt; are both</span></span><br><span class="line"><span class="hljs-comment">     * conceptually mappings between names and values.  Both</span></span><br><span class="line"><span class="hljs-comment">     * mechanisms can be used to pass user-defined information to a</span></span><br><span class="line"><span class="hljs-comment">     * Java process.  Environment variables have a more global effect,</span></span><br><span class="line"><span class="hljs-comment">     * because they are visible to all descendants of the process</span></span><br><span class="line"><span class="hljs-comment">     * which defines them, not just the immediate Java subprocess.</span></span><br><span class="line"><span class="hljs-comment">     * They can have subtly different semantics, such as case</span></span><br><span class="line"><span class="hljs-comment">     * insensitivity, on different operating systems.  For these</span></span><br><span class="line"><span class="hljs-comment">     * reasons, environment variables are more likely to have</span></span><br><span class="line"><span class="hljs-comment">     * unintended side effects.  It is best to use system properties</span></span><br><span class="line"><span class="hljs-comment">     * where possible.  Environment variables should be used when a</span></span><br><span class="line"><span class="hljs-comment">     * global effect is desired, or when an external system interface</span></span><br><span class="line"><span class="hljs-comment">     * requires an environment variable (such as &lt;code&gt;PATH&lt;/code&gt;).</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;On UNIX systems the alphabetic case of &lt;code&gt;name&lt;/code&gt; is</span></span><br><span class="line"><span class="hljs-comment">     * typically significant, while on Microsoft Windows systems it is</span></span><br><span class="line"><span class="hljs-comment">     * typically not.  For example, the expression</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;System.getenv("FOO").equals(System.getenv("foo"))&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * is likely to be true on Microsoft Windows.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>  name the name of the environment variable</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> the string value of the variable, or &lt;code&gt;null&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     *         if the variable is not defined in the system environment</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> NullPointerException if &lt;code&gt;name&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> SecurityException</span></span><br><span class="line"><span class="hljs-comment">     *         if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *         &#123;<span class="hljs-doctag">@link</span> SecurityManager#checkPermission checkPermission&#125;</span></span><br><span class="line"><span class="hljs-comment">     *         method doesn't allow access to the environment variable</span></span><br><span class="line"><span class="hljs-comment">     *         &lt;code&gt;name&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>    #getenv()</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>    ProcessBuilder#environment()</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getenv</span><span class="hljs-params">(String name)</span> </span>&#123;</span><br><span class="line">        SecurityManager sm = getSecurityManager();</span><br><span class="line">        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            sm.checkPermission(<span class="hljs-keyword">new</span> RuntimePermission(<span class="hljs-string">"getenv."</span>+name));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">return</span> ProcessEnvironment.getenv(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Returns an unmodifiable string map view of the current system environment.</span></span><br><span class="line"><span class="hljs-comment">     * The environment is a system-dependent mapping from names to</span></span><br><span class="line"><span class="hljs-comment">     * values which is passed from parent to child processes.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;If the system does not support environment variables, an</span></span><br><span class="line"><span class="hljs-comment">     * empty map is returned.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;The returned map will never contain null keys or values.</span></span><br><span class="line"><span class="hljs-comment">     * Attempting to query the presence of a null key or value will</span></span><br><span class="line"><span class="hljs-comment">     * throw a &#123;<span class="hljs-doctag">@link</span> NullPointerException&#125;.  Attempting to query</span></span><br><span class="line"><span class="hljs-comment">     * the presence of a key or value which is not of type</span></span><br><span class="line"><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> String&#125; will throw a &#123;<span class="hljs-doctag">@link</span> ClassCastException&#125;.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;The returned map and its collection views may not obey the</span></span><br><span class="line"><span class="hljs-comment">     * general contract of the &#123;<span class="hljs-doctag">@link</span> Object#equals&#125; and</span></span><br><span class="line"><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> Object#hashCode&#125; methods.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;The returned map is typically case-sensitive on all platforms.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;If a security manager exists, its</span></span><br><span class="line"><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> SecurityManager#checkPermission checkPermission&#125;</span></span><br><span class="line"><span class="hljs-comment">     * method is called with a</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;&#123;<span class="hljs-doctag">@link</span> RuntimePermission&#125;("getenv.*")&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * permission.  This may result in a &#123;<span class="hljs-doctag">@link</span> SecurityException&#125; being</span></span><br><span class="line"><span class="hljs-comment">     * thrown.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;When passing information to a Java subprocess,</span></span><br><span class="line"><span class="hljs-comment">     * &lt;a href=#EnvironmentVSSystemProperties&gt;system properties&lt;/a&gt;</span></span><br><span class="line"><span class="hljs-comment">     * are generally preferred over environment variables.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> the environment as a map of variable names to values</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> SecurityException</span></span><br><span class="line"><span class="hljs-comment">     *         if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *         &#123;<span class="hljs-doctag">@link</span> SecurityManager#checkPermission checkPermission&#125;</span></span><br><span class="line"><span class="hljs-comment">     *         method doesn't allow access to the process environment</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>    #getenv(String)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>    ProcessBuilder#environment()</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span>  1.5</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> java.util.<span class="hljs-function">Map&lt;String,String&gt; <span class="hljs-title">getenv</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        SecurityManager sm = getSecurityManager();</span><br><span class="line">        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            sm.checkPermission(<span class="hljs-keyword">new</span> RuntimePermission(<span class="hljs-string">"getenv.*"</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">return</span> ProcessEnvironment.getenv();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Terminates the currently running Java Virtual Machine. The</span></span><br><span class="line"><span class="hljs-comment">     * argument serves as a status code; by convention, a nonzero status</span></span><br><span class="line"><span class="hljs-comment">     * code indicates abnormal termination.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * This method calls the &lt;code&gt;exit&lt;/code&gt; method in class</span></span><br><span class="line"><span class="hljs-comment">     * &lt;code&gt;Runtime&lt;/code&gt;. This method never returns normally.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * The call &lt;code&gt;System.exit(n)&lt;/code&gt; is effectively equivalent to</span></span><br><span class="line"><span class="hljs-comment">     * the call:</span></span><br><span class="line"><span class="hljs-comment">     * &lt;blockquote&gt;&lt;pre&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Runtime.getRuntime().exit(n)</span></span><br><span class="line"><span class="hljs-comment">     * &lt;/pre&gt;&lt;/blockquote&gt;</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      status   exit status.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  SecurityException</span></span><br><span class="line"><span class="hljs-comment">     *        if a security manager exists and its &lt;code&gt;checkExit&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     *        method doesn't allow exit with the specified status.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.Runtime#exit(int)</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">exit</span><span class="hljs-params">(<span class="hljs-keyword">int</span> status)</span> </span>&#123;</span><br><span class="line">        Runtime.getRuntime().exit(status);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Runs the garbage collector.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Calling the &lt;code&gt;gc&lt;/code&gt; method suggests that the Java Virtual</span></span><br><span class="line"><span class="hljs-comment">     * Machine expend effort toward recycling unused objects in order to</span></span><br><span class="line"><span class="hljs-comment">     * make the memory they currently occupy available for quick reuse.</span></span><br><span class="line"><span class="hljs-comment">     * When control returns from the method call, the Java Virtual</span></span><br><span class="line"><span class="hljs-comment">     * Machine has made a best effort to reclaim space from all discarded</span></span><br><span class="line"><span class="hljs-comment">     * objects.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * The call &lt;code&gt;System.gc()&lt;/code&gt; is effectively equivalent to the</span></span><br><span class="line"><span class="hljs-comment">     * call:</span></span><br><span class="line"><span class="hljs-comment">     * &lt;blockquote&gt;&lt;pre&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Runtime.getRuntime().gc()</span></span><br><span class="line"><span class="hljs-comment">     * &lt;/pre&gt;&lt;/blockquote&gt;</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.lang.Runtime#gc()</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">gc</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        Runtime.getRuntime().gc();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Runs the finalization methods of any objects pending finalization.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Calling this method suggests that the Java Virtual Machine expend</span></span><br><span class="line"><span class="hljs-comment">     * effort toward running the &lt;code&gt;finalize&lt;/code&gt; methods of objects</span></span><br><span class="line"><span class="hljs-comment">     * that have been found to be discarded but whose &lt;code&gt;finalize&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * methods have not yet been run. When control returns from the</span></span><br><span class="line"><span class="hljs-comment">     * method call, the Java Virtual Machine has made a best effort to</span></span><br><span class="line"><span class="hljs-comment">     * complete all outstanding finalizations.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * The call &lt;code&gt;System.runFinalization()&lt;/code&gt; is effectively</span></span><br><span class="line"><span class="hljs-comment">     * equivalent to the call:</span></span><br><span class="line"><span class="hljs-comment">     * &lt;blockquote&gt;&lt;pre&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Runtime.getRuntime().runFinalization()</span></span><br><span class="line"><span class="hljs-comment">     * &lt;/pre&gt;&lt;/blockquote&gt;</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.lang.Runtime#runFinalization()</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">runFinalization</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        Runtime.getRuntime().runFinalization();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Enable or disable finalization on exit; doing so specifies that the</span></span><br><span class="line"><span class="hljs-comment">     * finalizers of all objects that have finalizers that have not yet been</span></span><br><span class="line"><span class="hljs-comment">     * automatically invoked are to be run before the Java runtime exits.</span></span><br><span class="line"><span class="hljs-comment">     * By default, finalization on exit is disabled.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;If there is a security manager,</span></span><br><span class="line"><span class="hljs-comment">     * its &lt;code&gt;checkExit&lt;/code&gt; method is first called</span></span><br><span class="line"><span class="hljs-comment">     * with 0 as its argument to ensure the exit is allowed.</span></span><br><span class="line"><span class="hljs-comment">     * This could result in a SecurityException.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@deprecated</span>  This method is inherently unsafe.  It may result in</span></span><br><span class="line"><span class="hljs-comment">     *      finalizers being called on live objects while other threads are</span></span><br><span class="line"><span class="hljs-comment">     *      concurrently manipulating those objects, resulting in erratic</span></span><br><span class="line"><span class="hljs-comment">     *      behavior or deadlock.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> value indicating enabling or disabling of finalization</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  SecurityException</span></span><br><span class="line"><span class="hljs-comment">     *        if a security manager exists and its &lt;code&gt;checkExit&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     *        method doesn't allow the exit.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.lang.Runtime#exit(int)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.lang.Runtime#gc()</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.lang.SecurityManager#checkExit(int)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span>   JDK1.1</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-meta">@Deprecated</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">runFinalizersOnExit</span><span class="hljs-params">(<span class="hljs-keyword">boolean</span> value)</span> </span>&#123;</span><br><span class="line">        Runtime.runFinalizersOnExit(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Loads the native library specified by the filename argument.  The filename</span></span><br><span class="line"><span class="hljs-comment">     * argument must be an absolute path name.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * If the filename argument, when stripped of any platform-specific library</span></span><br><span class="line"><span class="hljs-comment">     * prefix, path, and file extension, indicates a library whose name is,</span></span><br><span class="line"><span class="hljs-comment">     * for example, L, and a native library called L is statically linked</span></span><br><span class="line"><span class="hljs-comment">     * with the VM, then the JNI_OnLoad_L function exported by the library</span></span><br><span class="line"><span class="hljs-comment">     * is invoked rather than attempting to load a dynamic library.</span></span><br><span class="line"><span class="hljs-comment">     * A filename matching the argument does not have to exist in the</span></span><br><span class="line"><span class="hljs-comment">     * file system.</span></span><br><span class="line"><span class="hljs-comment">     * See the JNI Specification for more details.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * Otherwise, the filename argument is mapped to a native library image in</span></span><br><span class="line"><span class="hljs-comment">     * an implementation-dependent manner.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * The call &lt;code&gt;System.load(name)&lt;/code&gt; is effectively equivalent</span></span><br><span class="line"><span class="hljs-comment">     * to the call:</span></span><br><span class="line"><span class="hljs-comment">     * &lt;blockquote&gt;&lt;pre&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Runtime.getRuntime().load(name)</span></span><br><span class="line"><span class="hljs-comment">     * &lt;/pre&gt;&lt;/blockquote&gt;</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      filename   the file to load.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  SecurityException  if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;checkLink&lt;/code&gt; method doesn't allow</span></span><br><span class="line"><span class="hljs-comment">     *             loading of the specified dynamic library</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  UnsatisfiedLinkError  if either the filename is not an</span></span><br><span class="line"><span class="hljs-comment">     *             absolute path name, the native library is not statically</span></span><br><span class="line"><span class="hljs-comment">     *             linked with the VM, or the library cannot be mapped to</span></span><br><span class="line"><span class="hljs-comment">     *             a native library image by the host system.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  NullPointerException if &lt;code&gt;filename&lt;/code&gt; is</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;null&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.Runtime#load(java.lang.String)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.SecurityManager#checkLink(java.lang.String)</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-meta">@CallerSensitive</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">load</span><span class="hljs-params">(String filename)</span> </span>&#123;</span><br><span class="line">        Runtime.getRuntime().load0(Reflection.getCallerClass(), filename);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Loads the native library specified by the &lt;code&gt;libname&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * argument.  The &lt;code&gt;libname&lt;/code&gt; argument must not contain any platform</span></span><br><span class="line"><span class="hljs-comment">     * specific prefix, file extension or path. If a native library</span></span><br><span class="line"><span class="hljs-comment">     * called &lt;code&gt;libname&lt;/code&gt; is statically linked with the VM, then the</span></span><br><span class="line"><span class="hljs-comment">     * JNI_OnLoad_&lt;code&gt;libname&lt;/code&gt; function exported by the library is invoked.</span></span><br><span class="line"><span class="hljs-comment">     * See the JNI Specification for more details.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * Otherwise, the libname argument is loaded from a system library</span></span><br><span class="line"><span class="hljs-comment">     * location and mapped to a native library image in an implementation-</span></span><br><span class="line"><span class="hljs-comment">     * dependent manner.</span></span><br><span class="line"><span class="hljs-comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment">     * The call &lt;code&gt;System.loadLibrary(name)&lt;/code&gt; is effectively</span></span><br><span class="line"><span class="hljs-comment">     * equivalent to the call</span></span><br><span class="line"><span class="hljs-comment">     * &lt;blockquote&gt;&lt;pre&gt;</span></span><br><span class="line"><span class="hljs-comment">     * Runtime.getRuntime().loadLibrary(name)</span></span><br><span class="line"><span class="hljs-comment">     * &lt;/pre&gt;&lt;/blockquote&gt;</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      libname   the name of the library.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  SecurityException  if a security manager exists and its</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;checkLink&lt;/code&gt; method doesn't allow</span></span><br><span class="line"><span class="hljs-comment">     *             loading of the specified dynamic library</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  UnsatisfiedLinkError if either the libname argument</span></span><br><span class="line"><span class="hljs-comment">     *             contains a file path, the native library is not statically</span></span><br><span class="line"><span class="hljs-comment">     *             linked with the VM,  or the library cannot be mapped to a</span></span><br><span class="line"><span class="hljs-comment">     *             native library image by the host system.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  NullPointerException if &lt;code&gt;libname&lt;/code&gt; is</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;null&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.Runtime#loadLibrary(java.lang.String)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.SecurityManager#checkLink(java.lang.String)</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-meta">@CallerSensitive</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">loadLibrary</span><span class="hljs-params">(String libname)</span> </span>&#123;</span><br><span class="line">        Runtime.getRuntime().loadLibrary0(Reflection.getCallerClass(), libname);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Maps a library name into a platform-specific string representing</span></span><br><span class="line"><span class="hljs-comment">     * a native library.</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      libname the name of the library.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>     a platform-dependent native library name.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@exception</span>  NullPointerException if &lt;code&gt;libname&lt;/code&gt; is</span></span><br><span class="line"><span class="hljs-comment">     *             &lt;code&gt;null&lt;/code&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.System#loadLibrary(java.lang.String)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.ClassLoader#findLibrary(java.lang.String)</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@since</span>      1.2</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> String <span class="hljs-title">mapLibraryName</span><span class="hljs-params">(String libname)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Create PrintStream for stdout/err based on encoding.</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> PrintStream <span class="hljs-title">newPrintStream</span><span class="hljs-params">(FileOutputStream fos, String enc)</span> </span>&#123;</span><br><span class="line">       <span class="hljs-keyword">if</span> (enc != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">            <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> PrintStream(<span class="hljs-keyword">new</span> BufferedOutputStream(fos, <span class="hljs-number">128</span>), <span class="hljs-keyword">true</span>, enc);</span><br><span class="line">            &#125; <span class="hljs-keyword">catch</span> (UnsupportedEncodingException uee) &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> PrintStream(<span class="hljs-keyword">new</span> BufferedOutputStream(fos, <span class="hljs-number">128</span>), <span class="hljs-keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Initialize the system class.  Called after thread initialization.</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initializeSystemClass</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">// VM might invoke JNU_NewStringPlatform() to set those encoding</span></span><br><span class="line">        <span class="hljs-comment">// sensitive properties (user.home, user.name, boot.class.path, etc.)</span></span><br><span class="line">        <span class="hljs-comment">// during "props" initialization, in which it may need access, via</span></span><br><span class="line">        <span class="hljs-comment">// System.getProperty(), to the related system encoding property that</span></span><br><span class="line">        <span class="hljs-comment">// have been initialized (put into "props") at early stage of the</span></span><br><span class="line">        <span class="hljs-comment">// initialization. So make sure the "props" is available at the</span></span><br><span class="line">        <span class="hljs-comment">// very beginning of the initialization and all system properties to</span></span><br><span class="line">        <span class="hljs-comment">// be put into it directly.</span></span><br><span class="line">        props = <span class="hljs-keyword">new</span> Properties();</span><br><span class="line">        initProperties(props);  <span class="hljs-comment">// initialized by the VM</span></span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">// There are certain system configurations that may be controlled by</span></span><br><span class="line">        <span class="hljs-comment">// VM options such as the maximum amount of direct memory and</span></span><br><span class="line">        <span class="hljs-comment">// Integer cache size used to support the object identity semantics</span></span><br><span class="line">        <span class="hljs-comment">// of autoboxing.  Typically, the library will obtain these values</span></span><br><span class="line">        <span class="hljs-comment">// from the properties set by the VM.  If the properties are for</span></span><br><span class="line">        <span class="hljs-comment">// internal implementation use only, these properties should be</span></span><br><span class="line">        <span class="hljs-comment">// removed from the system properties.</span></span><br><span class="line">        <span class="hljs-comment">//</span></span><br><span class="line">        <span class="hljs-comment">// See java.lang.Integer.IntegerCache and the</span></span><br><span class="line">        <span class="hljs-comment">// sun.misc.VM.saveAndRemoveProperties method for example.</span></span><br><span class="line">        <span class="hljs-comment">//</span></span><br><span class="line">        <span class="hljs-comment">// Save a private copy of the system properties object that</span></span><br><span class="line">        <span class="hljs-comment">// can only be accessed by the internal implementation.  Remove</span></span><br><span class="line">        <span class="hljs-comment">// certain system properties that are not intended for public access.</span></span><br><span class="line">        sun.misc.VM.saveAndRemoveProperties(props);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        lineSeparator = props.getProperty(<span class="hljs-string">"line.separator"</span>);</span><br><span class="line">        sun.misc.Version.init();</span><br><span class="line"></span><br><span class="line">        FileInputStream fdIn = <span class="hljs-keyword">new</span> FileInputStream(FileDescriptor.in);</span><br><span class="line">        FileOutputStream fdOut = <span class="hljs-keyword">new</span> FileOutputStream(FileDescriptor.out);</span><br><span class="line">        FileOutputStream fdErr = <span class="hljs-keyword">new</span> FileOutputStream(FileDescriptor.err);</span><br><span class="line">        setIn0(<span class="hljs-keyword">new</span> BufferedInputStream(fdIn));</span><br><span class="line">        setOut0(newPrintStream(fdOut, props.getProperty(<span class="hljs-string">"sun.stdout.encoding"</span>)));</span><br><span class="line">        setErr0(newPrintStream(fdErr, props.getProperty(<span class="hljs-string">"sun.stderr.encoding"</span>)));</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">// Load the zip library now in order to keep java.util.zip.ZipFile</span></span><br><span class="line">        <span class="hljs-comment">// from trying to use itself to load this library later.</span></span><br><span class="line">        loadLibrary(<span class="hljs-string">"zip"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">// Setup Java signal handlers for HUP, TERM, and INT (where available).</span></span><br><span class="line">        Terminator.setup();</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">// Initialize any miscellenous operating system settings that need to be</span></span><br><span class="line">        <span class="hljs-comment">// set for the class libraries. Currently this is no-op everywhere except</span></span><br><span class="line">        <span class="hljs-comment">// for Windows where the process-wide error mode is set before the java.io</span></span><br><span class="line">        <span class="hljs-comment">// classes are used.</span></span><br><span class="line">        sun.misc.VM.initializeOSEnvironment();</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">// The main thread is not added to its thread group in the same</span></span><br><span class="line">        <span class="hljs-comment">// way as other threads; we must do it ourselves here.</span></span><br><span class="line">        Thread current = Thread.currentThread();</span><br><span class="line">        current.getThreadGroup().add(current);</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">// register shared secrets</span></span><br><span class="line">        setJavaLangAccess();</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">// Subsystems that are invoked during initialization can invoke</span></span><br><span class="line">        <span class="hljs-comment">// sun.misc.VM.isBooted() in order to avoid doing things that should</span></span><br><span class="line">        <span class="hljs-comment">// wait until the application class loader has been set up.</span></span><br><span class="line">        <span class="hljs-comment">// IMPORTANT: Ensure that this remains the last initialization action!</span></span><br><span class="line">        sun.misc.VM.booted();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setJavaLangAccess</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        <span class="hljs-comment">// Allow privileged classes outside of java.lang</span></span><br><span class="line">        sun.misc.SharedSecrets.setJavaLangAccess(<span class="hljs-keyword">new</span> sun.misc.JavaLangAccess()&#123;</span><br><span class="line">            <span class="hljs-keyword">public</span> sun.reflect.<span class="hljs-function">ConstantPool <span class="hljs-title">getConstantPool</span><span class="hljs-params">(Class&lt;?&gt; klass)</span> </span>&#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> klass.getConstantPool();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">casAnnotationType</span><span class="hljs-params">(Class&lt;?&gt; klass, AnnotationType oldType, AnnotationType newType)</span> </span>&#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> klass.casAnnotationType(oldType, newType);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-function"><span class="hljs-keyword">public</span> AnnotationType <span class="hljs-title">getAnnotationType</span><span class="hljs-params">(Class&lt;?&gt; klass)</span> </span>&#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> klass.getAnnotationType();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-keyword">public</span> Map&lt;Class&lt;? extends Annotation&gt;, Annotation&gt; getDeclaredAnnotationMap(Class&lt;?&gt; klass) &#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> klass.getDeclaredAnnotationMap();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] getRawClassAnnotations(Class&lt;?&gt; klass) &#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> klass.getRawAnnotations();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] getRawClassTypeAnnotations(Class&lt;?&gt; klass) &#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> klass.getRawTypeAnnotations();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] getRawExecutableTypeAnnotations(Executable executable) &#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> Class.getExecutableTypeAnnotationBytes(executable);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-keyword">public</span> &lt;E extends Enum&lt;E&gt;&gt;</span><br><span class="line">                    E[] getEnumConstantsShared(Class&lt;E&gt; klass) &#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> klass.getEnumConstantsShared();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">blockedOn</span><span class="hljs-params">(Thread t, Interruptible b)</span> </span>&#123;</span><br><span class="line">                t.blockedOn(b);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">registerShutdownHook</span><span class="hljs-params">(<span class="hljs-keyword">int</span> slot, <span class="hljs-keyword">boolean</span> registerShutdownInProgress, Runnable hook)</span> </span>&#123;</span><br><span class="line">                Shutdown.add(slot, registerShutdownInProgress, hook);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getStackTraceDepth</span><span class="hljs-params">(Throwable t)</span> </span>&#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> t.getStackTraceDepth();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-function"><span class="hljs-keyword">public</span> StackTraceElement <span class="hljs-title">getStackTraceElement</span><span class="hljs-params">(Throwable t, <span class="hljs-keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> t.getStackTraceElement(i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">newStringUnsafe</span><span class="hljs-params">(<span class="hljs-keyword">char</span>[] chars)</span> </span>&#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> String(chars, <span class="hljs-keyword">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-function"><span class="hljs-keyword">public</span> Thread <span class="hljs-title">newThreadWithAcc</span><span class="hljs-params">(Runnable target, AccessControlContext acc)</span> </span>&#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Thread(target, acc);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">invokeFinalize</span><span class="hljs-params">(Object o)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                o.finalize();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-06T05:21:38.000Z">2019-09-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 分钟 读完 (大约 710 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/06/Java反编译工具jad/">Java反编译工具jad</a>
            
        </h1>
        <div class="content">
            <p><img src="/images/2019/09/06/c8ac68c0-d064-11e9-baaa-a18a2b353fbb.png" alt="image.png"></p>
<h1 id="Jad-JAva-Decompiler"><a href="#Jad-JAva-Decompiler" class="headerlink" title="Jad(JAva Decompiler)"></a>Jad(JAva Decompiler)</h1><p>Jad(JAva Decompiler)是一个Java的反编译器，可以通过命令行把Java的class文件反编译成源代码。下载<a href="https://varaneckas.com/jad/" target="_blank" rel="noopener">点击</a></p>
<p>使用方法：</p>
<p>[1] 反编译一个class文件：jad example.class，会生成example.jad，用文本编辑器打开就是java源代码</p>
<p>[2] 指定生成源代码的后缀名：jad -sjava example.class，生成example.java</p>
<p>[3] 改变生成的源代码的名称，可以先使用-p将反编译后的源代码输出到控制台窗口，然后使用重定向，输出到文件：jad -p example.class &gt; myexample.java</p>
<p>[4] 把源代码文件输出到指定的目录：jad -dnewdir -sjava example.class，在newdir目录下生成example.java</p>
<p>[5] 把packages目录下的class文件全部反编译：jad -sjava packages/*.class</p>
<p>[6] 把packages目录以及子目录下的文件全部反编译：jad -sjava packages/<em>*/</em>.class，不过你仍然会发现所有的源代码文件被放到了同一个文件中，没有按照class文件的包路径建立起路径</p>
<p>[7] 把packages目录以及子目录下的文件全部反编译并建立和java包一致的文件夹路径，可以使用-r命令：jad -r -sjava packages/<em>*/</em>.class</p>
<p>[8] 当重复使用命令反编译时，Jad会提示“whether you want to overwrite it or not”，使用-o可以强制覆盖旧文件</p>
<p>[9] 还有其他的参数可以设置生成的源代码的格式，可以输入jad命令查看帮助，这里有个人做了简单的翻译：jad命令总结</p>
<p>[10] 当然，你会发现有些源文件头部有些注释信息，不用找了，jad没有参数可以去掉它，用别的办法吧。</p>
<h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><p>Main.java</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> t = <span class="hljs-number">0</span>;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">int</span> n = <span class="hljs-number">100</span>;</span><br><span class="line">        Thread[] threads = <span class="hljs-keyword">new</span> Thread[n];</span><br><span class="line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            threads[i] = <span class="hljs-keyword">new</span> Thread(<span class="hljs-keyword">new</span> Runnable() &#123;</span><br><span class="line"></span><br><span class="line">                <span class="hljs-meta">@Override</span></span><br><span class="line">                <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) &#123;</span><br><span class="line">                        add();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            threads[i].start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">while</span> (Thread.activeCount() &gt; <span class="hljs-number">1</span>)</span><br><span class="line">            Thread.yield();</span><br><span class="line"></span><br><span class="line">        System.out.println(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        t++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Main.class</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">cafe babe 0000 0034 0037 0a00 0d00 1d07</span><br><span class="line">001e 0700 1f0a 0003 001d 0a00 0200 200a</span><br><span class="line">0002 0021 0a00 0200 220a 0002 0023 0900</span><br><span class="line">2400 2509 000c 0026 0a00 2700 2807 0029</span><br><span class="line">0700 2a01 000c 496e 6e65 7243 6c61 7373</span><br><span class="line">6573 0100 0174 0100 0149 0100 063c 696e</span><br><span class="line">6974 3e01 0003 2829 5601 0004 436f 6465</span><br><span class="line">0100 0f4c 696e 654e 756d 6265 7254 6162</span><br><span class="line">6c65 0100 046d 6169 6e01 0016 285b 4c6a</span><br><span class="line">6176 612f 6c61 6e67 2f53 7472 696e 673b</span><br><span class="line">2956 0100 0d53 7461 636b 4d61 7054 6162</span><br><span class="line">6c65 0700 2b01 0003 6164 6401 0008 3c63</span><br><span class="line">6c69 6e69 743e 0100 0a53 6f75 7263 6546</span><br><span class="line">696c 6501 0009 4d61 696e 2e6a 6176 610c</span><br><span class="line">0011 0012 0100 106a 6176 612f 6c61 6e67</span><br><span class="line">2f54 6872 6561 6401 0006 4d61 696e 2431</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p><img src="/images/2019/09/06/fcb05680-d065-11e9-baaa-a18a2b353fbb.png" alt="image.png"></p>
<p>反编译后的结果</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.</span></span><br><span class="line"><span class="hljs-comment">// Jad home page: http://www.kpdus.com/jad.html</span></span><br><span class="line"><span class="hljs-comment">// Decompiler options: packimports(3) </span></span><br><span class="line"><span class="hljs-comment">// Source File Name:   Main.java</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.io.PrintStream;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span></span></span><br><span class="line"><span class="hljs-class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String args[])</span></span></span><br><span class="line"><span class="hljs-function">    </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">byte</span> byte0 = <span class="hljs-number">100</span>;</span><br><span class="line">        Thread athread[] = <span class="hljs-keyword">new</span> Thread[byte0];</span><br><span class="line">        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; byte0; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            athread[i] = <span class="hljs-keyword">new</span> Thread(<span class="hljs-keyword">new</span> Runnable() &#123;</span><br><span class="line"></span><br><span class="line">                <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function">                </span>&#123;</span><br><span class="line">                    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">10000</span>; j++)</span><br><span class="line">                        Main.add();</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">);</span><br><span class="line">            athread[i].start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">for</span>(; Thread.activeCount() &gt; <span class="hljs-number">1</span>; Thread.yield());</span><br><span class="line">        System.out.println(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function">    </span>&#123;</span><br><span class="line">        t++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> t = <span class="hljs-number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-05T18:53:05.000Z">2019-09-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 分钟 读完 (大约 564 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/06/判断素数/">判断素数</a>
            
        </h1>
        <div class="content">
            <p><img src="/images/2019/09/06/033e9e90-d074-11e9-9009-39f523e8a996.png" alt="image.png"></p>
<h1 id="素数"><a href="#素数" class="headerlink" title="素数"></a>素数</h1><ul>
<li>质数又称素数。一个大于1的自然数，除了1和它自身外，不能被其他自然数整除的数叫做质数；否则称为合数。</li>
<li>0和1既不是质数也不是合数，最小的质数是2</li>
</ul>
<ol>
<li>最直观，但效率最低的写法</li>
</ol>
<p>这里特殊处理了一下小于等于3的数，因为小于等于3的自然数只有2和3是质数。</p>
<p>然后，我们只需要从2开始，一直到小于其自身，依次判断能否被n整除即可，能够整除则不是质数，否则是质数。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isPrime</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">3</span>) &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> n &gt; <span class="hljs-number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="hljs-keyword">if</span> (n % i == <span class="hljs-number">0</span>) &#123;</span><br><span class="line">            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>优化</li>
</ol>
<p>我们继续分析，其实质数还有一个特点，就是它总是等于 6x-1 或者 6x+1，其中 x 是大于等于1的自然数。</p>
<p>如何论证这个结论呢，其实不难。首先 6x 肯定不是质数，因为它能被 6 整除；其次 6x+2 肯定也不是质数，因为它还能被2整除；依次类推，6x+3 肯定能被 3 整除；6x+4 肯定能被 2 整除。那么，就只有 6x+1 和 6x+5 (即等同于6x-1) 可能是质数了。所以循环的步长可以设为 6，然后每次只判断 6 两侧的数即可。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isPrime</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">if</span> (num &lt;= <span class="hljs-number">3</span>) &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> num &gt; <span class="hljs-number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-comment">// 不在6的倍数两侧的一定不是质数</span></span><br><span class="line">    <span class="hljs-keyword">if</span> (num % <span class="hljs-number">6</span> != <span class="hljs-number">1</span> &amp;&amp; num % <span class="hljs-number">6</span> != <span class="hljs-number">5</span>) &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-keyword">int</span> sqrt = (<span class="hljs-keyword">int</span>) Math.sqrt(num);</span><br><span class="line">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">5</span>; i &lt;= sqrt; i += <span class="hljs-number">6</span>) &#123;</span><br><span class="line">        <span class="hljs-keyword">if</span> (num % i == <span class="hljs-number">0</span> || num % (i + <span class="hljs-number">2</span>) == <span class="hljs-number">0</span>) &#123;</span><br><span class="line">            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>性能对比</li>
</ol>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-comment">// Scanner in = new Scanner(System.in);</span></span><br><span class="line">        <span class="hljs-comment">// int n = in.nextInt();</span></span><br><span class="line">        <span class="hljs-comment">// in.close();</span></span><br><span class="line">        Stack&lt;Integer&gt; a = <span class="hljs-keyword">new</span> Stack&lt;&gt;(), b = <span class="hljs-keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="hljs-keyword">int</span> n = <span class="hljs-number">100000</span>;</span><br><span class="line">        <span class="hljs-keyword">long</span> s = System.currentTimeMillis(), e;</span><br><span class="line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="hljs-keyword">if</span> (f(i))</span><br><span class="line">                a.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">        e = System.currentTimeMillis();</span><br><span class="line">        System.out.println(e - s + <span class="hljs-string">" ms"</span>);</span><br><span class="line">        s = System.currentTimeMillis();</span><br><span class="line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="hljs-keyword">if</span> (func(i))</span><br><span class="line">                b.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">        e = System.currentTimeMillis();</span><br><span class="line">        System.out.println(e - s + <span class="hljs-string">" ms"</span>);</span><br><span class="line">        System.gc();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">3</span>)</span><br><span class="line">            <span class="hljs-keyword">return</span> n &gt; <span class="hljs-number">1</span>;</span><br><span class="line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="hljs-keyword">if</span> (n % i == <span class="hljs-number">0</span>) &#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">3</span>)</span><br><span class="line">            <span class="hljs-keyword">return</span> n &gt; <span class="hljs-number">1</span>;</span><br><span class="line">        <span class="hljs-keyword">if</span> (n % <span class="hljs-number">6</span> != <span class="hljs-number">1</span> &amp;&amp; n % <span class="hljs-number">6</span> != <span class="hljs-number">5</span>) &#123;</span><br><span class="line">            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">int</span> tem = (<span class="hljs-keyword">int</span>) Math.sqrt(n);</span><br><span class="line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">5</span>; i &lt;= tem; i += <span class="hljs-number">6</span>) &#123;</span><br><span class="line">            <span class="hljs-keyword">if</span> (n % i == <span class="hljs-number">0</span> || n % (i + <span class="hljs-number">2</span>) == <span class="hljs-number">0</span>)</span><br><span class="line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1392 ms</span><br><span class="line">5 ms</span><br></pre></td></tr></table></figure>
        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous">
            <a class="is-flex-grow has-text-black-ter" href="/categories/文章/page/5/">上一页</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/categories/文章/page/7/">下一页</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link has-text-black-ter" href="/categories/文章/">1</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/categories/文章/page/5/">5</a></li>
            
            <li><a class="pagination-link is-current" href="/categories/文章/page/6/">6</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/categories/文章/page/7/">7</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left is-sticky">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="is-rounded" src="https://hsutimes.github.io/images/16530d7f26a413c2.png" alt="Time">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        Time
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Developer
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Earth, Solar System</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <a href="/archives">
                        <p class="title has-text-weight-normal">
                            100
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <a href="/categories">
                        <p class="title has-text-weight-normal">
                            6
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <a href="/tags">
                        <p class="title has-text-weight-normal">
                            123
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/hsutimes" target="_blank">
                关注我</a>
        </div>
        
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Github" href="https://github.com/hsutimes">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Facebook" href="https://facebook.com">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Twitter" href="https://twitter.com/times26740863">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Dribbble" href="https://dribbble.com">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://github.com/hsutimes" target="_blank">
                    <span class="level-left">
                        <span class="level-item">PPOffice</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://hsutimes.club" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Time</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hsutimes.club</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Others/">
            <span class="level-start">
                <span class="level-item">Others</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/人工智能/">
            <span class="level-start">
                <span class="level-item">人工智能</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">7</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/文章/">
            <span class="level-start">
                <span class="level-item">文章</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">77</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/生活/">
            <span class="level-start">
                <span class="level-item">生活</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/笔试/">
            <span class="level-start">
                <span class="level-item">笔试</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/算法/">
            <span class="level-start">
                <span class="level-item">算法</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">7</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
    
        <div class="column-right-shadow is-hidden-widescreen is-sticky">
        
            
        
            <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/11/20/PythonRobotics/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/2019/11/20/6090d560-0b82-11ea-9a59-8136f50345cc.png" alt="PythonRobotics">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-20T10:41:02.000Z">2019-11-20</time></div>
                    <a href="/2019/11/20/PythonRobotics/" class="title has-link-black-ter is-size-6 has-text-weight-normal">PythonRobotics</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/11/19/sqlflow/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/2019/11/19/6052aa40-0ada-11ea-888e-f9f900c5a0f9.png" alt="赋予 SQL AI 能力 SQLFlow">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-19T14:07:53.000Z">2019-11-19</time></div>
                    <a href="/2019/11/19/sqlflow/" class="title has-link-black-ter is-size-6 has-text-weight-normal">赋予 SQL AI 能力 SQLFlow</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/人工智能/">人工智能</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/11/18/target-detection-yolo/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/2019/11/18/cc0d9a30-0a01-11ea-b8d5-416bf8aed005.png" alt="目标检测YOLOv3">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-18T12:26:24.000Z">2019-11-18</time></div>
                    <a href="/2019/11/18/target-detection-yolo/" class="title has-link-black-ter is-size-6 has-text-weight-normal">目标检测YOLOv3</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/人工智能/">人工智能</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/11/17/quantum-computing-wave/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://www.qtumist.com/wp-content/uploads/2019/11/102419_Quantum_008_2500.jpg" alt="哈佛大学教授问与答：解析量子计算浪潮">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-17T14:39:05.000Z">2019-11-17</time></div>
                    <a href="/2019/11/17/quantum-computing-wave/" class="title has-link-black-ter is-size-6 has-text-weight-normal">哈佛大学教授问与答：解析量子计算浪潮</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/11/16/There are no technology-driven companies in the world/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/2019/11/16/553b0d80-082f-11ea-90c6-4101d673f67d.png" alt="世界上没有技术驱动型公司">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-16T05:05:50.000Z">2019-11-16</time></div>
                    <a href="/2019/11/16/There are no technology-driven companies in the world/" class="title has-link-black-ter is-size-6 has-text-weight-normal">世界上没有技术驱动型公司</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right is-sticky">
    
        
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/11/20/PythonRobotics/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/2019/11/20/6090d560-0b82-11ea-9a59-8136f50345cc.png" alt="PythonRobotics">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-20T10:41:02.000Z">2019-11-20</time></div>
                    <a href="/2019/11/20/PythonRobotics/" class="title has-link-black-ter is-size-6 has-text-weight-normal">PythonRobotics</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/11/19/sqlflow/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/2019/11/19/6052aa40-0ada-11ea-888e-f9f900c5a0f9.png" alt="赋予 SQL AI 能力 SQLFlow">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-19T14:07:53.000Z">2019-11-19</time></div>
                    <a href="/2019/11/19/sqlflow/" class="title has-link-black-ter is-size-6 has-text-weight-normal">赋予 SQL AI 能力 SQLFlow</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/人工智能/">人工智能</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/11/18/target-detection-yolo/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/2019/11/18/cc0d9a30-0a01-11ea-b8d5-416bf8aed005.png" alt="目标检测YOLOv3">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-18T12:26:24.000Z">2019-11-18</time></div>
                    <a href="/2019/11/18/target-detection-yolo/" class="title has-link-black-ter is-size-6 has-text-weight-normal">目标检测YOLOv3</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/人工智能/">人工智能</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/11/17/quantum-computing-wave/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://www.qtumist.com/wp-content/uploads/2019/11/102419_Quantum_008_2500.jpg" alt="哈佛大学教授问与答：解析量子计算浪潮">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-17T14:39:05.000Z">2019-11-17</time></div>
                    <a href="/2019/11/17/quantum-computing-wave/" class="title has-link-black-ter is-size-6 has-text-weight-normal">哈佛大学教授问与答：解析量子计算浪潮</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/11/16/There are no technology-driven companies in the world/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/2019/11/16/553b0d80-082f-11ea-90c6-4101d673f67d.png" alt="世界上没有技术驱动型公司">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-16T05:05:50.000Z">2019-11-16</time></div>
                    <a href="/2019/11/16/There are no technology-driven companies in the world/" class="title has-link-black-ter is-size-6 has-text-weight-normal">世界上没有技术驱动型公司</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/文章/">文章</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="Time" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 times&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                共<span id="busuanzi_value_site_uv">0</span>个访客
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/hsutimes/hsutimes.github.io">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>

<script>
var IcarusThemeSettings = {
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>



    
    
<script src="/js/animation.js"></script>

    
    
<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>

    
    
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>

    
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>
    
    
<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>

    
    
    
    
    
    
    
    
    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>